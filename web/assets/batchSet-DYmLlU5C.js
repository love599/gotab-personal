import{u as e,k as a,r as t,fg as n,j as s,dD as l,d_ as r,O as o,bb as i,B as c,ao as d,fW as u,Y as h,z as x,fX as m,fY as g,fZ as f,f_ as j,V as p,f$ as b,ag as v,g0 as C,L as y,dk as D,dm as w,dq as k,fo as S,W as T,g1 as F}from"./main-BpZjJVsn.js";function $(){const $=e(),G=a(e=>e.appData.listData),W=a(e=>e.appData.freeDragListData),z=a(e=>e.home.showFreeDrag),M=a(e=>e.home.freeDragGridX),H=a(e=>e.home.freeDragGridY),I=a(e=>e.card.gridColumnWidth),P=a(e=>e.card.gridRowHeight),Y=a(e=>e.card.columnGap),B=a(e=>e.card.rowGap),[E,L]=t.useState("icon"),[N,R]=t.useState("11"),[X,_]=t.useState("#ffffff"),[q,O]=t.useState("#000000"),[V,Z]=t.useState([]),[A,J]=t.useState(0),{height:K,width:Q}=n(),U=[{label:"展示样式",content:s.jsx(s.Fragment,{children:s.jsx(y,{value:E,onChange:e=>{L(e)},variant:"filled",style:{width:"100%",maxWidth:256},placeholder:"请选择链接卡片展示样式",options:[{label:"纯图",value:"icon"},{label:"文本",value:"text"},{label:"横版",value:"icon-h"},{label:"竖版",value:"icon-v"}]})})},{label:"卡片大小",content:s.jsx(s.Fragment,{children:s.jsx(y,{value:N,onChange:e=>{R(e)},variant:"filled",style:{width:"100%",maxWidth:256},placeholder:"请选择链接卡片尺寸大小",options:D})})},{label:"背景颜色",content:s.jsx(s.Fragment,{children:s.jsx(w,{showText:!0,value:X,onChange:e=>{_(e.toHexString())}})})},{label:"文字颜色",content:s.jsx(s.Fragment,{children:s.jsx(w,{showText:!0,value:q,onChange:e=>{O(e.toHexString())}})})},{label:`图标间距（${A}px）`,content:s.jsx(s.Fragment,{children:s.jsx(k,{value:A,min:0,max:48,onChange:e=>{J(e)}})})}],[ee,ae]=t.useState(!1);const te=t.useRef(null);t.useEffect(()=>()=>{te.current&&(clearTimeout(te.current),te.current=null)},[]);const ne=[{label:"卡片内字体颜色(非卡片名称）",content:s.jsx(s.Fragment,{children:s.jsx(d,{title:"是否确认调整",onConfirm:()=>{const e=u(G);$(h(e[0])),x.success(`成功调整了${e[1]}个字体颜色`)},children:s.jsx(c,{type:"link",children:"调整"})})})},{label:"移除相同ID、空文件夹",content:s.jsx(s.Fragment,{children:s.jsx(d,{title:"是否确认移除",onConfirm:()=>{const e=m(G),a=g(f(j(p(G)))),t=m(a);$(h(a)),x.success(`成功移除了${e-t}个数据`)},children:s.jsx(c,{type:"link",children:"移除"})})})},{label:"更新ID为文本类型",content:s.jsx(d,{icon:s.jsx(v,{style:{color:"blue"}}),title:"该更新有利无害",onConfirm:()=>{const e=b(p(G));$(h(e[0])),x.success(`成功移除了${e[1]}个数据ID`)},children:s.jsx(c,{type:"link",children:"更新"})})},{label:"移除所有空白占位卡片",content:s.jsx(d,{title:"是否确认移除",onConfirm:()=>{const e=p(G),a=C(e);$(h(a[0])),x.success(`成功移除了${a[1]}个空白占位卡片`)},children:s.jsx(c,{type:"link",children:"移除"})})},{label:"整理全屏自由拖拽",content:s.jsx(d,{title:"是否确认整理",onConfirm:()=>{if(!z)return void x.error("整理失败，全屏自由拖拽布局未启用");const e=p(W).map(e=>{const a=Math.round(e.x/M)*M,t=Math.round(e.y/H)*H,n=S(e.size,I,P,B,Y),s=Q-n.width,l=K-n.height,r=Math.min(s,a),o=Math.min(l,t);return{...e,x:r,y:o}});x.success("整理完成"),$(T(e))},children:s.jsx(c,{type:"link",children:"整理"})})}];return s.jsxs(s.Fragment,{children:[s.jsx(l,{items:ne,groupTitle:"一键优化",gap:20,bottomDivider:!0}),s.jsx(l,{items:U,groupTitle:"手动控制",gap:20,bottomDivider:!0}),s.jsx(r,{message:"请在下方选择需要调整的参数",type:"info",icon:s.jsx(o,{})}),s.jsx(i.Group,{options:[{label:"展示样式",value:"showType"},{label:"卡片大小",value:"size"},{label:"背景颜色",value:"bgColor"},{label:"文字颜色",value:"textColor"},{label:"图标间距",value:"iconPadding"}],className:"mb-6",value:V,onChange:e=>{Z(e)}}),s.jsx(c,{type:"primary",onClick:function(){V.length<=0?x.error("请选择确认调整的参数信息"):(ae(!0),te.current&&clearTimeout(te.current),te.current=setTimeout(async()=>{try{const e=await async function(e,a,t){return new Promise((n,s)=>{try{n(F(e,a,t))}catch(l){s(l)}})}(G,V,{linkCardBgColor:X,linkCardShowType:E,linkCardSize:N,linkCardTextColor:q,imgPaddingNum:A});$(h(e[0])),x.success(`成功调整了${e[1]}个链接卡片`)}catch(e){console.error("Error updating data:",e),x.error("调整链接卡片时发生错误")}finally{ae(!1)}},500))},loading:ee,children:"调整卡片"})]})}export{$ as default};
