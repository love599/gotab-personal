import{c as e,u as t,g as r,r as s,j as i,W as o,n as l,a5 as n,a6 as a,B as m,E as c,S as d,V as p,i as u,k as j,l as h,q as f,a2 as x}from"./requestIdleCallbackPolyfill-CEimuL3I.js";import{u as y}from"./useFresh-CXjlCB9G.js";import{r as b}from"./transformData-B04ZS_a1.js";import{M as k,R as g}from"./myTable-DifYlg4v.js";import{S as w}from"./submitForInclusion-CIVbLdE7.js";import{C as _}from"./contentLayout-FLn7UwnK.js";import{F as S}from"./index-CLs8asrc.js";import{I as C}from"./index-B6Nw0KJ3.js";import{S as O}from"./index-we7dqPR7.js";import{R as I}from"./SearchOutlined-C3PMWV9D.js";import{R as A}from"./RedoOutlined-BRwewl8_.js";import{T as N}from"./index-DG56vLGF.js";import{R as v}from"./SortAscendingOutlined-C-ATcvwB.js";import{R as F}from"./UserOutlined-Ch50gqEV.js";import"./index-CVsAKlSW.js";import"./useForm-BmxkZ3hM.js";import"./index-Cu_iOCo3.js";import"./LeftOutlined-D9Sp279J.js";import"./FolderOpenOutlined-DHBkEw2_.js";import"./LinkOutlined-Bi0iQjOQ.js";import"./MailOutlined-OCY9FzYP.js";import"./Overflow-CysMCa0X.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./assets-B8Bi78Vh.js";import"./MoneyCollectOutlined-CF6G1lbx.js";import"./MoneyCollectOutlined-4QlEwa2l.js";import"./index-ZPw8Urkh.js";import"./CaretDownOutlined-DcidQ0ah.js";import"./styleChecker-o73Q9rTs.js";import"./AlipayOutlined-DooH4oh8.js";import"./AlipayOutlined-tZM3mGx9.js";import"./useEffectOnce-BdmSZdB2.js";import"./useBreakpoint-BCsgDtUx.js";import"./getAllowClear-Cn6nd0XC.js";import"./index-BCD7T3lV.js";import"./Input-BBAEOKR8.js";import"./CloudUploadOutlined-BcBaKmgs.js";import"./ColorPicker-gpVSsQlx.js";import"./index-kH8S-jgo.js";import"./index-BXpSMQ4p.js";import"./row-eYrfNDsp.js";import"./QuestionCircleOutlined-DSm95oJP.js";import"./TextArea-D12ZTmOp.js";import"./SortAscendingOutlined-8bEGxkuH.js";function L(){const u=e.c(60),{key:j,refresh:h}=y(),f=t(),x=r(P);let g;u[0]!==x?(g=x.filter(E).map(z),u[0]=x,u[1]=g):g=u[1];const N=g,[v]=S.useForm();let F;u[2]===Symbol.for("react.memo_cache_sentinel")?(F={},u[2]=F):F=u[2];const[L,D]=s.useState(F);let K;u[3]!==x||u[4]!==f?(K=function(){o({url:l.getCategoryListWithAll}).then(e=>{if(200===e.code&&e.data){const t=e.data.map(q);n(t,x)||f(a(t))}})},u[3]=x,u[4]=f,u[5]=K):K=u[5];const Q=K;let V,$,G,H,J,X,Y,Z,ee,te,re,se;u[6]!==x.length||u[7]!==Q?(V=()=>{0===x.length&&Q()},u[6]=x.length,u[7]=Q,u[8]=V):V=u[8],u[9]===Symbol.for("react.memo_cache_sentinel")?($=[],u[9]=$):$=u[9],s.useEffect(V,$),u[10]===Symbol.for("react.memo_cache_sentinel")?(Y={title:"网站名称",key:"title",width:200,fixed:"left"},Z={title:"状态",key:"status",width:80,render:W},ee={title:"排序",key:"sort",width:80,render:U},te={title:"网站描述",key:"description",width:450},re={title:"图标",key:"icon",width:140,render:T},G={title:"链接",key:"url",width:120,render:M},H={title:"所属分类",key:"categoryName",width:120},J={title:"提交人",key:"username",width:160,render:R},X={type:"time",title:"更新时间",key:"createdTime",width:200},u[10]=G,u[11]=H,u[12]=J,u[13]=X,u[14]=Y,u[15]=Z,u[16]=ee,u[17]=te,u[18]=re):(G=u[10],H=u[11],J=u[12],X=u[13],Y=u[14],Z=u[15],ee=u[16],te=u[17],re=u[18]),u[19]!==h?(se=[Y,Z,ee,te,re,G,H,J,X,{title:"操作",fixed:"right",width:120,render:(e,t)=>i.jsx(B,{record:t,refresh:h})}],u[19]=h,u[20]=se):se=u[20];const ie=se;let oe,le,ne,ae,me,ce,de,pe,ue,je,he,fe,xe,ye,be,ke,ge,we,_e;return u[21]!==v?(oe=()=>{const e=v.getFieldsValue();e[Math.random()]=!0,D(b(e))},u[21]=v,u[22]=oe):oe=u[22],u[23]===Symbol.for("react.memo_cache_sentinel")?(le={gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gridAutoRows:"32px"},u[23]=le):le=u[23],u[24]===Symbol.for("react.memo_cache_sentinel")?(ne=i.jsx(S.Item,{name:"title",children:i.jsx(C,{placeholder:"标题"})}),u[24]=ne):ne=u[24],u[25]===Symbol.for("react.memo_cache_sentinel")?(ae=i.jsx(S.Item,{name:"link",children:i.jsx(C,{placeholder:"链接"})}),u[25]=ae):ae=u[25],u[26]===Symbol.for("react.memo_cache_sentinel")?(me=i.jsx(S.Item,{name:"username",children:i.jsx(C,{placeholder:"用户名"})}),u[26]=me):me=u[26],u[27]!==N?(ce=i.jsxs("div",{className:"gap-3 flex-wrap grid w-full mb-3",style:le,children:[ne,ae,me,i.jsx(S.Item,{name:"categoryId",children:i.jsx(O,{placeholder:"分类",options:N,allowClear:!0})})]}),u[27]=N,u[28]=ce):ce=u[28],u[29]!==v?(de=()=>{v.submit()},u[29]=v,u[30]=de):de=u[30],u[31]===Symbol.for("react.memo_cache_sentinel")?(pe=i.jsx(I,{}),u[31]=pe):pe=u[31],u[32]!==de?(ue=i.jsx(m,{type:"primary",onClick:de,icon:pe,children:"查询"}),u[32]=de,u[33]=ue):ue=u[33],u[34]!==v?(je=()=>{v.resetFields();const e={};e[Math.random()]=!0,D(e)},u[34]=v,u[35]=je):je=u[35],u[36]===Symbol.for("react.memo_cache_sentinel")?(he=i.jsx(A,{}),u[36]=he):he=u[36],u[37]!==je?(fe=i.jsx(m,{onClick:je,icon:he,children:"重置"}),u[37]=je,u[38]=fe):fe=u[38],u[39]!==ue||u[40]!==fe?(xe=i.jsxs("div",{className:"flex flex-wrap gap-3",children:[ue,fe]}),u[39]=ue,u[40]=fe,u[41]=xe):xe=u[41],u[42]!==v||u[43]!==oe||u[44]!==ce||u[45]!==xe?(ye=i.jsxs(S,{className:"w-full",form:v,onFinish:oe,children:[ce,xe]}),u[42]=v,u[43]=oe,u[44]=ce,u[45]=xe,u[46]=ye):ye=u[46],u[47]===Symbol.for("react.memo_cache_sentinel")?(be=i.jsx(c,{className:"my-3"}),u[47]=be):be=u[47],u[48]!==h?(ke=i.jsx("div",{className:"mb-3",children:i.jsx(m,{type:"primary",onClick:()=>{d.show(p,{title:"新增收录",children:i.jsx(w,{refresh:h})})},children:"新增收录"})}),u[48]=h,u[49]=ke):ke=u[49],u[50]!==L?(ge={searchParams:L},u[50]=L,u[51]=ge):ge=u[51],u[52]!==ie||u[53]!==j||u[54]!==ge?(we=i.jsx(k,{columns:ie,getListUrl:l.getAwaitingApprovalWebsiteSourceList,dataKey:"data.list",tableKey:j,params:ge}),u[52]=ie,u[53]=j,u[54]=ge,u[55]=we):we=u[55],u[56]!==ye||u[57]!==ke||u[58]!==we?(_e=i.jsxs(_,{children:[ye,be,ke,we]}),u[56]=ye,u[57]=ke,u[58]=we,u[59]=_e):_e=u[59],_e}function R(e){return i.jsx(N,{color:e?"geekblue":"red",bordered:!1,icon:i.jsx(F,{}),children:e||"已注销"})}function M(e){return i.jsx(m,{type:"link",size:"small",onClick:()=>{e&&window.open(e,"_blank")},children:e||"-"})}function T(e,t){return e?i.jsxs("div",{className:"p-1 rounded-sm flex items-center gap-2 w-[110px]",style:{backgroundColor:t.backgroundColor,color:t.fontColor},children:[i.jsx("img",{src:u(e),className:"rounded-sm",style:{width:"32px",height:"32px"}}),i.jsx("p",{className:"text-xs font-semibold p-ellipsis w-12",children:t.title})]}):"-"}function U(e){return i.jsx(N,{color:"gold",icon:i.jsx(v,{}),children:e||"-"})}function W(e){return i.jsx(N,{color:0===e?"blue":1===e?"green":2===e?"default":"red",children:0===e?"待审核":1===e?"正常":2===e?"隐藏":"被驳回"})}function q(e){return{label:e.label,key:e.id}}function z(e){return{label:e.label,value:String(e.key)}}function E(e){return e&&0!==e.key}function P(e){return e.stateUtils.categoryList}const B=s.memo(t=>{const o=e.c(24),{record:n,refresh:a}=t;let c;o[0]===Symbol.for("react.memo_cache_sentinel")?(c=[],o[0]=c):c=o[0];const[u,y]=s.useState(c),b=r(D);let k;o[1]!==n||o[2]!==a||o[3]!==b?(k=function(){j(1,y),setTimeout(()=>{h({url:l.deleteWebsiteInfo,token:b,data:{id:n.id}}).then(e=>{200===e.code&&a()}).finally(()=>{f(1,y)})},500)},o[1]=n,o[2]=a,o[3]=b,o[4]=k):k=o[4];const _=k;let S,C,O,I,A,N,v,F;return o[5]===Symbol.for("react.memo_cache_sentinel")?(S={width:"44px"},o[5]=S):S=o[5],o[6]!==n||o[7]!==a?(C=()=>{d.show(p,{title:"编辑收录信息",children:i.jsx(w,{editItem:n,refresh:a,type:"edit"})})},o[6]=n,o[7]=a,o[8]=C):C=o[8],o[9]!==u[0]||o[10]!==C?(O=i.jsx(m,{type:"link",size:"small",disabled:u[0],style:S,onClick:C,children:"编辑"}),o[9]=u[0],o[10]=C,o[11]=O):O=o[11],o[12]===Symbol.for("react.memo_cache_sentinel")?(I={width:"44px"},o[12]=I):I=o[12],o[13]!==u[1]?(A=u[1]?i.jsx(g,{}):"删除",o[13]=u[1],o[14]=A):A=o[14],o[15]!==u[1]||o[16]!==A?(N=i.jsx(m,{danger:!0,type:"link",size:"small",disabled:u[1],style:I,children:A}),o[15]=u[1],o[16]=A,o[17]=N):N=o[17],o[18]!==_||o[19]!==N?(v=i.jsx(x,{title:"是否确认删除该收录？",onConfirm:_,children:N}),o[18]=_,o[19]=N,o[20]=v):v=o[20],o[21]!==O||o[22]!==v?(F=i.jsxs("div",{className:"flex flex-wrap",children:[O,v]}),o[21]=O,o[22]=v,o[23]=F):F=o[23],F});function D(e){return e.user.token}export{L as default};
