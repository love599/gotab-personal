import{r as e,j as s,X as t,B as l,k as a,a as i,W as r,n,Y as o,q as m,l as c}from"./requestIdleCallbackPolyfill-CEimuL3I.js";import{C as p}from"./contentLayout-FLn7UwnK.js";import{F as d}from"./index-CLs8asrc.js";import{S as j}from"./index-BCD7T3lV.js";import{I as u}from"./index-B6Nw0KJ3.js";import{R as x,a as f}from"./PlusOutlined-DoJ9MaWq.js";import"./useForm-BmxkZ3hM.js";import"./row-eYrfNDsp.js";import"./useBreakpoint-BCsgDtUx.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./QuestionCircleOutlined-DSm95oJP.js";import"./getAllowClear-Cn6nd0XC.js";import"./Input-BBAEOKR8.js";import"./TextArea-D12ZTmOp.js";import"./PlusOutlined-ByZyTB3m.js";function h(){const[h]=d.useForm(),[g,k]=e.useState([]);e.useEffect(()=>{!function(){a(0,k);const e=i.getState().user.token;r({url:n.getBottomLinks,token:e}).then(e=>{if(200===e.code)try{const s=JSON.parse(e.data.bottomLinks);s&&o(s)&&s.length>0&&h.setFieldsValue({links:s})}catch(s){}}).finally(()=>{m(0,k)})}()},[]);return s.jsxs(p,{children:[s.jsx(t,{type:"warning",description:s.jsx(s.Fragment,{children:"⚠️ 用于展示备案号、版权声明等信息，支持增加、删除链接组，如果没有自定义，将显示默认内容"}),className:"mb-4 p-1 px-3 text-xs font-normal w-full"}),s.jsx(j,{spinning:g[0],wrapperClassName:"w-full",children:s.jsxs(d,{form:h,onFinish:e=>{a(1,k);const s=i.getState().user.token;c({url:n.updateBottomLinks,token:s,data:{links:JSON.stringify(e.links)}}).finally(()=>{m(1,k)})},className:"w-full",autoComplete:"off",labelCol:{flex:"90px"},children:[s.jsx(d.List,{name:"links",children:(e,{add:t,remove:a})=>s.jsxs(s.Fragment,{children:[e.map(({key:e,name:t,...i})=>s.jsxs("div",{className:"flex mb-2 gap-3 items-start align-baseline",children:[s.jsx(d.Item,{label:"链接名称",...i,name:[t,"label"],rules:[{required:!0,message:"请输入链接名称"}],className:"flex-1",children:s.jsx(u,{placeholder:"例如：京ICP备12345678号或Gotab新标签页",allowClear:!0})}),s.jsx(d.Item,{label:"链接地址",...i,name:[t,"link"],rules:[{required:!0,message:"请输入链接地址"},{type:"url",message:"请输入有效的 URL 地址"}],className:"flex-1",children:s.jsx(u,{placeholder:"例如：https://beian.miit.gov.cn或https://web.gotab.cn",allowClear:!0})}),s.jsx(l,{onClick:()=>{a(t)},type:"text",danger:!0,icon:s.jsx(x,{}),className:"flex-0"})]},e)),s.jsx(d.Item,{children:s.jsx(l,{type:"dashed",onClick:()=>t(),block:!0,icon:s.jsx(f,{}),children:"添加链接"})})]})}),s.jsx(d.Item,{children:s.jsx(l,{type:"primary",htmlType:"submit",children:"提交"})})]})})]})}export{h as default};
