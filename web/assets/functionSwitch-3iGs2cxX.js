import{c as e,F as a,r as l,j as s,a9 as o,w as r,aa as t,B as n,n as c,C as m,e as i,ab as u,H as d,D as f,ac as h,O as b,a0 as x,E as p}from"./main-hAkEm7aJ.js";import{C as _}from"./contentLayout-CSpMQeiH.js";function j(){const j=e.c(31),[g]=a.useForm();let S;j[0]===Symbol.for("react.memo_cache_sentinel")?(S=[],j[0]=S):S=j[0];const[y,w]=l.useState(S);let v;j[1]!==g?(v=function(){m(0,w);const e=i.getState().user.token;u({url:p.getFunctionSwitch,token:e}).then(e=>{e.data&&(e.data?.cardPush||(e.data.cardPush="close"),e.data?.offlineToUse||(e.data.offlineToUse="open"),e.data?.sourceStoreFrom||(e.data.sourceStoreFrom="official"),e.data?.homePageLimit||(e.data.homePageLimit="close"),e.data?.userRegister||(e.data.userRegister="open"),g.setFieldsValue(e.data))}).finally(()=>{d(0,w)})},j[1]=g,j[2]=v):v=j[2];const F=v;let q,N,P;j[3]!==F?(q=()=>{F()},j[3]=F,j[4]=q):q=j[4],j[5]===Symbol.for("react.memo_cache_sentinel")?(N=[],j[5]=N):N=j[5],l.useEffect(q,N),j[6]===Symbol.for("react.memo_cache_sentinel")?(P=function(e){m(1,w);const a=i.getState().user.token;f({url:p.updateFunctionSwitch,token:a,data:e}).finally(()=>{d(1,w)})},j[6]=P):P=j[6];const I=P;let k,B,G,L,T,C,R,U,A,E,M,O,V,D,H,X,z,J,K;return j[7]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsx(h,{type:"warning",description:s.jsxs(s.Fragment,{children:[s.jsx(b,{className:"mr-1"}),"管理员可通过该页面动态决定某配置的可用性，请注意，配置的变更是修改了 siteConfig.js 文件的内容，所以请不要在 web 服务器中缓存它，同时配置变更后页面需刷新才生效，不刷新将继续使用先前配置！"]}),className:"mb-4 p-1 px-3 text-xs font-normal w-full"}),j[7]=k):k=j[7],j[8]===Symbol.for("react.memo_cache_sentinel")?(B={cardPush:"close",offlineToUse:"open",sourceStoreFrom:"official",homePageLimit:"close",userRegister:"open"},j[8]=B):B=j[8],j[9]===Symbol.for("react.memo_cache_sentinel")?(G=[{required:!0,message:"请选择配置项的状态"}],j[9]=G):G=j[9],j[10]===Symbol.for("react.memo_cache_sentinel")?(L=s.jsx(a.Item,{name:"cardPush",label:"添加卡片时推送至资源库",required:!0,rules:G,children:s.jsx(o.Group,{options:[{label:"开启且默认推送",value:"open"},{label:"开启但不默认推送",value:"openNotPush"},{label:"关闭",value:"close"}]})}),j[10]=L):L=j[10],j[11]===Symbol.for("react.memo_cache_sentinel")?(T=[{required:!0,message:"请选择主页默认数据策略"}],j[11]=T):T=j[11],j[12]===Symbol.for("react.memo_cache_sentinel")?(C=s.jsx(a.Item,{name:"offlineToUse",label:"主页默认数据策略",required:!0,rules:T,children:s.jsx(o.Group,{options:[{label:"初始化一次后，被持久缓存（离线使用）",value:"open"},{label:"跟随管理员账户配置，持续获取最新默认数据",value:"close"}]})}),j[12]=C):C=j[12],j[13]===Symbol.for("react.memo_cache_sentinel")?(R=[{required:!0,message:"请选择资源库的数据来源"}],j[13]=R):R=j[13],j[14]===Symbol.for("react.memo_cache_sentinel")?(U=s.jsx(a.Item,{name:"sourceStoreFrom",label:"资源库数据来源",required:!0,rules:R,children:s.jsx(o.Group,{options:[{label:"GOTAB 官方资源库",value:"official"},{label:"本站自有资源库",value:"self"}]})}),j[14]=U):U=j[14],j[15]===Symbol.for("react.memo_cache_sentinel")?(A=[{required:!0,message:"请选择主页访问限制策略"}],j[15]=A):A=j[15],j[16]===Symbol.for("react.memo_cache_sentinel")?(E=s.jsx(a.Item,{name:"homePageLimit",label:"主页访问限制策略",required:!0,rules:A,children:s.jsx(o.Group,{options:[{label:"需登录后访问（将不支持离线使用）",value:"useLogin"},{label:"关闭",value:"close"}]})}),j[16]=E):E=j[16],j[17]===Symbol.for("react.memo_cache_sentinel")?(M=[{required:!0}],j[17]=M):M=j[17],j[18]===Symbol.for("react.memo_cache_sentinel")?(O=s.jsx(a.Item,{name:"userRegister",label:"用户注册服务",required:!0,rules:M,children:s.jsx(o.Group,{options:[{label:"启用（需配置邮件服务）",value:"open"},{label:"关闭",value:"close"}]})}),V=s.jsx(x,{}),j[18]=O,j[19]=V):(O=j[18],V=j[19]),j[20]===Symbol.for("react.memo_cache_sentinel")?(D=s.jsx(a.Item,{name:"loginBackground",label:"登录页背景设置",children:s.jsx(r,{allowClear:!0,placeholder:"登录页背景，支持视频、图片链接，或者颜色值、渐变颜色，可以在主题壁纸中上传资源后，复制路径到此"})}),j[20]=D):D=j[20],j[21]===Symbol.for("react.memo_cache_sentinel")?(H=s.jsx(a.Item,{name:"loginBackgroundBrightness",label:"登录页背景亮度",children:s.jsx(t,{min:0,max:100,placeholder:"亮度",stringMode:!0,className:"max-w-[100px]",addonAfter:"%"})}),j[21]=H):H=j[21],j[22]===Symbol.for("react.memo_cache_sentinel")?(X=s.jsx(a.Item,{name:"loginBackgroundBlur",label:"登录页背景模糊度",children:s.jsx(t,{min:0,max:100,placeholder:"模糊",stringMode:!0,className:"max-w-[100px]",addonAfter:"px"})}),j[22]=X):X=j[22],j[23]!==y[1]?(z=s.jsx("div",{className:"w-full flex justify-center",children:s.jsx(n,{htmlType:"submit",type:"primary",className:"w-full max-w-64",loading:y[1],children:"保存配置"})}),j[23]=y[1],j[24]=z):z=j[24],j[25]!==g||j[26]!==z?(J=s.jsxs(a,{onFinish:I,form:g,className:"px-3 w-full",initialValues:B,children:[L,C,U,E,O,V,D,H,X,z]}),j[25]=g,j[26]=z,j[27]=J):J=j[27],j[28]!==y[0]||j[29]!==J?(K=s.jsxs(_,{children:[k,s.jsx("div",{className:"w-full",children:s.jsx(c,{spinning:y[0],children:J})})]}),j[28]=y[0],j[29]=J,j[30]=K):K=j[30],K}export{j as default};
