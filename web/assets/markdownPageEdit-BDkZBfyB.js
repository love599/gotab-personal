import{c as e,r as t,j as n,h as a,B as o,l as s,W as l,o as r,v as c,n as u,q as i}from"./requestIdleCallbackPolyfill-CVD_37F6.js";import{E as m}from"./index-DIYteLsW.js";import f from"./markdownContent-B6xMy0tb.js";import{C as d}from"./contentLayout-BITNm175.js";import{S as p}from"./index-YbJW_cQ-.js";import{S as b}from"./index-Ds8dCkvV.js";function x(){const a=e.c(3),[o,s]=t.useState("aboutUs");let l,r;return a[0]===Symbol.for("react.memo_cache_sentinel")?(l=n.jsx(p,{options:[{label:"关于我们",value:"aboutUs"},{label:"捐赠打赏",value:"donate"}],onChange:e=>{s(e)},className:"mb-3"}),a[0]=l):l=a[0],a[1]!==o?(r=n.jsxs(d,{children:[l,n.jsx(h,{type:o})]}),a[1]=o,a[2]=r):r=a[2],r}const h=f=>{const d=e.c(29),{type:p}=f,[x,h]=t.useState("");let y;d[0]===Symbol.for("react.memo_cache_sentinel")?(y=[],d[0]=y):y=d[0];const[C,S]=t.useState(y),U=a(j);let _;d[1]===Symbol.for("react.memo_cache_sentinel")?(_=new AbortController,d[1]=_):_=d[1];const w=t.useRef(_);let k;d[2]!==U||d[3]!==p?(k=function(){w.current.abort(),w.current=new AbortController,s(0,S),l({url:"aboutUs"===p?r.getAboutUsContent:r.getDonateContent,token:U,signal:w.current.signal}).then(e=>{200===e.code&&("aboutUs"===p?h(e.data.aboutUs):"donate"===p&&h(e.data.donate))}).finally(()=>{c(0,S)})},d[2]=U,d[3]=p,d[4]=k):k=d[4];const v=k;let N,A,I;d[5]!==v?(N=()=>{v()},d[5]=v,d[6]=N):N=d[6],d[7]!==p?(A=[p],d[7]=p,d[8]=A):A=d[8],t.useEffect(N,A),d[9]!==U?(I=function(e){return new Promise(t=>{u({url:r.uploadImage,token:U,data:i({file:e})}).then(e=>{200===e.code&&e.data&&t(e.data.image_url)})})},d[9]=U,d[10]=I):I=d[10];const q=I;let D;d[11]!==x||d[12]!==U||d[13]!==p?(D=function(){s(1,S),u({url:"aboutUs"===p?r.updateAboutUsContent:r.updateDonateContent,token:U,data:{content:x}}).finally(()=>{c(1,S)})},d[11]=x,d[12]=U,d[13]=p,d[14]=D):D=d[14];const E=D;let L,P,z,B,H,M;return d[15]===Symbol.for("react.memo_cache_sentinel")?(L={height:"calc(100% - 44px)"},P=e=>{h(e.text)},d[15]=L,d[16]=P):(L=d[15],P=d[16]),d[17]!==q||d[18]!==x?(z=n.jsx(m,{className:"flex-1",style:L,onChange:P,value:x,renderHTML:g,onImageUpload:q}),d[17]=q,d[18]=x,d[19]=z):z=d[19],d[20]!==C[1]||d[21]!==E?(B=n.jsx("div",{className:"flex justify-end gap-3 flex-wrap mt-3",children:n.jsx(o,{loading:C[1],type:"primary",onClick:E,children:"保存配置"})}),d[20]=C[1],d[21]=E,d[22]=B):B=d[22],d[23]!==B||d[24]!==z?(H=n.jsxs("main",{className:"w-full h-[480px]",children:[z,B]}),d[23]=B,d[24]=z,d[25]=H):H=d[25],d[26]!==C[0]||d[27]!==H?(M=n.jsx(b,{size:"large",spinning:C[0],wrapperClassName:"w-full",children:H}),d[26]=C[0],d[27]=H,d[28]=M):M=d[28],M};function j(e){return e.user.token}function g(e){return n.jsx(f,{content:e,replace:!1})}export{x as default};
