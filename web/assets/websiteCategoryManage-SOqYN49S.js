import{c as e,an as t,F as s,r as a,j as l,w as r,av as i,B as n,aw as o,aa as c,O as m,a0 as d,ap as h,aq as x,E as f,N as j,ax as p,a8 as y,e as u,D as _,C as b,H as g,am as S}from"./main-C5oyJuBL.js";import{r as w}from"./transformData-B561WgkU.js";import{M as C,R as k}from"./myTable-DGct33i0.js";import{C as N}from"./contentLayout-DU6eewpA.js";import{R as F}from"./SortAscendingOutlined-tsPRmM0r.js";import"./MoneyCollectOutlined-r517ZjJd.js";import"./MoneyCollectOutlined-4QlEwa2l.js";import"./index-C0y_yQ21.js";import"./AlipayOutlined-CaUQZesE.js";import"./AlipayOutlined-tZM3mGx9.js";import"./SortAscendingOutlined-8bEGxkuH.js";function v(){const j=e.c(41),{key:p,refresh:y}=t(),[u]=s.useForm();let _;j[0]===Symbol.for("react.memo_cache_sentinel")?(_={},j[0]=_):_=j[0];const[b,g]=a.useState(_);let S,k,F,v;j[1]===Symbol.for("react.memo_cache_sentinel")?(S={title:"分类名称",key:"name",width:160,fixed:"left"},k={title:"排序",key:"sort",width:80,render:T},F={title:"更新时间",key:"updatedTime",width:200,render:O},j[1]=S,j[2]=k,j[3]=F):(S=j[1],k=j[2],F=j[3]),j[4]!==y?(v=[S,k,F,{title:"操作",fixed:"right",width:120,render:(e,t)=>l.jsx(I,{record:t,refresh:y})}],j[4]=y,j[5]=v):v=j[5];const M=v;let W,q,L,R,z,D,K,V,B,E,H,P,U,X,Z,G,J;return j[6]!==u?(W=()=>{const e=u.getFieldsValue();e[Math.random()]=!0,g(w(e))},j[6]=u,j[7]=W):W=j[7],j[8]===Symbol.for("react.memo_cache_sentinel")?(q={gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gridAutoRows:"32px"},j[8]=q):q=j[8],j[9]===Symbol.for("react.memo_cache_sentinel")?(L=l.jsx("div",{className:"gap-3 flex-wrap grid w-full mb-3",style:q,children:l.jsx(s.Item,{name:"name",children:l.jsx(r,{placeholder:"分类名称"})})}),j[9]=L):L=j[9],j[10]!==u?(R=()=>{u.submit()},j[10]=u,j[11]=R):R=j[11],j[12]===Symbol.for("react.memo_cache_sentinel")?(z=l.jsx(i,{}),j[12]=z):z=j[12],j[13]!==R?(D=l.jsx(n,{type:"primary",onClick:R,icon:z,children:"查询"}),j[13]=R,j[14]=D):D=j[14],j[15]!==u?(K=()=>{u.resetFields();const e={};e[Math.random()]=!0,g(e)},j[15]=u,j[16]=K):K=j[16],j[17]===Symbol.for("react.memo_cache_sentinel")?(V=l.jsx(o,{}),j[17]=V):V=j[17],j[18]!==K?(B=l.jsx(n,{onClick:K,icon:V,children:"重置"}),j[18]=K,j[19]=B):B=j[19],j[20]!==D||j[21]!==B?(E=l.jsxs("div",{className:"flex flex-wrap gap-3",children:[D,B]}),j[20]=D,j[21]=B,j[22]=E):E=j[22],j[23]!==u||j[24]!==E||j[25]!==W?(H=l.jsxs(s,{className:"w-full",form:u,onFinish:W,children:[L,E]}),j[23]=u,j[24]=E,j[25]=W,j[26]=H):H=j[26],j[27]===Symbol.for("react.memo_cache_sentinel")?(P=l.jsx(c,{type:"warning",description:l.jsxs(l.Fragment,{children:[l.jsx(m,{className:"mr-1"}),"收录分类在前端获取列表时做了 10 分钟的缓存效果，可能存在数据不及时更新情况，请重启或等待缓存失效"]}),className:"mt-3 p-1 px-3 text-xs font-normal w-full"}),U=l.jsx(d,{className:"my-3"}),j[27]=P,j[28]=U):(P=j[27],U=j[28]),j[29]!==y?(X=l.jsx("div",{className:"mb-3",children:l.jsx(n,{type:"primary",onClick:()=>{h.show(x,{title:"新增分类",children:l.jsx(A,{refresh:y,type:"add"})})},children:"新增分类"})}),j[29]=y,j[30]=X):X=j[30],j[31]!==b?(Z={searchParams:b},j[31]=b,j[32]=Z):Z=j[32],j[33]!==M||j[34]!==p||j[35]!==Z?(G=l.jsx(C,{columns:M,getListUrl:f.getWebsiteCategoryList,dataKey:"data.list",tableKey:p,params:Z}),j[33]=M,j[34]=p,j[35]=Z,j[36]=G):G=j[36],j[37]!==H||j[38]!==X||j[39]!==G?(J=l.jsxs(N,{children:[H,P,U,X,G]}),j[37]=H,j[38]=X,j[39]=G,j[40]=J):J=j[40],J}function O(e,t){return l.jsx(j,{icon:l.jsx(p,{}),children:e||t.createdTime})}function T(e){return l.jsx(j,{color:"gold",icon:l.jsx(F,{}),children:e||"-"})}const A=t=>{const i=e.c(16),{editItem:o,refresh:c,type:m}=t,d=void 0===m?"add":m,[j]=s.useForm(),[p,b]=a.useState(!1);let g;i[0]!==o||i[1]!==c||i[2]!==d?(g=function(e){b(!0);const t=u.getState().user.token;_({url:"add"===d?f.addWebsiteCategory:f.editWebsiteCategory,token:t,data:"add"===d?e:{...e,id:o.id}}).then(e=>{200===e.code&&(h.hide(x),c&&c())}).finally(()=>{b(!1)})},i[0]=o,i[1]=c,i[2]=d,i[3]=g):g=i[3];const S=g;let w,C,k,N;i[4]===Symbol.for("react.memo_cache_sentinel")?(w={flex:"82px"},i[4]=w):w=i[4],i[5]===Symbol.for("react.memo_cache_sentinel")?(C=l.jsx(s.Item,{name:"name",label:"分类名称",required:!0,rules:[{required:!0}],children:l.jsx(r,{placeholder:"分类名称",allowClear:!0})}),i[5]=C):C=i[5],i[6]===Symbol.for("react.memo_cache_sentinel")?(k=l.jsx(s.Item,{name:"sort",label:"排序",children:l.jsx(y,{placeholder:"排序"})}),i[6]=k):k=i[6],i[7]===Symbol.for("react.memo_cache_sentinel")?(N=l.jsx(n,{onClick:M,children:"取消"}),i[7]=N):N=i[7];const F="add"===d?"新增分类":"保存编辑";let v,O;return i[8]!==p||i[9]!==F?(v=l.jsxs("div",{className:"flex justify-end gap-3 flex-wrap",children:[N,l.jsx(n,{type:"primary",htmlType:"submit",loading:p,children:F})]}),i[8]=p,i[9]=F,i[10]=v):v=i[10],i[11]!==o||i[12]!==j||i[13]!==S||i[14]!==v?(O=l.jsx(l.Fragment,{children:l.jsxs(s,{form:j,autoComplete:"off",variant:"filled",initialValues:o,labelCol:w,onFinish:S,children:[C,k,v]})}),i[11]=o,i[12]=j,i[13]=S,i[14]=v,i[15]=O):O=i[15],O},I=a.memo(t=>{const s=e.c(20),{record:r,refresh:i}=t;let o;s[0]===Symbol.for("react.memo_cache_sentinel")?(o=[],s[0]=o):o=s[0];const[c,m]=a.useState(o);let d;s[1]!==r||s[2]!==i?(d=function(){b(1,m);const e=u.getState().user.token;setTimeout(()=>{_({url:f.deleteWebsiteCategory,token:e,data:{id:r.id}}).then(e=>{200===e.code&&i()}).finally(()=>{g(1,m)})},500)},s[1]=r,s[2]=i,s[3]=d):d=s[3];const j=d;let p,y,w,C,N,F,v;return s[4]===Symbol.for("react.memo_cache_sentinel")?(p={width:"44px"},s[4]=p):p=s[4],s[5]!==r||s[6]!==i?(y=l.jsx(n,{type:"link",size:"small",style:p,onClick:()=>{h.show(x,{title:"编辑分类",children:l.jsx(A,{editItem:r,refresh:i,type:"edit"})})},children:"编辑"}),s[5]=r,s[6]=i,s[7]=y):y=s[7],s[8]===Symbol.for("react.memo_cache_sentinel")?(w={width:"44px"},s[8]=w):w=s[8],s[9]!==c[1]?(C=c[1]?l.jsx(k,{}):"删除",s[9]=c[1],s[10]=C):C=s[10],s[11]!==c[1]||s[12]!==C?(N=l.jsx(n,{danger:!0,type:"link",size:"small",disabled:c[1],style:w,children:C}),s[11]=c[1],s[12]=C,s[13]=N):N=s[13],s[14]!==j||s[15]!==N?(F=l.jsx(S,{title:"是否确认删除？",onConfirm:j,children:N}),s[14]=j,s[15]=N,s[16]=F):F=s[16],s[17]!==y||s[18]!==F?(v=l.jsxs("div",{className:"flex flex-wrap",children:[y,F]}),s[17]=y,s[18]=F,s[19]=v):v=s[19],v});function M(){h.hide(x)}export{v as default};
