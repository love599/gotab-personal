import{r as e,I as t,hC as a,c as n,Q as r,h as l,j as s,B as o,l as i,n as c,o as m,E as d,v as u,X as p,a2 as f,u as h,bQ as j,S as x,V as y,m as b,q as g,U as _,d as S,a5 as w,k as v,F as C,a as k,aN as P,cQ as O,cR as N,b4 as I,hD as E,W as T,K as F,er as z,es as A,et as L,eu as D,ev as q,ew as R,ex as U,ey as Z,bX as V,eA as $,eB as M,eC as B,ez as Q,ep as Y}from"./requestIdleCallbackPolyfill-DEU4BPbw.js";import{ba as W,bb as X,o as K,bc as J,q as G,bd as H,M as ee,N as te}from"./myFolderModal-C6gU8hN-.js";import{C as ae,S as ne,W as re}from"./WarningOutlined-85JOXhKh.js";import{T as le}from"./index-CwzsOusG.js";import{f as se,m as oe}from"./assets-B8Bi78Vh.js";import{M as ie}from"./myModal-Dg1f_8Rb.js";import{F as ce}from"./index-9tneyI6F.js";import{I as me}from"./index-RraZpeV0.js";import{a as de}from"./PlusOutlined-DuhuG4nX.js";import{u as ue}from"./useForm-DIX_a_7G.js";import{S as pe}from"./index-4gSYBMW8.js";import{l as fe,R as he,C as je}from"./useFresh-BjlkOah4.js";import{T as xe}from"./index-FChzs3Dd.js";import{n as ye}from"./sortableJsUtils-DdMBrLfa.js";import{R as be}from"./CheckCircleOutlined-B1J7BGrE.js";import{b as ge}from"./useIsSmallScreen-BhJTgmyK.js";import{a as _e}from"./MailOutlined-Bknd_EC8.js";import{R as Se}from"./LogoutOutlined-Ce5TehNR.js";import"./sortable.esm-Bv0j-UjJ.js";import"./iconBase-BR617mp5.js";import"./index-D3qRUNL8.js";import"./index-C673BkHR.js";import"./getAllowClear-BCigCKPi.js";import"./CloudUploadOutlined-dj2yaw2G.js";import"./ColorPicker-D8ohcMWS.js";import"./index-DEv-S1A4.js";import"./Input-Dx5M-rij.js";import"./Overflow-BQO2PO8P.js";import"./index-BiDii_VJ.js";import"./LeftOutlined-D9Sp279J.js";import"./ExportOutlined-eVWteBw-.js";import"./index-DxFe-Rzl.js";import"./ReloadOutlined-B00s2TmV.js";import"./LeftOutlined-bi6eXVBA.js";import"./styleChecker-C1lpHCN-.js";import"./TextArea-BWz4jIx5.js";import"./fullSpin-fN8_UlM1.js";import"./myDrawer2-wnXFRJ55.js";import"./handleButton-BUippp21.js";import"./addRecommendAppForm-DYTRSTW7.js";import"./submitForInclusion-CBaXV0rk.js";import"./SearchOutlined-DIT2oznV.js";import"./UserOutlined-8yGJGlVK.js";import"./QuestionCircleOutlined-DYq9aeCI.js";import"./QuestionCircleOutlined-DSm95oJP.js";import"./useBreakpoint-CMTnf1Wp.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./row-CzejJH_c.js";import"./CheckCircleOutlined-CY3_0FRk.js";import"./LogoutOutlined-C0AkGQqz.js";function we(){return we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},we.apply(this,arguments)}const ve=(a,n)=>e.createElement(t,we({},a,{ref:n,icon:ae})),Ce=e.forwardRef(ve);function ke(){return ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},ke.apply(this,arguments)}const Pe=(n,r)=>e.createElement(t,ke({},n,{ref:r,icon:a})),Oe=e.forwardRef(Pe);function Ne(){return Ne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ne.apply(this,arguments)}const Ie=(a,n)=>e.createElement(t,Ne({},a,{ref:n,icon:ne})),Ee=e.forwardRef(Ie);function Te(){return Te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Te.apply(this,arguments)}const Fe=(a,n)=>e.createElement(t,Te({},a,{ref:n,icon:re})),ze=e.forwardRef(Fe);function Ae(e){return e.user.token}const Le=e.memo(function(){const t=n.c(21),{getDefaultData:a}=r();let h;t[0]===Symbol.for("react.memo_cache_sentinel")?(h=[],t[0]=h):h=t[0];const[j,x]=e.useState(h),y=l(Ae);let b;t[1]!==y?(b=function(){i(0,x),c({url:m.setDefaultData,token:y,data:{data:d()}}).finally(()=>{u(0,x)})},t[1]=y,t[2]=b):b=t[2];const g=b;let _,S,w,v,C,k,P,O,N;return t[3]===Symbol.for("react.memo_cache_sentinel")?(_=s.jsx(p,{message:"当前正处于编辑默认主页状态，保存的内容将替换用户首次进入网站时页面初始化的数据",banner:!0}),t[3]=_):_=t[3],t[4]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsx(Ee,{}),t[4]=S):S=t[4],t[5]!==j[0]?(w=s.jsx(o,{type:"primary",icon:S,loading:j[0],children:"保存默认配置"}),t[5]=j[0],t[6]=w):w=t[6],t[7]!==g||t[8]!==w?(v=s.jsx(f,{title:"是否确认保存？",onConfirm:g,children:w}),t[7]=g,t[8]=w,t[9]=v):v=t[9],t[10]!==a?(C=()=>{a(1,x)},t[10]=a,t[11]=C):C=t[11],t[12]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsx(Oe,{}),t[12]=k):k=t[12],t[13]!==j[1]?(P=s.jsx(o,{loading:j[1],icon:k,children:"获取默认配置"}),t[13]=j[1],t[14]=P):P=t[14],t[15]!==C||t[16]!==P?(O=s.jsx(f,{title:"是否确认获取？",onConfirm:C,children:P}),t[15]=C,t[16]=P,t[17]=O):O=t[17],t[18]!==v||t[19]!==O?(N=s.jsxs("main",{className:"flex flex-col gap-3 *:border *:p-3",children:[_,v,O]}),t[18]=v,t[19]=O,t[20]=N):N=t[20],N});function De(){x.hide(y)}function qe(e){return e.user.userInfo}function Re(e){return e.user.token}const Ue=e.memo(function(){const t=n.c(17),a=h(),[r,i]=e.useState(!1),d=l(Re),u=l(qe);let f;t[0]!==a||t[1]!==d?(f=function(e){i(!0),c({url:m.submitAppellation,token:d,data:e}).then(e=>{200===e.code&&e.data&&(a(j(e.data)),x.hide(y))}).finally(()=>{i(!1)})},t[0]=a,t[1]=d,t[2]=f):f=t[2];const b=f;let g,_,S,w,v,C,k;return t[3]===Symbol.for("react.memo_cache_sentinel")?(g=s.jsx(p,{message:s.jsx("p",{children:"称号是用户的一个额外信息，申请通过即可开启 VIP 标识！"}),className:"mb-3 py-1 px-3 text-xs font-medium",type:"warning"}),t[3]=g):g=t[3],t[4]!==u?(_=[{validator:(e,t)=>t&&""!==t?t.length>8?Promise.reject("称号名称不能超过8个字符"):t===u.appellation?Promise.reject("称号名称不能与当前称号相同"):Promise.resolve():Promise.reject("请输入称号名称")}],t[4]=u,t[5]=_):_=t[5],t[6]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsx(me,{placeholder:"称号名称",maxLength:8,allowClear:!0,showCount:!0}),t[6]=S):S=t[6],t[7]!==_?(w=s.jsx(ce.Item,{label:"称号名称",required:!0,rules:_,name:"appellation",children:S}),t[7]=_,t[8]=w):w=t[8],t[9]===Symbol.for("react.memo_cache_sentinel")?(v=s.jsx(o,{onClick:De,children:"取消"}),t[9]=v):v=t[9],t[10]!==r?(C=s.jsxs("div",{className:"flex justify-end gap-3 flex-wrap items-center",children:[v,s.jsx(o,{type:"primary",htmlType:"submit",loading:r,children:"提交申请"})]}),t[10]=r,t[11]=C):C=t[11],t[12]!==b||t[13]!==w||t[14]!==C||t[15]!==u?(k=s.jsxs(s.Fragment,{children:[g,s.jsxs(ce,{initialValues:u,onFinish:b,children:[w,C]})]}),t[12]=b,t[13]=w,t[14]=C,t[15]=u,t[16]=k):k=t[16],k});function Ze(){x.hide(y)}function Ve(){x.hide(y)}function $e(){x.hide(y)}function Me(e,t){const a=new FileReader;let n=!1;const r=()=>{n||t(a.result)};a.addEventListener("loadend",r),a.readAsDataURL(e);return()=>{n=!0,a.removeEventListener("loadend",r),a.abort()}}function Be(e){return e.user.userInfo}function Qe(e){return e.user.token}const Ye=e.memo(function(){const t=n.c(31),a=h(),r=l(Qe),d=l(Be);let p;t[0]===Symbol.for("react.memo_cache_sentinel")?(p=[],t[0]=p):p=t[0];const[f,x]=e.useState(p),[y,S]=e.useState(),[w,v]=e.useState(null),[C,k]=e.useState(null);let P,O;t[1]!==C?(P=()=>()=>{C&&C()},O=[C],t[1]=C,t[2]=P,t[3]=O):(P=t[2],O=t[3]),e.useEffect(P,O);const N=Me;let I;t[4]!==a||t[5]!==r?(I=()=>{i(0,x),c({url:m.resetAvatar,token:r}).then(e=>{200===e.code&&e.data&&(a(j(e.data)),setTimeout($e,0))}).finally(()=>{u(0,x)})},t[4]=a,t[5]=r,t[6]=I):I=t[6];const E=I;let T;t[7]!==a||t[8]!==w||t[9]!==r||t[10]!==d?(T=()=>{w?(i(1,x),c({url:m.uploadAvatar,data:g({file:w}),token:r}).then(e=>{if(200===e.code&&e.data){const t={...d,avatar:e.data.avatar_url};a(j(t)),setTimeout(Ve,0)}}).finally(()=>{u(1,x)})):b.error("请先选择一个图片")},t[7]=a,t[8]=w,t[9]=r,t[10]=d,t[11]=T):T=t[11];const F=T;let z,A,L,D,q,R,U,Z,V;return t[12]!==C?(z=()=>()=>{C&&C()},A=[C],t[12]=C,t[13]=z,t[14]=A):(z=t[13],A=t[14]),e.useEffect(z,A),t[15]===Symbol.for("react.memo_cache_sentinel")?(L=e=>{if(e.size>512e3)return b.error("头像大小不能超过500KB！"),!1;const t=N(e,t=>{S(t),v(e)});return k(()=>t),!1},t[15]=L):L=t[15],t[16]!==y?(D=s.jsx(W,{quality:.1,modalTitle:"裁剪图片",modalOk:"确定",modalCancel:"取消",children:s.jsx(_,{maxCount:1,accept:".png, .jpeg, .jpg",name:"avatar",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,beforeUpload:L,children:y?s.jsx("img",{src:y,alt:"avatar",style:{width:"100%"}}):s.jsxs("button",{style:{border:0,background:"none"},type:"button",children:[s.jsx(de,{}),s.jsx("div",{style:{marginTop:8},children:"上传头像"})]})})}),t[16]=y,t[17]=D):D=t[17],t[18]===Symbol.for("react.memo_cache_sentinel")?(q=s.jsx(o,{onClick:Ze,children:"取消"}),t[18]=q):q=t[18],t[19]!==f[0]||t[20]!==E?(R=s.jsx(o,{loading:f[0],onClick:E,children:"恢复默认"}),t[19]=f[0],t[20]=E,t[21]=R):R=t[21],t[22]!==f[1]||t[23]!==F?(U=s.jsx(o,{type:"primary",onClick:F,loading:f[1],children:"保存头像"}),t[22]=f[1],t[23]=F,t[24]=U):U=t[24],t[25]!==R||t[26]!==U?(Z=s.jsxs("div",{className:"flex flex-wrap gap-3 justify-end mt-3",children:[q,R,U]}),t[25]=R,t[26]=U,t[27]=Z):Z=t[27],t[28]!==Z||t[29]!==D?(V=s.jsxs(s.Fragment,{children:[D,Z]}),t[28]=Z,t[29]=D,t[30]=V):V=t[30],V});function We(){x.hide(y)}function Xe(e,t){if(!t)return Promise.reject(new Error("请输入密码"));return/^[a-zA-Z0-9_\-!@#$%^&*()+={}[\]:;"'<>.,?/~`|]+$/.test(t)?t.length<6||t.length>32?Promise.reject(new Error("密码长度必须在6到32位之间")):Promise.resolve():Promise.reject(new Error("密码只能包含字母、数字、下划线、短横线以及其他常用特殊字符"))}function Ke(e){200===e.code&&x.hide(y)}function Je(e){return e.user.token}const Ge=e.memo(function(){const t=n.c(19),[a]=ue();let r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r=[],t[0]=r):r=t[0];const[d,p]=e.useState(r),f=l(Je);let h;t[1]!==f?(h=function(e){i(0,p),c({url:m.changePassword,data:e,token:f}).then(Ke).finally(()=>{u(0,p)})},t[1]=f,t[2]=h):h=t[2];const j=h,x=Xe;let y,b,g,_,S,w,v,C,k;return t[3]===Symbol.for("react.memo_cache_sentinel")?(y={flex:"82px"},t[3]=y):y=t[3],t[4]===Symbol.for("react.memo_cache_sentinel")?(b=s.jsx(ce.Item,{label:"原密码",required:!0,name:"oldPassword",rules:[{validator:x}],children:s.jsx(me.Password,{autoComplete:"new-password",placeholder:"原密码",maxLength:32,allowClear:!0})}),t[4]=b):b=t[4],t[5]===Symbol.for("react.memo_cache_sentinel")?(g=s.jsx(ce.Item,{label:"新密码",required:!0,name:"newPassword",rules:[{validator:x}],children:s.jsx(me.Password,{autoComplete:"new-password",placeholder:"新密码",maxLength:32,allowClear:!0})}),t[5]=g):g=t[5],t[6]!==a?(_=[{validator(e,t){if(""===t||!t)return Promise.reject(new Error("请再次输入密码"));return t!==a.getFieldValue("newPassword")?Promise.reject(new Error("两次输入的密码不一致")):Promise.resolve()}}],t[6]=a,t[7]=_):_=t[7],t[8]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsx(me.Password,{autoComplete:"new-password",placeholder:"重新输入新密码",maxLength:32,allowClear:!0}),t[8]=S):S=t[8],t[9]!==_?(w=s.jsx(ce.Item,{label:"确认密码",required:!0,name:"confirmPassword",rules:_,children:S}),t[9]=_,t[10]=w):w=t[10],t[11]===Symbol.for("react.memo_cache_sentinel")?(v=s.jsx(o,{onClick:We,children:"取消"}),t[11]=v):v=t[11],t[12]!==d[0]?(C=s.jsxs("div",{className:"flex flex-wrap justify-end gap-3",children:[v,s.jsx(o,{type:"primary",htmlType:"submit",loading:d[0],children:"确定"})]}),t[12]=d[0],t[13]=C):C=t[13],t[14]!==j||t[15]!==a||t[16]!==w||t[17]!==C?(k=s.jsx(s.Fragment,{children:s.jsxs(ce,{form:a,autoComplete:"off",name:"edit-user-form",onFinish:j,labelCol:y,children:[b,g,w,C]})}),t[14]=j,t[15]=a,t[16]=w,t[17]=C,t[18]=k):k=t[18],k});function He(){x.hide(y)}function et(e,t){return t&&t.length>20&&t.length>20?Promise.reject(new Error("昵称长度不能超过20个字符")):Promise.resolve()}function tt(e){return e.user.userInfo}function at(e){return e.user.token}const nt=e.memo(function(t){const a=n.c(23),{initialValues:r}=t,d=h();let p;a[0]===Symbol.for("react.memo_cache_sentinel")?(p=[],a[0]=p):p=a[0];const[f,b]=e.useState(p),g=l(at),_=l(tt);let v;a[1]!==d||a[2]!==g||a[3]!==_?(v=function(e){i(0,b),""!==e.birthday&&e.birthday||delete e.birthday,c({url:m.editUserInfo,data:e,token:g}).then(e=>{200===e.code&&e.data&&(w(e.data,_)||d(j(e.data)),x.hide(y))}).finally(()=>{u(0,b)})},a[1]=d,a[2]=g,a[3]=_,a[4]=v):v=a[4];const C=v;let k,P,O,N,I,E,T,F,z,A,L;return a[5]!==r.birthday?(k=r.birthday&&S(r.birthday,"YYYY-MM-DD"),a[5]=r.birthday,a[6]=k):k=a[6],a[7]!==r||a[8]!==k?(P={...r,birthday:k},a[7]=r,a[8]=k,a[9]=P):P=a[9],a[10]===Symbol.for("react.memo_cache_sentinel")?(O={flex:"72px"},a[10]=O):O=a[10],a[11]===Symbol.for("react.memo_cache_sentinel")?(N=s.jsx(ce.Item,{name:"username",label:"用户名",required:!0,rules:[{validator:(e,t)=>""!==t&&t?/^[a-zA-Z]/.test(t)?/^[a-zA-Z][a-zA-Z0-9_-]*$/.test(t)?t.length<3||t.length>20?Promise.reject(new Error("用户名长度必须在3到20位之间")):Promise.resolve():Promise.reject(new Error("用户名只能包含字母、数字、下划线或短横线")):Promise.reject(new Error("用户名必须以字母开头")):Promise.reject(new Error("请输入用户名"))}],children:s.jsx(me,{placeholder:"用户名",allowClear:!0,maxLength:20})}),a[11]=N):N=a[11],a[12]===Symbol.for("react.memo_cache_sentinel")?(I=s.jsx(ce.Item,{name:"nickname",label:"昵称",rules:[{validator:et}],children:s.jsx(me,{placeholder:"昵称",maxLength:20,showCount:!0,allowClear:!0})}),a[12]=I):I=a[12],a[13]===Symbol.for("react.memo_cache_sentinel")?(E=s.jsx(ce.Item,{name:"sex",label:"性别",required:!0,children:s.jsx(pe,{placeholder:"性别",options:[{label:"男",value:0},{label:"女",value:1}]})}),a[13]=E):E=a[13],a[14]===Symbol.for("react.memo_cache_sentinel")?(T=s.jsx(ce.Item,{name:"phone",label:"手机号",rules:[{validator(e,t){if(""===t||!t)return Promise.resolve();return/^1[3-9]\d{9}$/.test(t)?Promise.resolve():Promise.reject(new Error("请输入正确的手机号码"))}}],children:s.jsx(me,{placeholder:"手机号",maxLength:11,allowClear:!0})}),a[14]=T):T=a[14],a[15]===Symbol.for("react.memo_cache_sentinel")?(F=s.jsx(ce.Item,{name:"birthday",label:"生日",children:s.jsx(X,{placeholder:"生日",allowClear:!0})}),a[15]=F):F=a[15],a[16]===Symbol.for("react.memo_cache_sentinel")?(z=s.jsx(o,{onClick:He,children:"取消"}),a[16]=z):z=a[16],a[17]!==f[0]?(A=s.jsxs("div",{className:"flex flex-wrap justify-end gap-3",children:[z,s.jsx(o,{type:"primary",htmlType:"submit",loading:f[0],children:"确定"})]}),a[17]=f[0],a[18]=A):A=a[18],a[19]!==C||a[20]!==A||a[21]!==P?(L=s.jsx(s.Fragment,{children:s.jsxs(ce,{autoComplete:"off",initialValues:P,name:"edit-user-form",onFinish:C,labelCol:O,children:[N,I,E,T,F,A]})}),a[19]=C,a[20]=A,a[21]=P,a[22]=L):L=a[22],L});function rt(){x.hide(y)}function lt(e,t){return t?/^\d{1,6}$/.test(t)?Promise.resolve():Promise.reject(new Error("验证码只能包含数字")):Promise.reject(new Error("请输入验证码"))}function st(e){return e?.replace(/\D/g,"")}function ot(e){return e.user.userInfo}function it(e){return e.user.token}const ct=e.memo(function(){const t=n.c(22),a=h(),[r]=ue();let d;t[0]===Symbol.for("react.memo_cache_sentinel")?(d=[],t[0]=d):d=t[0];const[p,f]=e.useState(d),g=l(it),_=l(ot);let S;t[1]!==r?(S=function(){const e=r.getFieldValue("email");e&&""!==e?/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e)?(i(0,f),c({url:m.emailCode,data:{email:e}}).finally(()=>{u(0,f)})):b.error("请输入有效的邮箱地址"):b.error("请输入邮箱")},t[1]=r,t[2]=S):S=t[2];const v=S;let C;t[3]!==a||t[4]!==g||t[5]!==_?(C=function(e){i(1,f),c({url:m.bindEmail,data:e,token:g}).then(e=>{200===e.code&&e.data&&(w(e.data,_)||a(j(e.data)),x.hide(y))}).finally(()=>{u(1,f)})},t[3]=a,t[4]=g,t[5]=_,t[6]=C):C=t[6];const k=C;let P,O,N,I,E,T,F,z;return t[7]===Symbol.for("react.memo_cache_sentinel")?(P={flex:"72px"},t[7]=P):P=t[7],t[8]===Symbol.for("react.memo_cache_sentinel")?(O=s.jsx(ce.Item,{name:"email",required:!0,className:"flex-auto",label:"新邮箱",rules:[{validator:(e,t)=>t?/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t)?Promise.resolve():Promise.reject(new Error("请输入有效的邮箱地址")):Promise.reject(new Error("请输入邮箱"))}],children:s.jsx(me,{placeholder:"邮箱",allowClear:!0,maxLength:255})}),t[8]=O):O=t[8],t[9]!==v||t[10]!==p[0]?(N=s.jsxs("div",{className:"flex gap-3 items-end",children:[O,s.jsx(o,{onClick:v,loading:p[0],className:"mb-6",children:"获取验证码"})]}),t[9]=v,t[10]=p[0],t[11]=N):N=t[11],t[12]===Symbol.for("react.memo_cache_sentinel")?(I=[{validator:lt}],t[12]=I):I=t[12],t[13]===Symbol.for("react.memo_cache_sentinel")?(E=s.jsx(ce.Item,{name:"emailCode",required:!0,label:"验证码",normalize:st,rules:I,children:s.jsx(me,{autoComplete:"new-password",style:{width:"100%"},placeholder:"验证码",allowClear:!0,maxLength:6})}),t[13]=E):E=t[13],t[14]===Symbol.for("react.memo_cache_sentinel")?(T=s.jsx(o,{onClick:rt,children:"取消"}),t[14]=T):T=t[14],t[15]!==p[1]?(F=s.jsxs("div",{className:"flex flex-wrap justify-end gap-3",children:[T,s.jsx(o,{type:"primary",htmlType:"submit",loading:p[1],children:"确定"})]}),t[15]=p[1],t[16]=F):F=t[16],t[17]!==k||t[18]!==r||t[19]!==N||t[20]!==F?(z=s.jsx(s.Fragment,{children:s.jsxs(ce,{form:r,onFinish:k,name:"user-email-form",labelCol:P,autoComplete:"off",children:[N,E,F]})}),t[17]=k,t[18]=r,t[19]=N,t[20]=F,t[21]=z):z=t[21],z});function mt(){x.show(y,{title:"注销账户",children:s.jsx(yt,{})})}function dt(){x.show(y,{title:"退出登录",children:s.jsx(xt,{})})}function ut(){x.show(y,{title:"修改密码",children:s.jsx(Ge,{})})}function pt(){b.success("数据合并完成")}function ft(){x.show(y,{title:"头像设置",children:s.jsx(Ye,{})})}function ht(e){return e.user.userInfo}const jt=e.memo(function(){const t=n.c(97),{pullData:a,pushData:i,getDefaultDataClear:c}=r(),m=l(ht);let d;t[0]===Symbol.for("react.memo_cache_sentinel")?(d=[],t[0]=d):d=t[0];const[u,p]=e.useState(d);let h;t[1]!==m.email?(h=function(){x.show(y,{title:`绑定邮箱（原邮箱：${m.email||"无"}）`,children:s.jsx(ct,{})})},t[1]=m.email,t[2]=h):h=t[2];const j=h;let g,_,S,w,k,P,O,N;t[3]!==m.avatar||t[4]!==m.sex?(g=m?.avatar?v(m.avatar):1===m?.sex?se:oe,t[3]=m.avatar,t[4]=m.sex,t[5]=g):g=t[5],t[6]!==g?(_=s.jsx("div",{className:"p-[2px] border-dashed border rounded-full hover:border-blue-400 cursor-pointer transition-main",onClick:ft,children:s.jsx(G,{size:72,src:g})}),t[6]=g,t[7]=_):_=t[7],t[8]!==m.appellation||t[9]!==m.appellationStatus?(S=m.appellation&&1===m.appellationStatus?s.jsx(K,{}):s.jsx(fe,{}),t[8]=m.appellation,t[9]=m.appellationStatus,t[10]=S):S=t[10],t[11]!==m.appellation||t[12]!==m.appellationStatus||t[13]!==m.userType?(w=m.appellation&&1===m.appellationStatus?"volcano":J.find(e=>e.userType===m.userType)?.color,t[11]=m.appellation,t[12]=m.appellationStatus,t[13]=m.userType,t[14]=w):w=t[14],t[15]!==m.appellation||t[16]!==m.appellationStatus||t[17]!==m.userType?(k=m.appellation&&1===m.appellationStatus?m.appellation:J.find(e=>e.userType===m.userType)?.text,t[15]=m.appellation,t[16]=m.appellationStatus,t[17]=m.userType,t[18]=k):k=t[18],t[19]!==S||t[20]!==w||t[21]!==k?(P=s.jsx(xe,{icon:S,className:"m-0 flex items-center gap-1",color:w,children:k}),t[19]=S,t[20]=w,t[21]=k,t[22]=P):P=t[22],t[23]!==_||t[24]!==P?(O=s.jsxs("div",{className:"flex flex-col items-center m-3 gap-3",children:[_,P]}),t[23]=_,t[24]=P,t[25]=O):O=t[25],t[26]===Symbol.for("react.memo_cache_sentinel")?(N={label:{padding:"8px 16px"},content:{padding:"8px 16px",textAlign:"end"}},t[26]=N):N=t[26];const I=m.username||"-";let E;t[27]!==I?(E={label:"用户名",children:I},t[27]=I,t[28]=E):E=t[28];const T=m.nickname||"-";let F;t[29]!==T?(F={label:"昵称",children:T},t[29]=T,t[30]=F):F=t[30];const z=1===m.sex?"女":"男";let A,L,D;t[31]!==z?(A={label:"性别",children:z},t[31]=z,t[32]=A):A=t[32],t[33]!==j||t[34]!==m.email?(L=m.email||s.jsx(o,{type:"link",size:"small",className:"p-0",onClick:j,children:"绑定"}),t[33]=j,t[34]=m.email,t[35]=L):L=t[35],t[36]!==L?(D={label:"邮箱",children:L},t[36]=L,t[37]=D):D=t[37];const q=m.phone||"-";let R;t[38]!==q?(R={label:"手机号",children:q},t[38]=q,t[39]=R):R=t[39];const U=m.birthday||"-";let Z;t[40]!==U?(Z={label:"生日",children:U},t[40]=U,t[41]=Z):Z=t[41];const V=m.registerTime||"-";let $,M,B,Q,Y,W,X,ee,te,ae,ne,re,ie;t[42]!==V?($={label:"注册时间",children:V},t[42]=V,t[43]=$):$=t[43],t[44]!==i?(M=()=>{"1"===localStorage.getItem("focusPulling")?b.warning("数据自动同步中，请稍后再试"):i(0,p)},t[44]=i,t[45]=M):M=t[45],t[46]!==u[0]||t[47]!==M?(B=s.jsx(o,{type:"link",size:"small",onClick:M,loading:u[0],children:"上传"}),t[46]=u[0],t[47]=M,t[48]=B):B=t[48],t[49]===Symbol.for("react.memo_cache_sentinel")?(Q=s.jsx(C,{type:"vertical"}),t[49]=Q):Q=t[49],t[50]!==a?(Y=()=>{"1"===localStorage.getItem("focusPulling")?b.warning("数据自动同步中，请稍后再试"):a(1,p,void 0,!0)},t[50]=a,t[51]=Y):Y=t[51],t[52]!==u[1]||t[53]!==Y?(W=s.jsx(o,{type:"link",size:"small",onClick:Y,loading:u[1],children:"拉取"}),t[52]=u[1],t[53]=Y,t[54]=W):W=t[54],t[55]!==B||t[56]!==W?(X={label:"数据管理",children:s.jsxs("div",{className:"flex justify-end flex-wrap *:p-0 items-center",children:[B,Q,W]})},t[55]=B,t[56]=W,t[57]=X):X=t[57],t[58]!==c?(ee=()=>{c(void 0,void 0,pt,!0)},t[58]=c,t[59]=ee):ee=t[59],t[60]===Symbol.for("react.memo_cache_sentinel")?(te=s.jsx(o,{type:"link",size:"small",className:"p-0",children:"合并数据"}),t[60]=te):te=t[60],t[61]!==ee?(ae={label:"初始数据",children:s.jsx(s.Fragment,{children:s.jsx(f,{title:"将与本地数据差异化合并",onConfirm:ee,children:te})})},t[61]=ee,t[62]=ae):ae=t[62],t[63]!==E||t[64]!==F||t[65]!==A||t[66]!==D||t[67]!==R||t[68]!==Z||t[69]!==$||t[70]!==X||t[71]!==ae?(ne=s.jsx(ye,{bordered:!0,column:1,className:"w-full mt-6",styles:N,items:[E,F,A,D,R,Z,$,X,ae]}),t[63]=E,t[64]=F,t[65]=A,t[66]=D,t[67]=R,t[68]=Z,t[69]=$,t[70]=X,t[71]=ae,t[72]=ne):ne=t[72],t[73]===Symbol.for("react.memo_cache_sentinel")?(re=s.jsx(le,{}),t[73]=re):re=t[73],t[74]!==m.appellation||t[75]!==m.appellationStatus?(ie=()=>{x.show(y,{title:s.jsxs("div",{className:"flex items-center gap-2",children:[m.appellation&&1===m.appellationStatus?"变更称号":"申请称号",s.jsxs(xe,{color:0===m.appellationStatus?"":1===m.appellationStatus?"green":"red",icon:0===m.appellationStatus?s.jsx(he,{}):1===m.appellationStatus?s.jsx(be,{}):s.jsx(Ce,{}),children:["称号状态：",0===m.appellationStatus?m.appellation?"申请中":"待申请":1===m.appellationStatus?"已荣获":"被拒绝"]})]}),children:s.jsx(Ue,{})})},t[74]=m.appellation,t[75]=m.appellationStatus,t[76]=ie):ie=t[76];const ce=0===m.appellationStatus?m.appellation?"称号管理":"申请称号":1===m.appellationStatus?"变更称号":"重新申请";let me,de,ue,pe,je,we,ve,ke,Pe,Oe;return t[77]!==ie||t[78]!==ce?(me=s.jsx(o,{icon:re,onClick:ie,children:ce}),t[77]=ie,t[78]=ce,t[79]=me):me=t[79],t[80]===Symbol.for("react.memo_cache_sentinel")?(de=s.jsx(ge,{}),t[80]=de):de=t[80],t[81]!==m?(ue=s.jsx(o,{icon:de,onClick:()=>{x.show(y,{title:"更新资料",children:s.jsx(nt,{initialValues:m})})},children:"更新资料"}),t[81]=m,t[82]=ue):ue=t[82],t[83]===Symbol.for("react.memo_cache_sentinel")?(pe=s.jsx(o,{icon:s.jsx(H,{}),onClick:ut,children:"修改密码"}),t[83]=pe):pe=t[83],t[84]===Symbol.for("react.memo_cache_sentinel")?(je=s.jsx(_e,{}),t[84]=je):je=t[84],t[85]!==j?(we=s.jsx(o,{icon:je,onClick:j,children:"绑定邮箱"}),t[85]=j,t[86]=we):we=t[86],t[87]===Symbol.for("react.memo_cache_sentinel")?(ve=s.jsx(o,{icon:s.jsx(Se,{}),danger:!0,onClick:dt,children:"退出登录"}),t[87]=ve):ve=t[87],t[88]===Symbol.for("react.memo_cache_sentinel")?(ke=s.jsx(o,{icon:s.jsx(ze,{}),type:"text",danger:!0,size:"small",className:"text-xs",onClick:mt,children:"注销账户？请慎重操作！"}),t[88]=ke):ke=t[88],t[89]!==me||t[90]!==ue||t[91]!==we?(Pe=s.jsxs("div",{className:"flex flex-col mt-6 gap-3",children:[me,ue,pe,we,ve,ke]}),t[89]=me,t[90]=ue,t[91]=we,t[92]=Pe):Pe=t[92],t[93]!==ne||t[94]!==Pe||t[95]!==O?(Oe=s.jsxs(s.Fragment,{children:[O,ne,Pe]}),t[93]=ne,t[94]=Pe,t[95]=O,t[96]=Oe):Oe=t[96],Oe}),xt=()=>{const t=n.c(17),a=h(),{getDefaultDataClear:i}=r(),c=l(bt),[d,u]=e.useState(!1);let f;t[0]!==a?(f=function(){a(O("")),a(j({})),a(N(!1)),x.hide(y),I||(x.hide(ee),x.hide(ie))},t[0]=a,t[1]=f):f=t[1];const g=f;let _;t[2]!==d||t[3]!==g||t[4]!==a||t[5]!==i||t[6]!==c?(_=function(){if(g(),T({url:m.logout,token:c}),b.success("退出成功"),d||!I){i(10,void 0,e=>{F(e)&&(a(z()),a(A()),a(L()),a(D()),a(q()),a(R()),a(U()),a(Z()),a(V()),a($()),a(M()),a(B()),a(Q()),a(Y()))});const e=k.getState().stateUtils.mySwiper;if(e){k.getState().swiper.loop?e?.slideToLoop(0):e?.slideTo(0)}}},t[2]=d,t[3]=g,t[4]=a,t[5]=i,t[6]=c,t[7]=_):_=t[7];const S=_;let w,v,C,P,W;return t[8]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsx(p,{message:"退出后将停止在不同设备或浏览器间同步数据。",type:"error",showIcon:!0,banner:!0,icon:s.jsx(E,{}),className:"rounded-md"}),t[8]=w):w=t[8],t[9]!==d?(v=I&&s.jsxs("div",{className:"flex gap-2 items-center pointer-events-auto cursor-pointer w-fit",onClick:()=>{u(!d)},children:[s.jsx(je,{checked:d,className:"pointer-events-none"}),s.jsx("p",{children:"退出清空本地数据"})]}),t[9]=d,t[10]=v):v=t[10],t[11]===Symbol.for("react.memo_cache_sentinel")?(C=s.jsx(o,{onClick:gt,children:"取消"}),t[11]=C):C=t[11],t[12]!==S?(P=s.jsxs("div",{className:"flex gap-3 justify-end",children:[C,s.jsx(o,{danger:!0,type:"primary",onClick:S,children:"确定"})]}),t[12]=S,t[13]=P):P=t[13],t[14]!==v||t[15]!==P?(W=s.jsxs("div",{className:"flex flex-col gap-4",children:[w,v,P]}),t[14]=v,t[15]=P,t[16]=W):W=t[16],W},yt=()=>{const t=n.c(7),a=h(),[r,l]=e.useState(!1);let i;t[0]!==a?(i=function(){l(!0);const e=k.getState().user.token;P({url:m.logOff,token:e}).then(e=>{200===e.code&&(a(O("")),a(j({})),a(N(!1)),x.hide(y),I||(x.hide(ee),x.hide(ie)))}).finally(()=>{l(!1)})},t[0]=a,t[1]=i):i=t[1];const c=i;let d,u,f;return t[2]===Symbol.for("react.memo_cache_sentinel")?(d=s.jsx(p,{message:"是否确认注销账户？注销后账户数据将被完全清理，请您慎重操作，如有问题，欢迎联系管理员！",type:"error",showIcon:!0,banner:!0,icon:s.jsx(E,{}),className:"rounded-md"}),t[2]=d):d=t[2],t[3]===Symbol.for("react.memo_cache_sentinel")?(u=s.jsx(o,{onClick:_t,children:"取消"}),t[3]=u):u=t[3],t[4]!==r||t[5]!==c?(f=s.jsxs("div",{className:"flex flex-col gap-4",children:[d,s.jsxs("div",{className:"flex gap-3 justify-end",children:[u,s.jsx(o,{danger:!0,type:"primary",onClick:c,loading:r,children:"确定"})]})]}),t[4]=r,t[5]=c,t[6]=f):f=t[6],f};function bt(e){return e.user.token}function gt(){x.hide(y)}function _t(){x.hide(y)}function St(){const t=n.c(11),a=h(),r=l(Ct),o=l(vt),i=l(wt);let c;t[0]!==a||t[1]!==r||t[2]!==o?(c=function(){T({url:m.getUserInfo,token:r}).then(e=>{200===e.code&&e.data&&(w(e.data,o)||a(j(e.data)))})},t[0]=a,t[1]=r,t[2]=o,t[3]=c):c=t[3];const d=c;let u,p,f;return t[4]!==d||t[5]!==r?(u=()=>{r&&d()},t[4]=d,t[5]=r,t[6]=u):u=t[6],t[7]===Symbol.for("react.memo_cache_sentinel")?(p=[],t[7]=p):p=t[7],e.useEffect(u,p),t[8]!==i||t[9]!==r?(f=s.jsx("div",{className:"py-6 mx-auto w-full max-w-[390px]",children:r?i?s.jsx(Le,{}):s.jsx(jt,{}):s.jsx(te,{})}),t[8]=i,t[9]=r,t[10]=f):f=t[10],f}function wt(e){return e.user.isSettingDefaultData}function vt(e){return e.user.userInfo}function Ct(e){return e.user.token}export{St as default};
