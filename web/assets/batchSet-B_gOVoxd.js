import{u as e,h as t,r as s,j as r,bC as i,c$ as o,B as n,a2 as a,hF as l,C as m,m as c,hG as d,hH as u,hI as p,y as j,hJ as h,Z as x,a_ as f,z as g,hK as b}from"./requestIdleCallbackPolyfill-DoU9FIwA.js";import{b as C,P as y}from"./myFolderModal-BaY8D6ar.js";import{h as v,o as w}from"./sortableJsUtils-Drr80ygW.js";import{M as S}from"./mySlider-TJTrgMof.js";import{R as k}from"./QuestionCircleOutlined-CVhhmpfu.js";import{C as F}from"./useFresh-BPu3o4Ml.js";import{S as D}from"./index-OP_kbtb2.js";import{C as O}from"./ColorPicker-CgfIJ3nB.js";import"./sortable.esm-Bv0j-UjJ.js";import"./iconBase-e7WfhDDE.js";import"./myModal-CqhYm56b.js";import"./useForm-CW3rwJm8.js";import"./index-Cr4L1iDP.js";import"./row-D5QnkDzE.js";import"./useBreakpoint-xRBdhL2a.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./QuestionCircleOutlined-DSm95oJP.js";import"./index-DWLaguo5.js";import"./getAllowClear-VAszIRBx.js";import"./Input-CqajMQ6D.js";import"./TextArea-C3zYesjv.js";import"./index-CRJ7dhHF.js";import"./index-Nh4HMtRK.js";import"./CloudUploadOutlined-CIRLmRub.js";import"./Overflow-B-O7IF8-.js";import"./index-B2wLx8Jx.js";import"./index-GVUbtrZR.js";import"./LeftOutlined-D9Sp279J.js";import"./useIsSmallScreen-DRd273kv.js";import"./ExportOutlined-QEhExVov.js";import"./PlusOutlined-CN_1dRjg.js";import"./index-YyYs-mXR.js";import"./ReloadOutlined-B00s2TmV.js";import"./LeftOutlined-8BsyXLrx.js";import"./styleChecker-DVpt2Hb3.js";import"./fullSpin-DfHViZJG.js";import"./myDrawer2-CqMTi0ve.js";import"./handleButton-DQeA4kaX.js";import"./addRecommendAppForm-CiKtJbNn.js";import"./submitForInclusion-DeFjf1lg.js";import"./assets-B8Bi78Vh.js";import"./MailOutlined-DjR1aFWc.js";import"./SearchOutlined-BpOwJlcL.js";import"./UserOutlined-BSS52Jmh.js";import"./index-vGlmZaTG.js";function T(){const T=e(),I=t(e=>e.appData.listData),M=t(e=>e.appData.freeDragListData),$=t(e=>e.home.showFreeDrag),P=t(e=>e.home.freeDragGridX),G=t(e=>e.home.freeDragGridY),B=t(e=>e.card.gridColumnWidth),R=t(e=>e.card.gridRowHeight),U=t(e=>e.card.columnGap),z=t(e=>e.card.rowGap),[H,W]=s.useState("icon"),[A,J]=s.useState("11"),[L,Q]=s.useState("#ffffff"),[q,E]=s.useState("#000000"),[N,X]=s.useState([]),[Y,Z]=s.useState(0),{height:_,width:K}=C(),V=[{label:"展示样式",content:r.jsx(r.Fragment,{children:r.jsx(D,{value:H,onChange:e=>{W(e)},variant:"filled",style:{width:"100%",maxWidth:256},placeholder:"请选择链接卡片展示样式",options:[{label:"纯图",value:"icon"},{label:"文本",value:"text"},{label:"横版",value:"icon-h"},{label:"竖版",value:"icon-v"}]})})},{label:"卡片大小",content:r.jsx(r.Fragment,{children:r.jsx(D,{value:A,onChange:e=>{J(e)},variant:"filled",style:{width:"100%",maxWidth:256},placeholder:"请选择链接卡片尺寸大小",options:y})})},{label:"背景颜色",content:r.jsx(r.Fragment,{children:r.jsx(O,{showText:!0,value:L,onChange:e=>{Q(e.toHexString())}})})},{label:"文字颜色",content:r.jsx(r.Fragment,{children:r.jsx(O,{showText:!0,value:q,onChange:e=>{E(e.toHexString())}})})},{label:`图标间距（${Y}px）`,content:r.jsx(r.Fragment,{children:r.jsx(S,{value:Y,min:0,max:48,onChange:e=>{Z(e)}})})}],[ee,te]=s.useState(!1);const se=s.useRef(null);s.useEffect(()=>()=>{se.current&&(clearTimeout(se.current),se.current=null)},[]);const re=[{label:"卡片内字体颜色(非卡片名称）",content:r.jsx(r.Fragment,{children:r.jsx(a,{title:"是否确认调整",onConfirm:()=>{const e=l(I);T(m(e[0])),c.success(`成功调整了${e[1]}个字体颜色`)},children:r.jsx(n,{type:"link",children:"调整"})})})},{label:"移除相同ID、空文件夹",content:r.jsx(r.Fragment,{children:r.jsx(a,{title:"是否确认移除",onConfirm:()=>{const e=d(I),t=v(u(p(j(I)))),s=d(t);T(m(t)),c.success(`成功移除了${e-s}个数据`)},children:r.jsx(n,{type:"link",children:"移除"})})})},{label:"更新ID为文本类型",content:r.jsx(a,{icon:r.jsx(x,{style:{color:"blue"}}),title:"该更新有利无害",onConfirm:()=>{const e=h(j(I));T(m(e[0])),c.success(`成功移除了${e[1]}个数据ID`)},children:r.jsx(n,{type:"link",children:"更新"})})},{label:"移除所有空白占位卡片",content:r.jsx(a,{title:"是否确认移除",onConfirm:()=>{const e=j(I),t=f(e);T(m(t[0])),c.success(`成功移除了${t[1]}个空白占位卡片`)},children:r.jsx(n,{type:"link",children:"移除"})})},{label:"整理全屏自由拖拽",content:r.jsx(a,{title:"是否确认整理",onConfirm:()=>{if(!$)return void c.error("整理失败，全屏自由拖拽布局未启用");const e=j(M).map(e=>{const t=Math.round(e.x/P)*P,s=Math.round(e.y/G)*G,r=w(e.size,B,R,z,U),i=K-r.width,o=_-r.height,n=Math.min(i,t),a=Math.min(o,s);return{...e,x:n,y:a}});c.success("整理完成"),T(g(e))},children:r.jsx(n,{type:"link",children:"整理"})})}];return r.jsxs(r.Fragment,{children:[r.jsx(i,{items:re,groupTitle:"一键优化",gap:20,bottomDivider:!0}),r.jsx(i,{items:V,groupTitle:"手动控制",gap:20,bottomDivider:!0}),r.jsx(o,{message:"请在下方选择需要调整的参数",type:"info",icon:r.jsx(k,{})}),r.jsx(F.Group,{options:[{label:"展示样式",value:"showType"},{label:"卡片大小",value:"size"},{label:"背景颜色",value:"bgColor"},{label:"文字颜色",value:"textColor"},{label:"图标间距",value:"iconPadding"}],className:"mb-6",value:N,onChange:e=>{X(e)}}),r.jsx(n,{type:"primary",onClick:function(){N.length<=0?c.error("请选择确认调整的参数信息"):(te(!0),se.current&&clearTimeout(se.current),se.current=setTimeout(async()=>{try{const e=await async function(e,t,s){return new Promise((r,i)=>{try{r(b(e,t,s))}catch(o){i(o)}})}(I,N,{linkCardBgColor:L,linkCardShowType:H,linkCardSize:A,linkCardTextColor:q,imgPaddingNum:Y});T(m(e[0])),c.success(`成功调整了${e[1]}个链接卡片`)}catch(e){c.error("调整链接卡片时发生错误")}finally{te(!1)}},500))},loading:ee,children:"调整卡片"})]})}export{T as default};
