import{c as e,r as t,j as r,B as l,E as s,n as i,i as o,k as a,a as n,l as m,q as c,a8 as d,a2 as p}from"./requestIdleCallbackPolyfill-CRtcYtqz.js";import{I as f}from"./assets-B8Bi78Vh.js";import{u}from"./useFresh-y1lmOc8g.js";import{r as h}from"./transformData-CHYShsQS.js";import{M as j,R as x}from"./myTable-Dl2QuU-Q.js";import{C as y}from"./contentLayout-BpLnk-YD.js";import{F as b}from"./index-BGbaREI1.js";import{I as _}from"./index-B0U6GSVy.js";import{S as k}from"./index-CF37AyZG.js";import{R as w}from"./SearchOutlined-B80XGBAY.js";import{R as S}from"./RedoOutlined-B72iKt02.js";import{T as g}from"./index-BgMRx6qH.js";import{R as O}from"./UserOutlined-B1UxF3gI.js";import{I as C}from"./index-BIBYr-gg.js";import{R as v}from"./LinkOutlined-DopLHcZx.js";import"./index-DzNwoECr.js";import"./useForm-Au5dOVxA.js";import"./FolderOpenOutlined-ComJ5RAY.js";import"./Overflow-Dw8Kex4x.js";import"./MailOutlined-jCQFQ878.js";import"./MoneyCollectOutlined-CT8yhX_S.js";import"./MoneyCollectOutlined-4QlEwa2l.js";import"./index-DQcu5FOC.js";import"./CaretDownOutlined-DcidQ0ah.js";import"./styleChecker-BRhAwd4B.js";import"./AlipayOutlined-DLlsLZ5r.js";import"./AlipayOutlined-tZM3mGx9.js";import"./useEffectOnce-B3Wa1Mlq.js";import"./useBreakpoint-E2sLeglb.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./getAllowClear-rD1UM-lP.js";import"./index-bQRXjpSB.js";import"./Input-DELR_BSE.js";import"./row-pVBpgFkh.js";import"./QuestionCircleOutlined-DSm95oJP.js";import"./TextArea-B5lq4i0U.js";import"./LeftOutlined-D9Sp279J.js";function F(){const o=e.c(43),{key:a,refresh:n}=u(),[m]=b.useForm();let c;o[0]===Symbol.for("react.memo_cache_sentinel")?(c={},o[0]=c):c=o[0];const[d,p]=t.useState(c);let f,x,g,O,C,v,F,N;o[1]===Symbol.for("react.memo_cache_sentinel")?(f={title:"用户",key:"username",width:160,fixed:"left",render:B},x={title:"预览",key:"filePath",width:200,className:"flex-center",render:A},g={title:"资源类型",key:"srcType",width:120,render:P},O={title:"文件类型",key:"fileType",width:120},C={title:"文件大小",key:"fileSize",width:120,render:T},v={title:"文件地址",key:"filePath",width:420,render:I},F={type:"time",title:"上传时间",key:"createdTime",width:200},o[1]=f,o[2]=x,o[3]=g,o[4]=O,o[5]=C,o[6]=v,o[7]=F):(f=o[1],x=o[2],g=o[3],O=o[4],C=o[5],v=o[6],F=o[7]),o[8]!==n?(N=[f,x,g,O,C,v,F,{title:"操作",fixed:"right",width:120,render:(e,t)=>r.jsx(M,{record:t,refresh:n})}],o[8]=n,o[9]=N):N=o[9];const R=N;let z,L,U,$,q,K,D,E,Q,G,H,V,J,W,X,Y,Z;return o[10]!==m?(z=()=>{const e=m.getFieldsValue();e[Math.random()]=!0,p(h(e))},o[10]=m,o[11]=z):z=o[11],o[12]===Symbol.for("react.memo_cache_sentinel")?(L={gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gridAutoRows:"32px"},o[12]=L):L=o[12],o[13]===Symbol.for("react.memo_cache_sentinel")?(U=r.jsx(b.Item,{name:"username",children:r.jsx(_,{placeholder:"用户名"})}),o[13]=U):U=o[13],o[14]===Symbol.for("react.memo_cache_sentinel")?($=r.jsx(b.Item,{name:"filePath",children:r.jsx(_,{placeholder:"文件地址"})}),o[14]=$):$=o[14],o[15]===Symbol.for("react.memo_cache_sentinel")?(q=r.jsxs("div",{className:"gap-3 flex-wrap grid w-full mb-3",style:L,children:[U,$,r.jsx(b.Item,{name:"srcType",children:r.jsx(k,{placeholder:"资源类型",options:[{label:"头像",value:1},{label:"静态壁纸",value:2},{label:"动态壁纸",value:3},{label:"上传的图标",value:4},{label:"自动获取的图标",value:5},{label:"资源库的图标",value:6},{label:"其他图片",value:0}],allowClear:!0})})]}),o[15]=q):q=o[15],o[16]!==m?(K=()=>{m.submit()},o[16]=m,o[17]=K):K=o[17],o[18]===Symbol.for("react.memo_cache_sentinel")?(D=r.jsx(w,{}),o[18]=D):D=o[18],o[19]!==K?(E=r.jsx(l,{type:"primary",onClick:K,icon:D,children:"查询"}),o[19]=K,o[20]=E):E=o[20],o[21]!==m?(Q=()=>{m.resetFields();const e={};e[Math.random()]=!0,p(e)},o[21]=m,o[22]=Q):Q=o[22],o[23]===Symbol.for("react.memo_cache_sentinel")?(G=r.jsx(S,{}),o[23]=G):G=o[23],o[24]!==Q?(H=r.jsx(l,{onClick:Q,icon:G,children:"重置"}),o[24]=Q,o[25]=H):H=o[25],o[26]!==E||o[27]!==H?(V=r.jsxs("div",{className:"flex flex-wrap gap-3",children:[E,H]}),o[26]=E,o[27]=H,o[28]=V):V=o[28],o[29]!==m||o[30]!==V||o[31]!==z?(J=r.jsxs(b,{className:"w-full",form:m,onFinish:z,children:[q,V]}),o[29]=m,o[30]=V,o[31]=z,o[32]=J):J=o[32],o[33]===Symbol.for("react.memo_cache_sentinel")?(W=r.jsx(s,{className:"my-3"}),o[33]=W):W=o[33],o[34]!==d?(X={searchParams:d},o[34]=d,o[35]=X):X=o[35],o[36]!==R||o[37]!==a||o[38]!==X?(Y=r.jsx(j,{columns:R,getListUrl:i.getUploadSrcList,dataKey:"data.list",tableKey:a,params:X}),o[36]=R,o[37]=a,o[38]=X,o[39]=Y):Y=o[39],o[40]!==J||o[41]!==Y?(Z=r.jsxs(y,{children:[J,W,Y]}),o[40]=J,o[41]=Y,o[42]=Z):Z=o[42],Z}function I(e){return r.jsx(g,{color:"blue",onClick:()=>{e&&window.open(o(e),"_blank")},className:"cursor-pointer",icon:r.jsx(v,{}),children:e||"-"})}function T(e){return r.jsx("span",{children:e<1024?`${e}B`:e<1048576?`${(e/1024).toFixed(2)}KB`:e<1073741824?`${(e/1024/1024).toFixed(2)}MB`:`${(e/1024/1024/1024).toFixed(2)}GB`})}function P(e){return r.jsx(g,{color:0===e?"blue":1===e?"green":2===e?"purple":3===e?"cyan":4===e?"red":5===e?"orange":6===e?"magenta":"volcano",children:0===e?"其他图片":1===e?"头像":2===e?"静态壁纸":3===e?"动态壁纸":4===e?"上传的图标":5===e?"自动获取的图标":6===e?"资源库的图标":e})}function A(e){return r.jsx(C,{src:o(e),height:48,fallback:f,loading:"lazy"})}function B(e,t){return r.jsx(g,{color:e||"0"===t.userId?"geekblue":"red",bordered:!1,icon:r.jsx(O,{}),children:e||("0"===t.userId?"游客":"已注销")})}const M=t.memo(s=>{const f=e.c(20),{record:u,refresh:h}=s;let j;f[0]===Symbol.for("react.memo_cache_sentinel")?(j=[],f[0]=j):j=f[0];const[y,b]=t.useState(j);let _;f[1]!==u.id||f[2]!==h?(_=function(){a(1,b);const e=n.getState().user.token;setTimeout(()=>{m({url:i.deleteUploadSrc,token:e,data:{ids:[u.id]}}).then(e=>{200===e.code&&h()}).finally(()=>{c(1,b)})},500)},f[1]=u.id,f[2]=h,f[3]=_):_=f[3];const k=_;let w;f[4]===Symbol.for("react.memo_cache_sentinel")?(w=function(e){fetch(o(e),{headers:new Headers({Authorization:"Bearer "+n.getState().user.token})}).then(N).then(t=>{d.saveAs(t,e.split("/").pop()||"file")}).catch(R)},f[4]=w):w=f[4];const S=w;let g,O,C,v,F,I,T;return f[5]===Symbol.for("react.memo_cache_sentinel")?(g={width:"44px"},f[5]=g):g=f[5],f[6]!==u.filePath?(O=r.jsx(l,{type:"link",size:"small",style:g,onClick:()=>{S(u.filePath)},children:"下载"}),f[6]=u.filePath,f[7]=O):O=f[7],f[8]===Symbol.for("react.memo_cache_sentinel")?(C={width:"44px"},f[8]=C):C=f[8],f[9]!==y[1]?(v=y[1]?r.jsx(x,{}):"删除",f[9]=y[1],f[10]=v):v=f[10],f[11]!==y[1]||f[12]!==v?(F=r.jsx(l,{danger:!0,type:"link",size:"small",disabled:y[1],style:C,children:v}),f[11]=y[1],f[12]=v,f[13]=F):F=f[13],f[14]!==k||f[15]!==F?(I=r.jsx(p,{title:"是否删除附件？",onConfirm:k,children:F}),f[14]=k,f[15]=F,f[16]=I):I=f[16],f[17]!==O||f[18]!==I?(T=r.jsxs("div",{className:"flex flex-wrap",children:[O,I]}),f[17]=O,f[18]=I,f[19]=T):T=f[19],T});function N(e){return e.blob()}function R(){return alert("文件下载失败")}export{F as default};
