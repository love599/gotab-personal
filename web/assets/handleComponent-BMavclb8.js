import{r as e,I as t,u as s,a as r,x as a,w as i,z as o,y as n,m as l,j as c,a5 as m,S as d,c as p,B as j,g as u}from"./requestIdleCallbackPolyfill-CEimuL3I.js";import{b as f,d as h,q as x,u as g}from"./sortableJsUtils-lf51YuKZ.js";import{H as b}from"./handleButton-FqbJIAiJ.js";import{C as y,D as w,F as D,U as k}from"./UpCircleTwoTone-PTBIBltQ.js";import{M as F}from"./myModal-DAb4Oxb9.js";import{y as O,z as C,B as N,E as v,G as I,H as S,J as P,K as T,A as _,O as E,a as R}from"./myFolderModal-DMVjguLH.js";import{u as U}from"./useForm-BmxkZ3hM.js";import{F as B}from"./index-CLs8asrc.js";import{R as L}from"./index-CVsAKlSW.js";import"./LikeOutlined-BjYRMYG0.js";import"./MailOutlined-OCY9FzYP.js";import"./Overflow-CysMCa0X.js";import"./FolderOpenOutlined-DHBkEw2_.js";import"./SearchOutlined-C3PMWV9D.js";import"./Input-BBAEOKR8.js";import"./getAllowClear-Cn6nd0XC.js";import"./index-B6Nw0KJ3.js";import"./TextArea-D12ZTmOp.js";import"./CloudUploadOutlined-BcBaKmgs.js";import"./PlusOutlined-ByZyTB3m.js";import"./fullSpin-CKQAqEpZ.js";import"./index-BCD7T3lV.js";import"./useBreakpoint-BCsgDtUx.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./sortable.esm-DnfOC_F4.js";import"./iconBase-rh4uCQVo.js";import"./useFresh-CXjlCB9G.js";import"./index-Cu_iOCo3.js";import"./LeftOutlined-D9Sp279J.js";import"./LinkOutlined-Bi0iQjOQ.js";import"./index-we7dqPR7.js";import"./index-BXpSMQ4p.js";import"./ColorPicker-gpVSsQlx.js";import"./index-kH8S-jgo.js";import"./index-DG56vLGF.js";import"./useIsSmallScreen-DT9DQvvy.js";import"./ExportOutlined-BTrutQGh.js";import"./PlusOutlined-DoJ9MaWq.js";import"./ReloadOutlined-B00s2TmV.js";import"./LeftOutlined-DlW4zolN.js";import"./styleChecker-o73Q9rTs.js";import"./addRecommendAppForm-K-4YO6EV.js";import"./myDrawer2-BBz-Zjo8.js";import"./submitForInclusion-CIVbLdE7.js";import"./assets-B8Bi78Vh.js";import"./RedoOutlined-BRwewl8_.js";import"./UserOutlined-Ch50gqEV.js";import"./QuestionCircleOutlined-Iab4W4Td.js";import"./QuestionCircleOutlined-DSm95oJP.js";import"./row-eYrfNDsp.js";function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},q.apply(this,arguments)}const A=(s,r)=>e.createElement(t,q({},s,{ref:r,icon:y})),M=e.forwardRef(A);function z(){return z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},z.apply(this,arguments)}const H=(s,r)=>e.createElement(t,z({},s,{ref:r,icon:w})),Q=e.forwardRef(H);function X(){return X=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},X.apply(this,arguments)}const G=(s,r)=>e.createElement(t,X({},s,{ref:r,icon:D})),J=e.forwardRef(G);function $(){return $=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},$.apply(this,arguments)}const K=(s,r)=>e.createElement(t,$({},s,{ref:r,icon:k})),V=e.forwardRef(K);const Y=e.memo(function(t){const{item:m,className:d="",isFreeDrag:p}=t,j=s(),u=e.useCallback(()=>{const t=r.getState().appData.listData,s=r.getState().appData.freeDragListData,c=r.getState().swiper.activeIndex,d=a(m);if(d.id=i(),p){delete d.x,delete d.y;const r=t[c||0].id,i=f(a(t),r,d),p=h(a(s),m.id);e.startTransition(()=>{j(o(i)),j(n(p))}),l.success("卡片已切换至标准布局区域")}else{delete m.x,delete m.y;const r=a(s).concat([d]),i=h(a(t),m.id);e.startTransition(()=>{j(n(r)),j(o(i))}),l.success("卡片已切换至全屏自由拖拽")}},[m,p]);return c.jsx(c.Fragment,{children:m.id?c.jsx(b,{className:d,icon:p?c.jsx(Q,{style:{transform:"scale(1.4)"},twoToneColor:"#d4380d"}):c.jsx(V,{style:{transform:"scale(1.4)"},twoToneColor:"#d4380d"}),onClick:e=>{e.stopPropagation(),e.preventDefault(),u()}}):null})});const Z=e.memo(function(t){const{item:i,className:l="",isInfolder:m=!1,isFreeDrag:p=!1}=t,j=s();if(!i.id)return null;const u=(t="delete")=>{(t=>{const s=r.getState().appData.listData,l=r.getState().appData.freeDragListData,c=r.getState().card.deleteUseBlank;try{const r="release"===t;if(p){const t=h(a(l),i.id,r);e.startTransition(()=>{j(n(t))})}else{const t=c&&"blank"!==i.type&&!m?x(a(s),i.id,r):h(a(s),i.id,r);e.startTransition(()=>{j(o(t))})}}catch(d){}})(t)};return c.jsx("button",{onClick:e=>{e.stopPropagation(),"folder"===i.type?d.show(F,{title:"删除文件夹",children:c.jsx(O,{deleteHandle:u})}):u()},className:`close-icon-background cursor-pointer w-5 h-5 bg-red-500 hover:bg-red-600 active:bg-red-700 transition-all ${l}`,children:c.jsx("div",{className:"close bg-[#f2f2f2] after:bg-[#f2f2f2]"})})},(e,t)=>m(e.item,t.item)&&e.isFreeDrag===t.isFreeDrag&&e.isInfolder===t.isInfolder&&e.className===t.className);function W(){return d.hide(F)}const ee=e.memo(function(e){const t=p.c(10),{editItem:i}=e,[n]=U(),m=s();let u;t[0]!==m||t[1]!==i?(u=e=>{const t=r.getState().appData.listData;try{const s={...i,...e},r=g(i.id,a(t),s);m(o(r)),l.success("编辑成功"),d.hide(F)}catch(s){l.error("编辑失败，请重试")}},t[0]=m,t[1]=i,t[2]=u):u=t[2];const f=u;let h,x,b,y;return t[3]===Symbol.for("react.memo_cache_sentinel")?(h=[{required:!0,message:"请选择卡片大小"}],t[3]=h):h=t[3],t[4]===Symbol.for("react.memo_cache_sentinel")?(x=c.jsx(B.Item,{required:!0,name:"size",label:"卡片大小",rules:h,children:c.jsx(L.Group,{options:C,className:"flex flex-wrap gap-3 mt-1"})}),t[4]=x):x=t[4],t[5]===Symbol.for("react.memo_cache_sentinel")?(b=c.jsxs("div",{className:"flex flex-wrap justify-end gap-3",children:[c.jsx(j,{onClick:W,children:"取消"}),c.jsx(j,{type:"primary",htmlType:"submit",children:"确定"})]}),t[5]=b):b=t[5],t[6]!==i||t[7]!==n||t[8]!==f?(y=c.jsx(c.Fragment,{children:c.jsxs(B,{form:n,onFinish:f,initialValues:i,children:[x,b]})}),t[6]=i,t[7]=n,t[8]=f,t[9]=y):y=t[9],y}),te=e.memo(e=>{const t=p.c(6),{className:s,onClick:r}=e;let a,i,o;return t[0]===Symbol.for("react.memo_cache_sentinel")?(a=c.jsx(M,{style:{transform:"scale(1.35)"},twoToneColor:"#d4380d"}),t[0]=a):a=t[0],t[1]!==r?(i=e=>{e.stopPropagation(),e.preventDefault(),r()},t[1]=r,t[2]=i):i=t[2],t[3]!==s||t[4]!==i?(o=c.jsx(j,{size:"small",type:"text",icon:a,className:s,onClick:i}),t[3]=s,t[4]=i,t[5]=o):o=t[5],o});const se=e.memo(function(e){const t=p.c(49),{item:s,className:r,isFreeDrag:a}=e,i=void 0===r?"":r;let o;e:{switch(s.type){case"link":case"folder":{let e,r;t[0]!==a||t[1]!==s?(e=()=>{"link"===s.type?d.show(F,{title:"编辑卡片",children:c.jsx(_,{type:"edit",editItem:s,isFreeDrag:a}),width:760,height:533}):"folder"===s.type&&d.show(F,{title:"编辑文件夹",children:c.jsx(E,{editItem:s,isFreeDrag:a})})},t[0]=a,t[1]=s,t[2]=e):e=t[2],t[3]!==i||t[4]!==e?(r=c.jsx(te,{className:i,onClick:e}),t[3]=i,t[4]=e,t[5]=r):r=t[5],o=r;break e}case"blank":{let e,r;t[6]!==s?(e=()=>{d.show(F,{title:"编辑占位卡片",children:c.jsx(ee,{editItem:s})})},t[6]=s,t[7]=e):e=t[7],t[8]!==i||t[9]!==e?(r=c.jsx(te,{className:i,onClick:e}),t[8]=i,t[9]=e,t[10]=r):r=t[10],o=r;break e}case"clock":{let e,r;t[11]!==a||t[12]!==s?(e=()=>{d.show(F,{title:"编辑时钟",children:c.jsx(T,{editItem:s,isFreeDrag:a})})},t[11]=a,t[12]=s,t[13]=e):e=t[13],t[14]!==i||t[15]!==e?(r=c.jsx(te,{className:i,onClick:e}),t[14]=i,t[15]=e,t[16]=r):r=t[16],o=r;break e}case"fakeAssistant":{let e,r;t[17]!==a||t[18]!==s?(e=()=>{d.show(F,{title:"编辑伪装页",children:c.jsx(P,{editItem:s,isFreeDrag:a})})},t[17]=a,t[18]=s,t[19]=e):e=t[19],t[20]!==i||t[21]!==e?(r=c.jsx(te,{className:i,onClick:e}),t[20]=i,t[21]=e,t[22]=r):r=t[22],o=r;break e}case"hotEvents":{let e,r;t[23]!==a||t[24]!==s?(e=()=>{d.show(F,{title:"编辑热点榜单",children:c.jsx(S,{editItem:s,isFreeDrag:a})})},t[23]=a,t[24]=s,t[25]=e):e=t[25],t[26]!==i||t[27]!==e?(r=c.jsx(te,{className:i,onClick:e}),t[26]=i,t[27]=e,t[28]=r):r=t[28],o=r;break e}case"weather":{let e,r;t[29]!==a||t[30]!==s?(e=()=>{d.show(F,{title:"编辑天气",children:c.jsx(I,{editItem:s,isFreeDrag:a})})},t[29]=a,t[30]=s,t[31]=e):e=t[31],t[32]!==i||t[33]!==e?(r=c.jsx(te,{className:i,onClick:e}),t[32]=i,t[33]=e,t[34]=r):r=t[34],o=r;break e}case"countDownDay":{let e,r;t[35]!==a||t[36]!==s?(e=()=>{d.show(F,{title:"编辑倒数日",children:c.jsx(v,{editItem:s,isFreeDrag:a}),overflowX:"visible",width:640})},t[35]=a,t[36]=s,t[37]=e):e=t[37],t[38]!==i||t[39]!==e?(r=c.jsx(te,{className:i,onClick:e}),t[38]=i,t[39]=e,t[40]=r):r=t[40],o=r;break e}case"countDownDays":{let e,r;t[41]!==a||t[42]!==s?(e=()=>{d.show(F,{title:"编辑组件",children:c.jsx(N,{editItem:s,isFreeDrag:a}),overflowX:"visible"})},t[41]=a,t[42]=s,t[43]=e):e=t[43],t[44]!==i||t[45]!==e?(r=c.jsx(te,{className:i,onClick:e}),t[44]=i,t[45]=e,t[46]=r):r=t[46],o=r;break e}}o=void 0}const n=o;let l;return t[47]!==n?(l=c.jsx(c.Fragment,{children:n}),t[47]=n,t[48]=l):l=t[48],l},(e,t)=>m(e.item,t.item)&&e.className===t.className&&e.isFreeDrag===t.isFreeDrag);const re=e.memo(function(t){const{item:s,className:r="",isFreeDrag:a}=t,i=e.useMemo(()=>{if("folder"===s.type)return c.jsx(b,{className:r,icon:c.jsx(J,{style:{transform:"scale(1.4)"},twoToneColor:"#d4380d"}),onClick:e=>{e.stopPropagation(),e.preventDefault(),d.show(R,{folderItem:s,openFrom:"click",isFreeDrag:a})}})},[s.type,s,r]);return c.jsx(c.Fragment,{children:i})},(e,t)=>m(e.item,t.item)&&e.isFreeDrag===t.isFreeDrag&&e.className===t.className),ae=e.memo(e=>{const t=p.c(14),{item:s,showCombindShadow:r,onlyShow:a,isInFolder:i,isFreeDrag:o}=e;let n;if(!u(ie)||"addCard"===s.type||r||a)n=null;else{let e,r,a,l,m;t[0]!==o||t[1]!==i||t[2]!==s?(e=c.jsx(Z,{item:s,isInfolder:i,className:"card-handle-button absolute -top-1 -right-1",isFreeDrag:o}),t[0]=o,t[1]=i,t[2]=s,t[3]=e):e=t[3],t[4]!==o||t[5]!==s?(r=c.jsx(se,{item:s,className:"card-handle-button absolute -bottom-[6px] -right-[6px]",isFreeDrag:o}),a=c.jsx(re,{item:s,className:"card-handle-button absolute -bottom-[6px] -left-[6px]",isFreeDrag:o}),l="blank"!==s.type&&c.jsx(Y,{item:s,className:"card-handle-button absolute -top-[6px] -left-[6px]",isFreeDrag:o}),t[4]=o,t[5]=s,t[6]=r,t[7]=a,t[8]=l):(r=t[6],a=t[7],l=t[8]),t[9]!==e||t[10]!==r||t[11]!==a||t[12]!==l?(m=c.jsxs(c.Fragment,{children:[e,r,a,l]}),t[9]=e,t[10]=r,t[11]=a,t[12]=l,t[13]=m):m=t[13],n=m}return n},(e,t)=>m(e,t));function ie(e){return e.stateUtils.unlockEdit}export{ae as default};
