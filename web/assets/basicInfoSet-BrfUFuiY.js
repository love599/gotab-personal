import{c as e,r,j as s,B as l,l as t,a,W as o,o as n,G as i,a0 as m,v as c,a1 as u,m as d,n as f,X as p,F as j}from"./requestIdleCallbackPolyfill-DoU9FIwA.js";import{T as x}from"./TextArea-C3zYesjv.js";import{C as h}from"./contentLayout-DB4pAw8J.js";import{F as _}from"./index-Cr4L1iDP.js";import{I as b}from"./index-DWLaguo5.js";import{S as y}from"./index-YyYs-mXR.js";import{R as w}from"./QuestionCircleOutlined-CVhhmpfu.js";import"./getAllowClear-VAszIRBx.js";import"./useForm-CW3rwJm8.js";import"./row-D5QnkDzE.js";import"./useBreakpoint-xRBdhL2a.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./QuestionCircleOutlined-DSm95oJP.js";import"./Input-CqajMQ6D.js";function g(){const g=e.c(22),[S]=_.useForm();let C;g[0]===Symbol.for("react.memo_cache_sentinel")?(C=[],g[0]=C):C=g[0];const[v,q]=r.useState(C);let F;g[1]!==S?(F=function(){t(0,q);const e=a.getState().user.token;o({url:n.getInfoConfig,token:e}).then(e=>{if(S.setFieldsValue(e.data),!e.data.server_url&&!i()){const e=m();S.setFieldValue("server_url",e)}}).finally(()=>{c(0,q)})},g[1]=S,g[2]=F):F=g[2];const I=F;let k,N,Q;g[3]!==I?(k=()=>{I()},g[3]=I,g[4]=k):k=g[4],g[5]===Symbol.for("react.memo_cache_sentinel")?(N=[],g[5]=N):N=g[5],r.useEffect(k,N),g[6]===Symbol.for("react.memo_cache_sentinel")?(Q=function(e){if(e.server_url&&!u(e.server_url))return void d.error("后台服务地址必须以http或https开头");t(1,q);const r=a.getState().user.token;f({url:n.updateInfoConfig,token:r,data:e}).finally(()=>{c(1,q)})},g[6]=Q):Q=g[6];const R=Q;let T,A,B,O,V,z,E,G,L,P;return g[7]===Symbol.for("react.memo_cache_sentinel")?(T=s.jsx(p,{type:"warning",description:s.jsxs(s.Fragment,{children:[s.jsx(w,{className:"mr-1"}),"更新网页的标题、描述等项目基础信息，服务地址主要用于插件版打包使用，别的信息可以自行更改项目文件，达到更改目的！或联系作者：dengxiwang@aliyun.com"]}),className:"mb-4 p-1 px-3 text-xs font-normal w-full"}),g[7]=T):T=g[7],g[8]===Symbol.for("react.memo_cache_sentinel")?(A={flex:"120px"},g[8]=A):A=g[8],g[9]===Symbol.for("react.memo_cache_sentinel")?(B=s.jsx(_.Item,{label:"网站标题",required:!0,name:"web_title",rules:[{required:!0}],children:s.jsx(b,{placeholder:"网站标题",allowClear:!0})}),g[9]=B):B=g[9],g[10]===Symbol.for("react.memo_cache_sentinel")?(O=[{required:!0}],g[10]=O):O=g[10],g[11]===Symbol.for("react.memo_cache_sentinel")?(z=s.jsx(_.Item,{label:"网站描述",required:!0,name:"web_description",rules:O,children:s.jsx(x,{autoSize:{minRows:3,maxRows:3},allowClear:!0,placeholder:"网站描述，head头部中的description信息"})}),V=s.jsx(j,{}),g[11]=V,g[12]=z):(V=g[11],z=g[12]),g[13]===Symbol.for("react.memo_cache_sentinel")?(E=s.jsx(_.Item,{label:"后台服务地址",required:!0,name:"server_url",rules:[{required:!0}],children:s.jsx(b,{allowClear:!0,placeholder:"后台服务地址，如：https://web.gotab.cn"})}),g[13]=E):E=g[13],g[14]!==v[1]?(G=s.jsx("div",{className:"w-full flex justify-center",children:s.jsx(l,{htmlType:"submit",type:"primary",className:"w-full max-w-64",loading:v[1],children:"保存配置"})}),g[14]=v[1],g[15]=G):G=g[15],g[16]!==S||g[17]!==G?(L=s.jsxs(_,{form:S,className:"w-full",labelCol:A,onFinish:R,children:[B,z,V,E,G]}),g[16]=S,g[17]=G,g[18]=L):L=g[18],g[19]!==v[0]||g[20]!==L?(P=s.jsxs(h,{children:[T,s.jsx("div",{className:"w-full",children:s.jsx(y,{spinning:v[0],children:L})})]}),g[19]=v[0],g[20]=L,g[21]=P):P=g[21],P}export{g as default};
