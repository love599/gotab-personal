import{c as e,r as t,j as s,B as r,X as i,F as l,S as o,V as a,o as n,a as m,n as c,l as d,v as p,a2 as j}from"./requestIdleCallbackPolyfill-DEU4BPbw.js";import{u as f,R as h}from"./useFresh-BjlkOah4.js";import{r as x}from"./transformData-ZoGmCx9m.js";import{M as u,R as y}from"./myTable-C92pyCaz.js";import{C as b}from"./contentLayout-D0aBo720.js";import{F as _}from"./index-9tneyI6F.js";import{I as g}from"./index-RraZpeV0.js";import{R as C,a as S}from"./SearchOutlined-DIT2oznV.js";import{R as w}from"./QuestionCircleOutlined-DYq9aeCI.js";import{T as k}from"./index-FChzs3Dd.js";import{R as O}from"./SortAscendingOutlined-D7NUOcLq.js";import{T as F}from"./index-C673BkHR.js";import"./index-D3qRUNL8.js";import"./useForm-DIX_a_7G.js";import"./index-BiDii_VJ.js";import"./LeftOutlined-D9Sp279J.js";import"./MailOutlined-Bknd_EC8.js";import"./Overflow-BQO2PO8P.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./index-4gSYBMW8.js";import"./getAllowClear-BCigCKPi.js";import"./Input-Dx5M-rij.js";import"./assets-B8Bi78Vh.js";import"./MoneyCollectOutlined-so5EBUiC.js";import"./MoneyCollectOutlined-4QlEwa2l.js";import"./index-mR7ZCJM7.js";import"./CaretDownOutlined-DcidQ0ah.js";import"./FolderOpenOutlined-BNhgQTIu.js";import"./FolderOutlined-k9jtXdfw.js";import"./styleChecker-C1lpHCN-.js";import"./AlipayOutlined-CNoFyUYh.js";import"./AlipayOutlined-tZM3mGx9.js";import"./useEffectOnce-CnwNIw4x.js";import"./useBreakpoint-CMTnf1Wp.js";import"./index-DxFe-Rzl.js";import"./row-CzejJH_c.js";import"./QuestionCircleOutlined-DSm95oJP.js";import"./TextArea-BWz4jIx5.js";import"./SortAscendingOutlined-8bEGxkuH.js";function v(){const m=e.c(41),{key:c,refresh:d}=f(),[p]=_.useForm();let j;m[0]===Symbol.for("react.memo_cache_sentinel")?(j={},m[0]=j):j=m[0];const[h,y]=t.useState(j);let k,O,F,v;m[1]===Symbol.for("react.memo_cache_sentinel")?(k={title:"分类名称",key:"name",width:160,fixed:"left"},O={title:"排序",key:"sort",width:80,render:T},F={title:"更新时间",key:"updatedTime",width:200,render:N},m[1]=k,m[2]=O,m[3]=F):(k=m[1],O=m[2],F=m[3]),m[4]!==d?(v=[k,O,F,{title:"操作",fixed:"right",width:120,render:(e,t)=>s.jsx(A,{record:t,refresh:d})}],m[4]=d,m[5]=v):v=m[5];const M=v;let R,q,W,L,Q,V,z,B,D,K,P,U,X,E,Y,Z,$;return m[6]!==p?(R=()=>{const e=p.getFieldsValue();e[Math.random()]=!0,y(x(e))},m[6]=p,m[7]=R):R=m[7],m[8]===Symbol.for("react.memo_cache_sentinel")?(q={gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gridAutoRows:"32px"},m[8]=q):q=m[8],m[9]===Symbol.for("react.memo_cache_sentinel")?(W=s.jsx("div",{className:"gap-3 flex-wrap grid w-full mb-3",style:q,children:s.jsx(_.Item,{name:"name",children:s.jsx(g,{placeholder:"分类名称"})})}),m[9]=W):W=m[9],m[10]!==p?(L=()=>{p.submit()},m[10]=p,m[11]=L):L=m[11],m[12]===Symbol.for("react.memo_cache_sentinel")?(Q=s.jsx(C,{}),m[12]=Q):Q=m[12],m[13]!==L?(V=s.jsx(r,{type:"primary",onClick:L,icon:Q,children:"查询"}),m[13]=L,m[14]=V):V=m[14],m[15]!==p?(z=()=>{p.resetFields();const e={};e[Math.random()]=!0,y(e)},m[15]=p,m[16]=z):z=m[16],m[17]===Symbol.for("react.memo_cache_sentinel")?(B=s.jsx(S,{}),m[17]=B):B=m[17],m[18]!==z?(D=s.jsx(r,{onClick:z,icon:B,children:"重置"}),m[18]=z,m[19]=D):D=m[19],m[20]!==V||m[21]!==D?(K=s.jsxs("div",{className:"flex flex-wrap gap-3",children:[V,D]}),m[20]=V,m[21]=D,m[22]=K):K=m[22],m[23]!==p||m[24]!==K||m[25]!==R?(P=s.jsxs(_,{className:"w-full",form:p,onFinish:R,children:[W,K]}),m[23]=p,m[24]=K,m[25]=R,m[26]=P):P=m[26],m[27]===Symbol.for("react.memo_cache_sentinel")?(U=s.jsx(i,{type:"warning",description:s.jsxs(s.Fragment,{children:[s.jsx(w,{className:"mr-1"}),"收录分类在前端获取列表时做了 10 分钟的缓存效果，可能存在数据不及时更新情况，请重启或等待缓存失效"]}),className:"mt-3 p-1 px-3 text-xs font-normal w-full"}),X=s.jsx(l,{className:"my-3"}),m[27]=U,m[28]=X):(U=m[27],X=m[28]),m[29]!==d?(E=s.jsx("div",{className:"mb-3",children:s.jsx(r,{type:"primary",onClick:()=>{o.show(a,{title:"新增分类",children:s.jsx(I,{refresh:d,type:"add"})})},children:"新增分类"})}),m[29]=d,m[30]=E):E=m[30],m[31]!==h?(Y={searchParams:h},m[31]=h,m[32]=Y):Y=m[32],m[33]!==M||m[34]!==c||m[35]!==Y?(Z=s.jsx(u,{columns:M,getListUrl:n.getWebsiteCategoryList,dataKey:"data.list",tableKey:c,params:Y}),m[33]=M,m[34]=c,m[35]=Y,m[36]=Z):Z=m[36],m[37]!==P||m[38]!==E||m[39]!==Z?($=s.jsxs(b,{children:[P,U,X,E,Z]}),m[37]=P,m[38]=E,m[39]=Z,m[40]=$):$=m[40],$}function N(e,t){return s.jsx(k,{icon:s.jsx(h,{}),children:e||t.createdTime})}function T(e){return s.jsx(k,{color:"gold",icon:s.jsx(O,{}),children:e||"-"})}const I=i=>{const l=e.c(16),{editItem:d,refresh:p,type:j}=i,f=void 0===j?"add":j,[h]=_.useForm(),[x,u]=t.useState(!1);let y;l[0]!==d||l[1]!==p||l[2]!==f?(y=function(e){u(!0);const t=m.getState().user.token;c({url:"add"===f?n.addWebsiteCategory:n.editWebsiteCategory,token:t,data:"add"===f?e:{...e,id:d.id}}).then(e=>{200===e.code&&(o.hide(a),p&&p())}).finally(()=>{u(!1)})},l[0]=d,l[1]=p,l[2]=f,l[3]=y):y=l[3];const b=y;let C,S,w,k;l[4]===Symbol.for("react.memo_cache_sentinel")?(C={flex:"82px"},l[4]=C):C=l[4],l[5]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsx(_.Item,{name:"name",label:"分类名称",required:!0,rules:[{required:!0}],children:s.jsx(g,{placeholder:"分类名称",allowClear:!0})}),l[5]=S):S=l[5],l[6]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsx(_.Item,{name:"sort",label:"排序",children:s.jsx(F,{placeholder:"排序"})}),l[6]=w):w=l[6],l[7]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsx(r,{onClick:M,children:"取消"}),l[7]=k):k=l[7];const O="add"===f?"新增分类":"保存编辑";let v,N;return l[8]!==x||l[9]!==O?(v=s.jsxs("div",{className:"flex justify-end gap-3 flex-wrap",children:[k,s.jsx(r,{type:"primary",htmlType:"submit",loading:x,children:O})]}),l[8]=x,l[9]=O,l[10]=v):v=l[10],l[11]!==d||l[12]!==h||l[13]!==b||l[14]!==v?(N=s.jsx(s.Fragment,{children:s.jsxs(_,{form:h,autoComplete:"off",variant:"filled",initialValues:d,labelCol:C,onFinish:b,children:[S,w,v]})}),l[11]=d,l[12]=h,l[13]=b,l[14]=v,l[15]=N):N=l[15],N},A=t.memo(i=>{const l=e.c(20),{record:f,refresh:h}=i;let x;l[0]===Symbol.for("react.memo_cache_sentinel")?(x=[],l[0]=x):x=l[0];const[u,b]=t.useState(x);let _;l[1]!==f||l[2]!==h?(_=function(){d(1,b);const e=m.getState().user.token;setTimeout(()=>{c({url:n.deleteWebsiteCategory,token:e,data:{id:f.id}}).then(e=>{200===e.code&&h()}).finally(()=>{p(1,b)})},500)},l[1]=f,l[2]=h,l[3]=_):_=l[3];const g=_;let C,S,w,k,O,F,v;return l[4]===Symbol.for("react.memo_cache_sentinel")?(C={width:"44px"},l[4]=C):C=l[4],l[5]!==f||l[6]!==h?(S=s.jsx(r,{type:"link",size:"small",style:C,onClick:()=>{o.show(a,{title:"编辑分类",children:s.jsx(I,{editItem:f,refresh:h,type:"edit"})})},children:"编辑"}),l[5]=f,l[6]=h,l[7]=S):S=l[7],l[8]===Symbol.for("react.memo_cache_sentinel")?(w={width:"44px"},l[8]=w):w=l[8],l[9]!==u[1]?(k=u[1]?s.jsx(y,{}):"删除",l[9]=u[1],l[10]=k):k=l[10],l[11]!==u[1]||l[12]!==k?(O=s.jsx(r,{danger:!0,type:"link",size:"small",disabled:u[1],style:w,children:k}),l[11]=u[1],l[12]=k,l[13]=O):O=l[13],l[14]!==g||l[15]!==O?(F=s.jsx(j,{title:"是否确认删除？",onConfirm:g,children:O}),l[14]=g,l[15]=O,l[16]=F):F=l[16],l[17]!==S||l[18]!==F?(v=s.jsxs("div",{className:"flex flex-wrap",children:[S,F]}),l[17]=S,l[18]=F,l[19]=v):v=l[19],v});function M(){o.hide(a)}export{v as default};
