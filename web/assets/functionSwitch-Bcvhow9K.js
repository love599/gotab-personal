import{c as e,r as l,j as s,B as o,l as a,a as t,W as r,o as n,v as i,n as c,X as m}from"./requestIdleCallbackPolyfill-CVD_37F6.js";import{C as u}from"./contentLayout-BITNm175.js";import{F as f}from"./index-G59xOF6l.js";import{R as d}from"./index-D-PrQJP-.js";import{S as p}from"./index-Ds8dCkvV.js";import{R as h}from"./QuestionCircleOutlined-BSFc9XKj.js";import"./useForm-LHSdzXb2.js";import"./row-BgCuXjPe.js";import"./useBreakpoint-B9NKbWRZ.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./QuestionCircleOutlined-DSm95oJP.js";function b(){const b=e.c(25),[j]=f.useForm();let x;b[0]===Symbol.for("react.memo_cache_sentinel")?(x=[],b[0]=x):x=b[0];const[_,y]=l.useState(x);let S;b[1]!==j?(S=function(){a(0,y);const e=t.getState().user.token;r({url:n.getFunctionSwitch,token:e}).then(e=>{e.data&&(e.data?.cardPush||(e.data.cardPush="close"),e.data?.offlineToUse||(e.data.offlineToUse="open"),j.setFieldsValue(e.data))}).finally(()=>{i(0,y)})},b[1]=j,b[2]=S):S=b[2];const g=S;let v,w,q;b[3]!==g?(v=()=>{g()},b[3]=g,b[4]=v):v=b[4],b[5]===Symbol.for("react.memo_cache_sentinel")?(w=[],b[5]=w):w=b[5],l.useEffect(v,w),b[6]===Symbol.for("react.memo_cache_sentinel")?(q=function(e){a(1,y);const l=t.getState().user.token;c({url:n.updateFunctionSwitch,token:l,data:e}).finally(()=>{i(1,y)})},b[6]=q):q=b[6];const F=q;let P,N,k,T,C,G,I,U,L,B,O,Q,R;return b[7]===Symbol.for("react.memo_cache_sentinel")?(P=s.jsx(m,{type:"warning",description:s.jsxs(s.Fragment,{children:[s.jsx(h,{className:"mr-1"}),"管理员可通过该页面动态决定某配置的可用性，请注意，配置的变更是修改了 siteConfig.js 文件的内容，所以请不要在 web 服务器中缓存它，同时配置变更后页面需刷新才生效，不刷新将继续使用先前配置！"]}),className:"mb-4 p-1 px-3 text-xs font-normal w-full"}),b[7]=P):P=b[7],b[8]===Symbol.for("react.memo_cache_sentinel")?(N={cardPush:"close",offlineToUse:"open",sourceStoreFrom:"official",homePageLimit:"close"},b[8]=N):N=b[8],b[9]===Symbol.for("react.memo_cache_sentinel")?(k=[{required:!0,message:"请选择配置项的状态"}],b[9]=k):k=b[9],b[10]===Symbol.for("react.memo_cache_sentinel")?(T=s.jsx(f.Item,{name:"cardPush",label:"添加卡片时推送至资源库",required:!0,rules:k,children:s.jsx(d.Group,{options:[{label:"开启且默认推送",value:"open"},{label:"开启但不默认推送",value:"openNotPush"},{label:"关闭",value:"close"}]})}),b[10]=T):T=b[10],b[11]===Symbol.for("react.memo_cache_sentinel")?(C=[{required:!0,message:"请选择主页默认数据策略"}],b[11]=C):C=b[11],b[12]===Symbol.for("react.memo_cache_sentinel")?(G=s.jsx(f.Item,{name:"offlineToUse",label:"主页默认数据策略",required:!0,rules:C,children:s.jsx(d.Group,{options:[{label:"初始化一次后，被持久缓存（离线使用）",value:"open"},{label:"跟随管理员账户配置，持续获取最新默认数据",value:"close"}]})}),b[12]=G):G=b[12],b[13]===Symbol.for("react.memo_cache_sentinel")?(I=[{required:!0,message:"请选择资源库的数据来源"}],b[13]=I):I=b[13],b[14]===Symbol.for("react.memo_cache_sentinel")?(U=s.jsx(f.Item,{name:"sourceStoreFrom",label:"资源库数据来源",required:!0,rules:I,children:s.jsx(d.Group,{options:[{label:"GOTAB 官方资源库",value:"official"},{label:"本站自有资源库",value:"self"}]})}),b[14]=U):U=b[14],b[15]===Symbol.for("react.memo_cache_sentinel")?(L=[{required:!0,message:"请选择主页访问限制策略"}],b[15]=L):L=b[15],b[16]===Symbol.for("react.memo_cache_sentinel")?(B=s.jsx(f.Item,{name:"homePageLimit",label:"主页访问限制策略",required:!0,rules:L,children:s.jsx(d.Group,{options:[{label:"需登录后访问（将不支持离线使用）",value:"useLogin"},{label:"关闭",value:"close"}]})}),b[16]=B):B=b[16],b[17]!==_[1]?(O=s.jsx("div",{className:"w-full flex justify-center",children:s.jsx(o,{htmlType:"submit",type:"primary",className:"w-full max-w-64",loading:_[1],children:"保存配置"})}),b[17]=_[1],b[18]=O):O=b[18],b[19]!==j||b[20]!==O?(Q=s.jsxs(f,{onFinish:F,form:j,className:"px-3 w-full",initialValues:N,children:[T,G,U,B,O]}),b[19]=j,b[20]=O,b[21]=Q):Q=b[21],b[22]!==_[0]||b[23]!==Q?(R=s.jsxs(u,{children:[P,s.jsx("div",{className:"w-full",children:s.jsx(p,{spinning:_[0],children:Q})})]}),b[22]=_[0],b[23]=Q,b[24]=R):R=b[24],R}export{b as default};
