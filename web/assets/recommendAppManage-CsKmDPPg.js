import{c as e,an as t,F as r,r as s,j as i,w as l,av as n,B as a,aw as o,a0 as c,ap as d,aq as m,ay as h,E as x,N as f,az as p,ao as u,C as j,e as y,D as w,H as k,am as g}from"./main-CiqknhEy.js";import{r as _}from"./transformData-CbiEDs4Q.js";import{M as b,R as S}from"./myTable-DVY9BJh9.js";import{C}from"./contentLayout-DVo1Fb1g.js";import{R as A}from"./SortAscendingOutlined-B79f1KvU.js";import"./MoneyCollectOutlined-BekCTDGy.js";import"./MoneyCollectOutlined-4QlEwa2l.js";import"./index-zb9-48Tu.js";import"./AlipayOutlined-CItsZ4PN.js";import"./AlipayOutlined-tZM3mGx9.js";import"./SortAscendingOutlined-8bEGxkuH.js";function N(){const f=e.c(47),{key:p,refresh:u}=t(),[j]=r.useForm();let y;f[0]===Symbol.for("react.memo_cache_sentinel")?(y={},f[0]=y):y=f[0];const[w,k]=s.useState(y);let g,S,A,N,z,L,B,D,K,q;f[1]===Symbol.for("react.memo_cache_sentinel")?(g={title:"应用标题",key:"title",width:160,fixed:"left"},S={title:"状态",key:"status",width:120,render:R},A={title:"排序",key:"sort",width:80,render:M},N={title:"应用描述",key:"description",width:460},z={title:"图标",key:"icon",width:100,render:I},L={title:"链接",key:"link",width:120,render:O},B={title:"标签",width:120,render:F},D={title:"推荐人",key:"username",width:160,render:v},K={type:"time",title:"推荐时间",key:"createdTime",width:200},f[1]=g,f[2]=S,f[3]=A,f[4]=N,f[5]=z,f[6]=L,f[7]=B,f[8]=D,f[9]=K):(g=f[1],S=f[2],A=f[3],N=f[4],z=f[5],L=f[6],B=f[7],D=f[8],K=f[9]),f[10]!==u?(q=[g,S,A,N,z,L,B,D,K,{title:"操作",fixed:"right",width:120,render:(e,t)=>i.jsx(T,{record:t,refresh:u})}],f[10]=u,f[11]=q):q=f[11];const E=q;let H,P,U,V,X,Z,G,J,Q,W,Y,$,ee,te,re,se,ie;return f[12]!==j?(H=()=>{const e=j.getFieldsValue();e[Math.random()]=!0,k(_(e))},f[12]=j,f[13]=H):H=f[13],f[14]===Symbol.for("react.memo_cache_sentinel")?(P={gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gridAutoRows:"32px"},f[14]=P):P=f[14],f[15]===Symbol.for("react.memo_cache_sentinel")?(U=i.jsx(r.Item,{name:"title",children:i.jsx(l,{placeholder:"标题"})}),f[15]=U):U=f[15],f[16]===Symbol.for("react.memo_cache_sentinel")?(V=i.jsxs("div",{className:"gap-3 flex-wrap grid w-full mb-3",style:P,children:[U,i.jsx(r.Item,{name:"link",children:i.jsx(l,{placeholder:"链接"})})]}),f[16]=V):V=f[16],f[17]!==j?(X=()=>{j.submit()},f[17]=j,f[18]=X):X=f[18],f[19]===Symbol.for("react.memo_cache_sentinel")?(Z=i.jsx(n,{}),f[19]=Z):Z=f[19],f[20]!==X?(G=i.jsx(a,{type:"primary",onClick:X,icon:Z,children:"查询"}),f[20]=X,f[21]=G):G=f[21],f[22]!==j?(J=()=>{j.resetFields();const e={};e[Math.random()]=!0,k(e)},f[22]=j,f[23]=J):J=f[23],f[24]===Symbol.for("react.memo_cache_sentinel")?(Q=i.jsx(o,{}),f[24]=Q):Q=f[24],f[25]!==J?(W=i.jsx(a,{onClick:J,icon:Q,children:"重置"}),f[25]=J,f[26]=W):W=f[26],f[27]!==G||f[28]!==W?(Y=i.jsxs("div",{className:"flex flex-wrap gap-3",children:[G,W]}),f[27]=G,f[28]=W,f[29]=Y):Y=f[29],f[30]!==j||f[31]!==H||f[32]!==Y?($=i.jsxs(r,{className:"w-full",form:j,onFinish:H,children:[V,Y]}),f[30]=j,f[31]=H,f[32]=Y,f[33]=$):$=f[33],f[34]===Symbol.for("react.memo_cache_sentinel")?(ee=i.jsx(c,{className:"my-3"}),f[34]=ee):ee=f[34],f[35]!==u?(te=i.jsx("div",{className:"mb-3",children:i.jsx(a,{type:"primary",onClick:()=>{d.show(m,{title:"新增推荐",children:i.jsx(h,{refresh:u})})},children:"新增推荐"})}),f[35]=u,f[36]=te):te=f[36],f[37]!==w?(re={searchParams:w},f[37]=w,f[38]=re):re=f[38],f[39]!==E||f[40]!==p||f[41]!==re?(se=i.jsx(b,{columns:E,getListUrl:x.getAwaitingApprovalRecommendAppList,dataKey:"data.list",tableKey:p,params:re}),f[39]=E,f[40]=p,f[41]=re,f[42]=se):se=f[42],f[43]!==$||f[44]!==te||f[45]!==se?(ie=i.jsxs(C,{children:[$,ee,te,se]}),f[43]=$,f[44]=te,f[45]=se,f[46]=ie):ie=f[46],ie}function v(e){return i.jsx(f,{color:e?"geekblue":"red",bordered:!1,icon:i.jsx(u,{}),children:e||"已注销"})}function F(e,t){return i.jsx(f,{color:t.tagColor,children:t.tagText||"-"})}function O(e){return i.jsx(a,{type:"link",size:"small",onClick:()=>{e&&window.open(e,"_blank")},children:e||"-"})}function I(e,t){return e?i.jsx(p,{src:e,width:"auto",height:32,className:"p-1 rounded-lg",style:{backgroundColor:t.iconBackground},preview:{maskClassName:"rounded-lg"}}):"-"}function M(e){return i.jsx(f,{color:"gold",icon:i.jsx(A,{}),children:e||"-"})}function R(e){return i.jsx(f,{color:0===e?"blue":1===e?"green":"red",children:0===e?"待审核":1===e?"正常":"被驳回"})}const T=s.memo(t=>{const r=e.c(26),{record:l,refresh:n}=t;let o;r[0]===Symbol.for("react.memo_cache_sentinel")?(o=[],r[0]=o):o=r[0];const[c,h]=s.useState(o);let f;r[1]!==l||r[2]!==n?(f=function(){j(1,h);const e=y.getState().user.token;setTimeout(()=>{w({url:x.deleteRecommendApp,token:e,data:{id:l.id}}).then(e=>{200===e.code&&n()}).finally(()=>{k(1,h)})},500)},r[1]=l,r[2]=n,r[3]=f):f=r[3];const p=f;let u,_,b,C,A,N,v,F,O;return r[4]===Symbol.for("react.memo_cache_sentinel")?(u={width:"44px"},r[4]=u):u=r[4],r[5]!==l||r[6]!==n?(_=()=>{d.show(m,{title:"编辑推荐",children:i.jsx(z,{editItem:l,refresh:n})})},r[5]=l,r[6]=n,r[7]=_):_=r[7],r[8]!==c[0]?(b=c[0]?i.jsx(S,{}):"编辑",r[8]=c[0],r[9]=b):b=r[9],r[10]!==c[0]||r[11]!==_||r[12]!==b?(C=i.jsx(a,{type:"link",size:"small",disabled:c[0],style:u,onClick:_,children:b}),r[10]=c[0],r[11]=_,r[12]=b,r[13]=C):C=r[13],r[14]===Symbol.for("react.memo_cache_sentinel")?(A={width:"44px"},r[14]=A):A=r[14],r[15]!==c[1]?(N=c[1]?i.jsx(S,{}):"删除",r[15]=c[1],r[16]=N):N=r[16],r[17]!==c[1]||r[18]!==N?(v=i.jsx(a,{danger:!0,type:"link",size:"small",disabled:c[1],style:A,children:N}),r[17]=c[1],r[18]=N,r[19]=v):v=r[19],r[20]!==p||r[21]!==v?(F=i.jsx(g,{title:"是否确认删除该推荐？",onConfirm:p,children:v}),r[20]=p,r[21]=v,r[22]=F):F=r[22],r[23]!==C||r[24]!==F?(O=i.jsxs("div",{className:"flex flex-wrap",children:[C,F]}),r[23]=C,r[24]=F,r[25]=O):O=r[25],O}),z=t=>{const r=e.c(3),{editItem:s,refresh:l}=t;let n;return r[0]!==s||r[1]!==l?(n=i.jsx(i.Fragment,{children:i.jsx(h,{editItem:s,refresh:l,type:"edit"})}),r[0]=s,r[1]=l,r[2]=n):n=r[2],n};export{N as default};
