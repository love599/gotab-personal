import{r as e,I as t,u as s,e as a,V as r,Q as n,X as i,hE as o,Y as l,W as c,z as m,j as d,as as f,aA as h,ap as p,ck as u,hF as g,hG as j,c as x,i as b,F as D,a7 as y,df as w,hH as k,B as F,hI as N,hJ as v,hK as C,hL as I,hM as O,hN as S,hO as T,hP as P,cl as _,k as E}from"./main-C5oyJuBL.js";import{C as R,D as U,F as z,U as L}from"./UpCircleTwoTone-PTBIBltQ.js";function X(){return X=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},X.apply(this,arguments)}const q=(s,a)=>e.createElement(t,X({},s,{ref:a,icon:R})),A=e.forwardRef(q);function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},B.apply(this,arguments)}const G=(s,a)=>e.createElement(t,B({},s,{ref:a,icon:U})),H=e.forwardRef(G);function M(){return M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},M.apply(this,arguments)}const V=(s,a)=>e.createElement(t,M({},s,{ref:a,icon:z})),J=e.forwardRef(V);function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},K.apply(this,arguments)}const Q=(s,a)=>e.createElement(t,K({},s,{ref:a,icon:L})),W=e.forwardRef(Q);const Y=e.memo(function(t){const{item:h,className:p="",isFreeDrag:u}=t,g=s(),j=e.useCallback(()=>{const t=a.getState().appData.listData,s=a.getState().appData.freeDragListData,d=a.getState().swiper.activeIndex,f=r(h);if(f.id=n(),u){delete f.x,delete f.y;const a=t[d||0].id,n=i(r(t),a,f),p=o(r(s),h.id);e.startTransition(()=>{g(l(n)),g(c(p))}),m.success("卡片已切换至标准布局区域")}else{delete h.x,delete h.y;const a=r(s).concat([f]),n=o(r(t),h.id);e.startTransition(()=>{g(c(a)),g(l(n))}),m.success("卡片已切换至全屏自由拖拽")}},[h,u]);return d.jsx(d.Fragment,{children:h.id?d.jsx(f,{className:p,icon:u?d.jsx(H,{style:{transform:"scale(1.4)"},twoToneColor:"#d4380d"}):d.jsx(W,{style:{transform:"scale(1.4)"},twoToneColor:"#d4380d"}),onClick:e=>{e.stopPropagation(),e.preventDefault(),j()}}):null})});const $=e.memo(function(t){const{item:n,className:i="",isInfolder:m=!1,isFreeDrag:f=!1}=t,h=s();if(!n.id)return null;const x=(t="delete")=>{(t=>{const s=a.getState().appData.listData,i=a.getState().appData.freeDragListData,d=a.getState().card.deleteUseBlank;try{const a="release"===t;if(f){const t=o(r(i),n.id,a);e.startTransition(()=>{h(c(t))})}else{const t=d&&"blank"!==n.type&&!m?j(r(s),n.id,a):o(r(s),n.id,a);e.startTransition(()=>{h(l(t))})}}catch(p){}})(t)};return d.jsx("button",{onClick:e=>{e.stopPropagation(),"folder"===n.type?p.show(u,{title:"删除文件夹",children:d.jsx(g,{deleteHandle:x})}):x()},className:`close-icon-background cursor-pointer w-5 h-5 bg-red-500 hover:bg-red-600 active:bg-red-700 transition-all ${i}`,children:d.jsx("div",{className:"close bg-[#f2f2f2] after:bg-[#f2f2f2]"})})},(e,t)=>h(e.item,t.item)&&e.isFreeDrag===t.isFreeDrag&&e.isInfolder===t.isInfolder&&e.className===t.className);function Z(){return p.hide(u)}const ee=e.memo(function(e){const t=x.c(10),{editItem:n}=e,[i]=b(),o=s();let c;t[0]!==o||t[1]!==n?(c=e=>{const t=a.getState().appData.listData;try{const s={...n,...e},a=k(n.id,r(t),s);o(l(a)),m.success("编辑成功"),p.hide(u)}catch(s){m.error("编辑失败，请重试")}},t[0]=o,t[1]=n,t[2]=c):c=t[2];const f=c;let h,g,j,N;return t[3]===Symbol.for("react.memo_cache_sentinel")?(h=[{required:!0,message:"请选择卡片大小"}],t[3]=h):h=t[3],t[4]===Symbol.for("react.memo_cache_sentinel")?(g=d.jsx(D.Item,{required:!0,name:"size",label:"卡片大小",rules:h,children:d.jsx(y.Group,{options:w,className:"flex flex-wrap gap-3 mt-1"})}),t[4]=g):g=t[4],t[5]===Symbol.for("react.memo_cache_sentinel")?(j=d.jsxs("div",{className:"flex flex-wrap justify-end gap-3",children:[d.jsx(F,{onClick:Z,children:"取消"}),d.jsx(F,{type:"primary",htmlType:"submit",children:"确定"})]}),t[5]=j):j=t[5],t[6]!==n||t[7]!==i||t[8]!==f?(N=d.jsx(d.Fragment,{children:d.jsxs(D,{form:i,onFinish:f,initialValues:n,children:[g,j]})}),t[6]=n,t[7]=i,t[8]=f,t[9]=N):N=t[9],N}),te=e.memo(e=>{const t=x.c(6),{className:s,onClick:a}=e;let r,n,i;return t[0]===Symbol.for("react.memo_cache_sentinel")?(r=d.jsx(A,{style:{transform:"scale(1.35)"},twoToneColor:"#d4380d"}),t[0]=r):r=t[0],t[1]!==a?(n=e=>{e.stopPropagation(),e.preventDefault(),a()},t[1]=a,t[2]=n):n=t[2],t[3]!==s||t[4]!==n?(i=d.jsx(F,{size:"small",type:"text",icon:r,className:s,onClick:n}),t[3]=s,t[4]=n,t[5]=i):i=t[5],i});const se=e.memo(function(e){const t=x.c(49),{item:s,className:a,isFreeDrag:r}=e,n=void 0===a?"":a;let i;e:{switch(s.type){case"link":case"folder":{let e,a;t[0]!==r||t[1]!==s?(e=()=>{"link"===s.type?p.show(u,{title:"编辑卡片",children:d.jsx(T,{type:"edit",editItem:s,isFreeDrag:r}),width:760,height:533}):"folder"===s.type&&p.show(u,{title:"编辑文件夹",children:d.jsx(P,{editItem:s,isFreeDrag:r})})},t[0]=r,t[1]=s,t[2]=e):e=t[2],t[3]!==n||t[4]!==e?(a=d.jsx(te,{className:n,onClick:e}),t[3]=n,t[4]=e,t[5]=a):a=t[5],i=a;break e}case"blank":{let e,a;t[6]!==s?(e=()=>{p.show(u,{title:"编辑占位卡片",children:d.jsx(ee,{editItem:s})})},t[6]=s,t[7]=e):e=t[7],t[8]!==n||t[9]!==e?(a=d.jsx(te,{className:n,onClick:e}),t[8]=n,t[9]=e,t[10]=a):a=t[10],i=a;break e}case"clock":{let e,a;t[11]!==r||t[12]!==s?(e=()=>{p.show(u,{title:"编辑时钟",children:d.jsx(S,{editItem:s,isFreeDrag:r})})},t[11]=r,t[12]=s,t[13]=e):e=t[13],t[14]!==n||t[15]!==e?(a=d.jsx(te,{className:n,onClick:e}),t[14]=n,t[15]=e,t[16]=a):a=t[16],i=a;break e}case"fakeAssistant":{let e,a;t[17]!==r||t[18]!==s?(e=()=>{p.show(u,{title:"编辑伪装页",children:d.jsx(O,{editItem:s,isFreeDrag:r})})},t[17]=r,t[18]=s,t[19]=e):e=t[19],t[20]!==n||t[21]!==e?(a=d.jsx(te,{className:n,onClick:e}),t[20]=n,t[21]=e,t[22]=a):a=t[22],i=a;break e}case"hotEvents":{let e,a;t[23]!==r||t[24]!==s?(e=()=>{p.show(u,{title:"编辑热点榜单",children:d.jsx(I,{editItem:s,isFreeDrag:r})})},t[23]=r,t[24]=s,t[25]=e):e=t[25],t[26]!==n||t[27]!==e?(a=d.jsx(te,{className:n,onClick:e}),t[26]=n,t[27]=e,t[28]=a):a=t[28],i=a;break e}case"weather":{let e,a;t[29]!==r||t[30]!==s?(e=()=>{p.show(u,{title:"编辑天气",children:d.jsx(C,{editItem:s,isFreeDrag:r})})},t[29]=r,t[30]=s,t[31]=e):e=t[31],t[32]!==n||t[33]!==e?(a=d.jsx(te,{className:n,onClick:e}),t[32]=n,t[33]=e,t[34]=a):a=t[34],i=a;break e}case"countDownDay":{let e,a;t[35]!==r||t[36]!==s?(e=()=>{p.show(u,{title:"编辑倒数日",children:d.jsx(v,{editItem:s,isFreeDrag:r}),overflowX:"visible",width:640})},t[35]=r,t[36]=s,t[37]=e):e=t[37],t[38]!==n||t[39]!==e?(a=d.jsx(te,{className:n,onClick:e}),t[38]=n,t[39]=e,t[40]=a):a=t[40],i=a;break e}case"countDownDays":{let e,a;t[41]!==r||t[42]!==s?(e=()=>{p.show(u,{title:"编辑组件",children:d.jsx(N,{editItem:s,isFreeDrag:r}),overflowX:"visible"})},t[41]=r,t[42]=s,t[43]=e):e=t[43],t[44]!==n||t[45]!==e?(a=d.jsx(te,{className:n,onClick:e}),t[44]=n,t[45]=e,t[46]=a):a=t[46],i=a;break e}}i=void 0}const o=i;let l;return t[47]!==o?(l=d.jsx(d.Fragment,{children:o}),t[47]=o,t[48]=l):l=t[48],l},(e,t)=>h(e.item,t.item)&&e.className===t.className&&e.isFreeDrag===t.isFreeDrag);const ae=e.memo(function(t){const{item:s,className:a="",isFreeDrag:r}=t,n=e.useMemo(()=>{if("folder"===s.type)return d.jsx(f,{className:a,icon:d.jsx(J,{style:{transform:"scale(1.4)"},twoToneColor:"#d4380d"}),onClick:e=>{e.stopPropagation(),e.preventDefault(),p.show(_,{folderItem:s,openFrom:"click",isFreeDrag:r})}})},[s.type,s,a]);return d.jsx(d.Fragment,{children:n})},(e,t)=>h(e.item,t.item)&&e.isFreeDrag===t.isFreeDrag&&e.className===t.className),re=e.memo(e=>{const t=x.c(14),{item:s,showCombindShadow:a,onlyShow:r,isInFolder:n,isFreeDrag:i}=e;let o;if(!E(ne)||"addCard"===s.type||a||r)o=null;else{let e,a,r,l,c;t[0]!==i||t[1]!==n||t[2]!==s?(e=d.jsx($,{item:s,isInfolder:n,className:"card-handle-button absolute -top-1 -right-1",isFreeDrag:i}),t[0]=i,t[1]=n,t[2]=s,t[3]=e):e=t[3],t[4]!==i||t[5]!==s?(a=d.jsx(se,{item:s,className:"card-handle-button absolute -bottom-[6px] -right-[6px]",isFreeDrag:i}),r=d.jsx(ae,{item:s,className:"card-handle-button absolute -bottom-[6px] -left-[6px]",isFreeDrag:i}),l="blank"!==s.type&&d.jsx(Y,{item:s,className:"card-handle-button absolute -top-[6px] -left-[6px]",isFreeDrag:i}),t[4]=i,t[5]=s,t[6]=a,t[7]=r,t[8]=l):(a=t[6],r=t[7],l=t[8]),t[9]!==e||t[10]!==a||t[11]!==r||t[12]!==l?(c=d.jsxs(d.Fragment,{children:[e,a,r,l]}),t[9]=e,t[10]=a,t[11]=r,t[12]=l,t[13]=c):c=t[13],o=c}return o},(e,t)=>h(e,t));function ne(e){return e.stateUtils.unlockEdit}export{re as default};
