import{c as e,r as l,j as s,B as o,k as a,a as t,W as r,n,q as i,l as c,X as m}from"./requestIdleCallbackPolyfill-CRtcYtqz.js";import{C as u}from"./contentLayout-BpLnk-YD.js";import{F as f}from"./index-BGbaREI1.js";import{R as d}from"./index-DzNwoECr.js";import{S as h}from"./index-bQRXjpSB.js";import{R as p}from"./QuestionCircleOutlined-BsueyuX1.js";import"./useForm-Au5dOVxA.js";import"./row-pVBpgFkh.js";import"./useBreakpoint-E2sLeglb.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./QuestionCircleOutlined-DSm95oJP.js";function j(){const j=e.c(25),[b]=f.useForm();let x;j[0]===Symbol.for("react.memo_cache_sentinel")?(x=[],j[0]=x):x=j[0];const[_,y]=l.useState(x);let S;j[1]!==b?(S=function(){a(0,y);const e=t.getState().user.token;r({url:n.getFunctionSwitch,token:e}).then(e=>{e.data&&(e.data?.cardPush||(e.data.cardPush="close"),e.data?.offlineToUse||(e.data.offlineToUse="open"),b.setFieldsValue(e.data))}).finally(()=>{i(0,y)})},j[1]=b,j[2]=S):S=j[2];const g=S;let v,w,q;j[3]!==g?(v=()=>{g()},j[3]=g,j[4]=v):v=j[4],j[5]===Symbol.for("react.memo_cache_sentinel")?(w=[],j[5]=w):w=j[5],l.useEffect(v,w),j[6]===Symbol.for("react.memo_cache_sentinel")?(q=function(e){a(1,y);const l=t.getState().user.token;c({url:n.updateFunctionSwitch,token:l,data:e}).finally(()=>{i(1,y)})},j[6]=q):q=j[6];const F=q;let P,k,N,T,C,G,I,U,L,B,O,Q,R;return j[7]===Symbol.for("react.memo_cache_sentinel")?(P=s.jsx(m,{type:"warning",description:s.jsxs(s.Fragment,{children:[s.jsx(p,{className:"mr-1"}),"管理员可通过该页面动态决定某配置的可用性，请注意，配置的变更是修改了 siteConfig.js 文件的内容，所以请不要在 web 服务器中缓存它，同时配置变更后页面需刷新才生效，不刷新将继续使用先前配置！"]}),className:"mb-4 p-1 px-3 text-xs font-normal w-full"}),j[7]=P):P=j[7],j[8]===Symbol.for("react.memo_cache_sentinel")?(k={cardPush:"close",offlineToUse:"open",sourceStoreFrom:"official",homePageLimit:"close"},j[8]=k):k=j[8],j[9]===Symbol.for("react.memo_cache_sentinel")?(N=[{required:!0,message:"请选择配置项的状态"}],j[9]=N):N=j[9],j[10]===Symbol.for("react.memo_cache_sentinel")?(T=s.jsx(f.Item,{name:"cardPush",label:"添加卡片时推送至资源库",required:!0,rules:N,children:s.jsx(d.Group,{options:[{label:"开启且默认推送",value:"open"},{label:"开启但不默认推送",value:"openNotPush"},{label:"关闭",value:"close"}]})}),j[10]=T):T=j[10],j[11]===Symbol.for("react.memo_cache_sentinel")?(C=[{required:!0,message:"请选择主页默认数据策略"}],j[11]=C):C=j[11],j[12]===Symbol.for("react.memo_cache_sentinel")?(G=s.jsx(f.Item,{name:"offlineToUse",label:"主页默认数据策略",required:!0,rules:C,children:s.jsx(d.Group,{options:[{label:"初始化一次后，被持久缓存（离线使用）",value:"open"},{label:"跟随管理员账户配置，持续获取最新默认数据",value:"close"}]})}),j[12]=G):G=j[12],j[13]===Symbol.for("react.memo_cache_sentinel")?(I=[{required:!0,message:"请选择资源库的数据来源"}],j[13]=I):I=j[13],j[14]===Symbol.for("react.memo_cache_sentinel")?(U=s.jsx(f.Item,{name:"sourceStoreFrom",label:"资源库数据来源",required:!0,rules:I,children:s.jsx(d.Group,{options:[{label:"GOTAB 官方资源库",value:"official"},{label:"本站自有资源库",value:"self"}]})}),j[14]=U):U=j[14],j[15]===Symbol.for("react.memo_cache_sentinel")?(L=[{required:!0,message:"请选择主页访问限制策略"}],j[15]=L):L=j[15],j[16]===Symbol.for("react.memo_cache_sentinel")?(B=s.jsx(f.Item,{name:"homePageLimit",label:"主页访问限制策略",required:!0,rules:L,children:s.jsx(d.Group,{options:[{label:"需登录后访问（将不支持离线使用）",value:"useLogin"},{label:"关闭",value:"close"}]})}),j[16]=B):B=j[16],j[17]!==_[1]?(O=s.jsx("div",{className:"w-full flex justify-center",children:s.jsx(o,{htmlType:"submit",type:"primary",className:"w-full max-w-64",loading:_[1],children:"保存配置"})}),j[17]=_[1],j[18]=O):O=j[18],j[19]!==b||j[20]!==O?(Q=s.jsxs(f,{onFinish:F,form:b,className:"px-3 w-full",initialValues:k,children:[T,G,U,B,O]}),j[19]=b,j[20]=O,j[21]=Q):Q=j[21],j[22]!==_[0]||j[23]!==Q?(R=s.jsxs(u,{children:[P,s.jsx("div",{className:"w-full",children:s.jsx(h,{spinning:_[0],children:Q})})]}),j[22]=_[0],j[23]=Q,j[24]=R):R=j[24],R}export{j as default};
