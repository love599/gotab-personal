import{c as e,F as a,r as l,j as s,a7 as o,B as t,n,C as r,e as c,a8 as i,H as m,D as u,a9 as f,O as d,E as h}from"./main-DoQmQ3rA.js";import{C as b}from"./contentLayout-DmA4VjSS.js";function p(){const p=e.c(25),[_]=a.useForm();let x;p[0]===Symbol.for("react.memo_cache_sentinel")?(x=[],p[0]=x):x=p[0];const[j,y]=l.useState(x);let S;p[1]!==_?(S=function(){r(0,y);const e=c.getState().user.token;i({url:h.getFunctionSwitch,token:e}).then(e=>{e.data&&(e.data?.cardPush||(e.data.cardPush="close"),e.data?.offlineToUse||(e.data.offlineToUse="open"),_.setFieldsValue(e.data))}).finally(()=>{m(0,y)})},p[1]=_,p[2]=S):S=p[2];const g=S;let v,w,F;p[3]!==g?(v=()=>{g()},p[3]=g,p[4]=v):v=p[4],p[5]===Symbol.for("react.memo_cache_sentinel")?(w=[],p[5]=w):w=p[5],l.useEffect(v,w),p[6]===Symbol.for("react.memo_cache_sentinel")?(F=function(e){r(1,y);const a=c.getState().user.token;u({url:h.updateFunctionSwitch,token:a,data:e}).finally(()=>{m(1,y)})},p[6]=F):F=p[6];const q=F;let N,P,T,G,k,I,L,U,C,B,E,O,V;return p[7]===Symbol.for("react.memo_cache_sentinel")?(N=s.jsx(f,{type:"warning",description:s.jsxs(s.Fragment,{children:[s.jsx(d,{className:"mr-1"}),"管理员可通过该页面动态决定某配置的可用性，请注意，配置的变更是修改了 siteConfig.js 文件的内容，所以请不要在 web 服务器中缓存它，同时配置变更后页面需刷新才生效，不刷新将继续使用先前配置！"]}),className:"mb-4 p-1 px-3 text-xs font-normal w-full"}),p[7]=N):N=p[7],p[8]===Symbol.for("react.memo_cache_sentinel")?(P={cardPush:"close",offlineToUse:"open",sourceStoreFrom:"official",homePageLimit:"close"},p[8]=P):P=p[8],p[9]===Symbol.for("react.memo_cache_sentinel")?(T=[{required:!0,message:"请选择配置项的状态"}],p[9]=T):T=p[9],p[10]===Symbol.for("react.memo_cache_sentinel")?(G=s.jsx(a.Item,{name:"cardPush",label:"添加卡片时推送至资源库",required:!0,rules:T,children:s.jsx(o.Group,{options:[{label:"开启且默认推送",value:"open"},{label:"开启但不默认推送",value:"openNotPush"},{label:"关闭",value:"close"}]})}),p[10]=G):G=p[10],p[11]===Symbol.for("react.memo_cache_sentinel")?(k=[{required:!0,message:"请选择主页默认数据策略"}],p[11]=k):k=p[11],p[12]===Symbol.for("react.memo_cache_sentinel")?(I=s.jsx(a.Item,{name:"offlineToUse",label:"主页默认数据策略",required:!0,rules:k,children:s.jsx(o.Group,{options:[{label:"初始化一次后，被持久缓存（离线使用）",value:"open"},{label:"跟随管理员账户配置，持续获取最新默认数据",value:"close"}]})}),p[12]=I):I=p[12],p[13]===Symbol.for("react.memo_cache_sentinel")?(L=[{required:!0,message:"请选择资源库的数据来源"}],p[13]=L):L=p[13],p[14]===Symbol.for("react.memo_cache_sentinel")?(U=s.jsx(a.Item,{name:"sourceStoreFrom",label:"资源库数据来源",required:!0,rules:L,children:s.jsx(o.Group,{options:[{label:"GOTAB 官方资源库",value:"official"},{label:"本站自有资源库",value:"self"}]})}),p[14]=U):U=p[14],p[15]===Symbol.for("react.memo_cache_sentinel")?(C=[{required:!0,message:"请选择主页访问限制策略"}],p[15]=C):C=p[15],p[16]===Symbol.for("react.memo_cache_sentinel")?(B=s.jsx(a.Item,{name:"homePageLimit",label:"主页访问限制策略",required:!0,rules:C,children:s.jsx(o.Group,{options:[{label:"需登录后访问（将不支持离线使用）",value:"useLogin"},{label:"关闭",value:"close"}]})}),p[16]=B):B=p[16],p[17]!==j[1]?(E=s.jsx("div",{className:"w-full flex justify-center",children:s.jsx(t,{htmlType:"submit",type:"primary",className:"w-full max-w-64",loading:j[1],children:"保存配置"})}),p[17]=j[1],p[18]=E):E=p[18],p[19]!==_||p[20]!==E?(O=s.jsxs(a,{onFinish:q,form:_,className:"px-3 w-full",initialValues:P,children:[G,I,U,B,E]}),p[19]=_,p[20]=E,p[21]=O):O=p[21],p[22]!==j[0]||p[23]!==O?(V=s.jsxs(b,{children:[N,s.jsx("div",{className:"w-full",children:s.jsx(n,{spinning:j[0],children:O})})]}),p[22]=j[0],p[23]=O,p[24]=V):V=p[24],V}export{p as default};
