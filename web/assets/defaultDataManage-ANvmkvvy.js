import{r as e,I as t,c as a,an as n,j as s,e as l,D as r,B as i,am as o,aa as c,O as d,a0 as m,E as f,N as u,ao as j,C as h,H as x}from"./main-B_h69F6u.js";import{M as y,R as p}from"./myTable-BvVRYsPR.js";import{C as _}from"./contentLayout-CsifLihB.js";import{R as b}from"./ReloadOutlined-BzTjOLJF.js";import{C as g}from"./ClearOutlined-CT7898ko.js";import"./transformData-DIunLHGi.js";import"./MoneyCollectOutlined-c4wPWSqm.js";import"./MoneyCollectOutlined-4QlEwa2l.js";import"./index-X6TwNYn8.js";import"./AlipayOutlined-DVgcxLOA.js";import"./AlipayOutlined-tZM3mGx9.js";function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},k.apply(this,arguments)}const S=(a,n)=>e.createElement(t,k({},a,{ref:n,icon:g})),w=e.forwardRef(S);function D(){const t=a.c(27),{key:u,refresh:j}=n(),[h,x]=e.useState(!1);let p,g,k,S;t[0]===Symbol.for("react.memo_cache_sentinel")?(p={title:"用户名",key:"username",width:160,fixed:"left",render:C},g={title:"状态",key:"deleted_at",width:80,render:O},k={type:"time",title:"更新时间",key:"updated_at",width:200},t[0]=p,t[1]=g,t[2]=k):(p=t[0],g=t[1],k=t[2]),t[3]!==j?(S=[p,g,k,{title:"操作",fixed:"right",width:120,render:(e,t)=>s.jsx(v,{record:t,refresh:j})}],t[3]=j,t[4]=S):S=t[4];const D=S;let N;t[5]!==j?(N=function(){x(!0);const e=l.getState().user.token;r({url:f.clearDefaultData,token:e}).then(e=>{200===e.code&&j()}).finally(()=>{x(!1)})},t[5]=j,t[6]=N):N=t[6];const R=N;let T,L,M,z,A,E,K,B,F,H;return t[7]===Symbol.for("react.memo_cache_sentinel")?(T=s.jsx(b,{}),t[7]=T):T=t[7],t[8]!==j?(L=s.jsx(i,{type:"primary",icon:T,onClick:()=>{j()},children:"刷新列表"}),t[8]=j,t[9]=L):L=t[9],t[10]===Symbol.for("react.memo_cache_sentinel")?(M=s.jsx(w,{}),t[10]=M):M=t[10],t[11]!==h?(z=s.jsx(i,{variant:"filled",color:"danger",icon:M,loading:h,children:"清理数据（只保留 10 条）"}),t[11]=h,t[12]=z):z=t[12],t[13]!==R||t[14]!==z?(A=s.jsx(o,{title:"是否确认清理？",onConfirm:R,children:z}),t[13]=R,t[14]=z,t[15]=A):A=t[15],t[16]!==L||t[17]!==A?(E=s.jsxs("div",{className:"flex gap-3 flex-wrap",children:[L,A]}),t[16]=L,t[17]=A,t[18]=E):E=t[18],t[19]===Symbol.for("react.memo_cache_sentinel")?(K=s.jsx(c,{type:"warning",description:s.jsxs(s.Fragment,{children:[s.jsx(d,{className:"mr-1"}),"默认数据为最新的启用数据，且数据会随着管理员在主页设置默认主页数据而更新！管理员保存新的默认数据后，所有先前启用数据均会禁用！"]}),className:"mt-3 p-1 px-3 text-xs font-normal w-full"}),B=s.jsx(m,{className:"my-3"}),t[19]=K,t[20]=B):(K=t[19],B=t[20]),t[21]!==D||t[22]!==u?(F=s.jsx(y,{columns:D,getListUrl:f.getDefaultDataList,dataKey:"data.list",tableKey:u}),t[21]=D,t[22]=u,t[23]=F):F=t[23],t[24]!==E||t[25]!==F?(H=s.jsxs(_,{children:[E,K,B,F]}),t[24]=E,t[25]=F,t[26]=H):H=t[26],H}function O(e){return s.jsx(u,{color:e?"red":"green",children:e?"禁用":"启用"})}function C(e){return s.jsx(u,{color:e?"geekblue":"red",bordered:!1,icon:s.jsx(j,{}),children:e||"已注销"})}const v=e.memo(t=>{const n=a.c(33),{record:c,refresh:d}=t;let m;n[0]===Symbol.for("react.memo_cache_sentinel")?(m=[],n[0]=m):m=n[0];const[u,j]=e.useState(m);let y;n[1]!==c.id||n[2]!==d?(y=function(){h(0,j);const e=l.getState().user.token;setTimeout(()=>{r({url:f.enableDefaultData,token:e,data:{id:c.id}}).then(e=>{200===e.code&&d()}).finally(()=>{x(0,j)})},500)},n[1]=c.id,n[2]=d,n[3]=y):y=n[3];const _=y;let b;n[4]!==c.id||n[5]!==d?(b=function(){h(0,j);const e=l.getState().user.token;setTimeout(()=>{r({url:f.disableDefaultData,token:e,data:{id:c.id}}).then(e=>{200===e.code&&d()}).finally(()=>{x(0,j)})},500)},n[4]=c.id,n[5]=d,n[6]=b):b=n[6];const g=b;let k;n[7]!==c.id||n[8]!==d?(k=function(){h(1,j);const e=l.getState().user.token;setTimeout(()=>{r({url:f.deleteDefaultData,token:e,data:{id:c.id}}).then(e=>{200===e.code&&d()}).finally(()=>{x(1,j)})},500)},n[7]=c.id,n[8]=d,n[9]=k):k=n[9];const S=k,w=c.deleted_at?"是否确认恢复？":"是否确认禁用？",D=c.deleted_at?_:g;let O,C,v,N,R,T,L,M,z;return n[10]===Symbol.for("react.memo_cache_sentinel")?(O={width:"44px"},n[10]=O):O=n[10],n[11]!==u[0]||n[12]!==c.deleted_at?(C=u[0]?s.jsx(p,{}):c.deleted_at?"恢复":"禁用",n[11]=u[0],n[12]=c.deleted_at,n[13]=C):C=n[13],n[14]!==u[0]||n[15]!==C?(v=s.jsx(i,{type:"link",size:"small",disabled:u[0],style:O,children:C}),n[14]=u[0],n[15]=C,n[16]=v):v=n[16],n[17]!==w||n[18]!==D||n[19]!==v?(N=s.jsx(o,{title:w,onConfirm:D,children:v}),n[17]=w,n[18]=D,n[19]=v,n[20]=N):N=n[20],n[21]===Symbol.for("react.memo_cache_sentinel")?(R={width:"44px"},n[21]=R):R=n[21],n[22]!==u[1]?(T=u[1]?s.jsx(p,{}):"删除",n[22]=u[1],n[23]=T):T=n[23],n[24]!==u[1]||n[25]!==T?(L=s.jsx(i,{danger:!0,type:"link",size:"small",disabled:u[1],style:R,children:T}),n[24]=u[1],n[25]=T,n[26]=L):L=n[26],n[27]!==S||n[28]!==L?(M=s.jsx(o,{title:"是否确认删除？",onConfirm:S,children:L}),n[27]=S,n[28]=L,n[29]=M):M=n[29],n[30]!==M||n[31]!==N?(z=s.jsxs("div",{className:"flex flex-wrap",children:[N,M]}),n[30]=M,n[31]=N,n[32]=z):z=n[32],z});export{D as default};
