import{c as e,u as t,h as i,r as s,W as r,o as l,a5 as o,a6 as n,j as a,B as c,F as m,k as d,l as u,n as p,v as f,S as h,V as j,a2 as y}from"./requestIdleCallbackPolyfill-CVD_37F6.js";import{u as x}from"./useFresh-Cc-yG2bB.js";import{M as b,R as k}from"./myTable-D037XonQ.js";import{C as g}from"./contentLayout-BITNm175.js";import{R as _}from"./ReloadOutlined-nvodtszL.js";import{F as w}from"./index-G59xOF6l.js";import{S as C}from"./index-DcfMndBI.js";import{R as S}from"./index-D-PrQJP-.js";import"./index-CHK4hTbV.js";import"./LeftOutlined-D9Sp279J.js";import"./MailOutlined-CaUvQpRQ.js";import"./Overflow-D57B_Btp.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./transformData-B4JHyB6R.js";import"./assets-B8Bi78Vh.js";import"./index-li3JoM_Y.js";import"./MoneyCollectOutlined-BRXH_FUZ.js";import"./MoneyCollectOutlined-4QlEwa2l.js";import"./index-DfF1xqkc.js";import"./CaretDownOutlined-DcidQ0ah.js";import"./FolderOpenOutlined-BNhgQTIu.js";import"./FolderOutlined-k9jtXdfw.js";import"./styleChecker-BJxqisLG.js";import"./AlipayOutlined-CYiD0G4b.js";import"./AlipayOutlined-tZM3mGx9.js";import"./useEffectOnce-CLWJY0ZK.js";import"./useBreakpoint-B9NKbWRZ.js";import"./getAllowClear-CG1WH6yx.js";import"./index-Ds8dCkvV.js";import"./Input-DNytczHm.js";import"./ReloadOutlined-B00s2TmV.js";import"./useForm-LHSdzXb2.js";import"./row-BgCuXjPe.js";import"./QuestionCircleOutlined-DSm95oJP.js";function O(){const d=e.c(27),{key:u,refresh:p}=x(),f=t(),h=i(F);let j;d[0]!==h||d[1]!==f?(j=function(){r({url:l.getCategoryListWithAll}).then(e=>{if(200===e.code&&e.data){const t=e.data.map(q);o(t,h)||f(n(t))}})},d[0]=h,d[1]=f,d[2]=j):j=d[2];const y=j;let k,w,C,S,O,N,W,A,T,R;d[3]!==h.length||d[4]!==y?(k=()=>{0===h.length&&y()},d[3]=h.length,d[4]=y,d[5]=k):k=d[5],d[6]===Symbol.for("react.memo_cache_sentinel")?(w=[],d[6]=w):w=d[6],s.useEffect(k,w),d[7]===Symbol.for("react.memo_cache_sentinel")?(C={title:"网站名称",key:"title",width:200,fixed:"left"},S={title:"网站描述",key:"description",width:450},O={title:"图标",key:"icon",width:140,render:I},N={title:"链接",key:"url",width:120,render:v},W={title:"所属分类",key:"categoryName",width:120},A={title:"提交人",key:"username",width:160},T={type:"time",title:"提交时间",key:"createdTime",width:200},d[7]=C,d[8]=S,d[9]=O,d[10]=N,d[11]=W,d[12]=A,d[13]=T):(C=d[7],S=d[8],O=d[9],N=d[10],W=d[11],A=d[12],T=d[13]),d[14]!==p?(R=[C,S,O,N,W,A,T,{title:"操作",fixed:"right",width:180,render:(e,t)=>a.jsx(L,{record:t,refresh:p})}],d[14]=p,d[15]=R):R=d[15];const z=R;let M,U,B,D,E,K;return d[16]===Symbol.for("react.memo_cache_sentinel")?(M=a.jsx(_,{}),d[16]=M):M=d[16],d[17]!==p?(U=a.jsx(c,{type:"primary",icon:M,onClick:()=>{p()},children:"刷新列表"}),d[17]=p,d[18]=U):U=d[18],d[19]===Symbol.for("react.memo_cache_sentinel")?(B=a.jsx(m,{className:"my-3"}),d[19]=B):B=d[19],d[20]===Symbol.for("react.memo_cache_sentinel")?(D={searchParams:{status:0}},d[20]=D):D=d[20],d[21]!==z||d[22]!==u?(E=a.jsx(b,{columns:z,getListUrl:l.getAwaitingApprovalWebsiteSourceList,dataKey:"data.list",tableKey:u,params:D}),d[21]=z,d[22]=u,d[23]=E):E=d[23],d[24]!==U||d[25]!==E?(K=a.jsxs(g,{children:[U,B,E]}),d[24]=U,d[25]=E,d[26]=K):K=d[26],K}function v(e){return a.jsx(c,{type:"link",size:"small",onClick:()=>{e&&window.open(e,"_blank")},children:e||"-"})}function I(e,t){return e?a.jsxs("div",{className:"p-1 rounded-sm flex items-center gap-2 w-[110px]",style:{backgroundColor:t.backgroundColor,color:t.fontColor},children:[a.jsx("img",{src:d(e),className:"rounded-sm",style:{width:"32px",height:"32px"}}),a.jsx("p",{className:"text-xs font-semibold p-ellipsis w-12",children:t.title})]}):"-"}function q(e){return{label:e.label,key:e.id}}function F(e){return e.stateUtils.categoryList}const L=s.memo(t=>{const r=e.c(38),{record:o,refresh:n}=t;let m;r[0]===Symbol.for("react.memo_cache_sentinel")?(m=[],r[0]=m):m=r[0];const[d,x]=s.useState(m),b=i(W);let g;r[1]!==o||r[2]!==n||r[3]!==b?(g=function(e,t){u(t,x),setTimeout(()=>{p({url:"reject"===e?l.rejectWebsiteInfo:l.deleteWebsiteInfo,token:b,data:{id:o.id}}).then(e=>{200===e.code&&n()}).finally(()=>{f(t,x)})},500)},r[1]=o,r[2]=n,r[3]=b,r[4]=g):g=r[4];const _=g;let w,C,S,O;r[5]===Symbol.for("react.memo_cache_sentinel")?(w={width:"44px"},r[5]=w):w=r[5],r[6]!==o||r[7]!==n?(C=()=>{h.show(j,{title:"审核通过",children:a.jsx(N,{record:o,refresh:n})})},r[6]=o,r[7]=n,r[8]=C):C=r[8],r[9]!==d[0]||r[10]!==C?(S=a.jsx(c,{type:"link",size:"small",disabled:d[0],style:w,onClick:C,children:"通过"}),r[9]=d[0],r[10]=C,r[11]=S):S=r[11],r[12]!==_?(O=()=>{_("reject",1)},r[12]=_,r[13]=O):O=r[13];const v=d[1]||d[2];let I,q,F,L,A;r[14]===Symbol.for("react.memo_cache_sentinel")?(I={width:"44px"},r[14]=I):I=r[14],r[15]!==d[1]?(q=d[1]?a.jsx(k,{}):"驳回",r[15]=d[1],r[16]=q):q=r[16],r[17]!==v||r[18]!==q?(F=a.jsx(c,{danger:!0,type:"link",size:"small",disabled:v,style:I,children:q}),r[17]=v,r[18]=q,r[19]=F):F=r[19],r[20]!==O||r[21]!==F?(L=a.jsx(y,{title:"是否确认驳回申请？",onConfirm:O,children:F}),r[20]=O,r[21]=F,r[22]=L):L=r[22],r[23]!==_?(A=()=>{_("delete",2)},r[23]=_,r[24]=A):A=r[24];const T=d[1]||d[2];let R,z,M,U,B;return r[25]===Symbol.for("react.memo_cache_sentinel")?(R={width:"44px"},r[25]=R):R=r[25],r[26]!==d[2]?(z=d[2]?a.jsx(k,{}):"删除",r[26]=d[2],r[27]=z):z=r[27],r[28]!==T||r[29]!==z?(M=a.jsx(c,{danger:!0,type:"link",size:"small",disabled:T,style:R,children:z}),r[28]=T,r[29]=z,r[30]=M):M=r[30],r[31]!==A||r[32]!==M?(U=a.jsx(y,{title:"是否确认删除该申请？",onConfirm:A,children:M}),r[31]=A,r[32]=M,r[33]=U):U=r[33],r[34]!==L||r[35]!==U||r[36]!==S?(B=a.jsxs("div",{className:"flex flex-wrap",children:[S,L,U]}),r[34]=L,r[35]=U,r[36]=S,r[37]=B):B=r[37],B}),N=t=>{const r=e.c(23),{record:o,refresh:n}=t,m=i(A),d=i(T),[u,f]=s.useState(!1);let h,j;r[0]!==m?(j=m.filter(R).map(z),r[0]=m,r[1]=j):j=r[1],h=j;const y=h;let x;r[2]!==o.id||r[3]!==n||r[4]!==d?(x=function(e){f(!0),setTimeout(()=>{p({url:l.approveWebsiteInfo,token:d,data:{id:o.id,...e}}).then(e=>{200===e.code&&(n(),setTimeout(M,0))}).finally(()=>{f(!1)})},500)},r[2]=o.id,r[3]=n,r[4]=d,r[5]=x):x=r[5];const b=x,k=o.categoryId||void 0;let g,_,O,v,I,q,F,L,N;return r[6]!==k?(g={categoryId:k,hidden:!1},r[6]=k,r[7]=g):g=r[7],r[8]!==b?(_=e=>{b(e)},r[8]=b,r[9]=_):_=r[9],r[10]===Symbol.for("react.memo_cache_sentinel")?(O=[{required:!0,message:"请选择网站所属分类"}],r[10]=O):O=r[10],r[11]!==y?(v=a.jsx(w.Item,{label:"网站分类",name:"categoryId",required:!0,rules:O,children:a.jsx(C,{options:y,allowClear:!0,placeholder:"请选择网站所属分类"})}),r[11]=y,r[12]=v):v=r[12],r[13]===Symbol.for("react.memo_cache_sentinel")?(I=[{required:!0,message:"请选择是否隐藏在资源库"}],r[13]=I):I=r[13],r[14]===Symbol.for("react.memo_cache_sentinel")?(q=a.jsx(w.Item,{label:"是否隐藏",name:"hidden",required:!0,rules:I,children:a.jsx(S.Group,{options:[{label:"显示",value:!1},{label:"隐藏",value:!0}]})}),r[14]=q):q=r[14],r[15]===Symbol.for("react.memo_cache_sentinel")?(F=a.jsx(c,{onClick:U,children:"取消"}),r[15]=F):F=r[15],r[16]!==u?(L=a.jsxs("div",{className:"flex justify-end flex-wrap gap-3 -mt-3",children:[F,a.jsx(c,{htmlType:"submit",type:"primary",loading:u,children:"确认"})]}),r[16]=u,r[17]=L):L=r[17],r[18]!==L||r[19]!==g||r[20]!==_||r[21]!==v?(N=a.jsxs(w,{initialValues:g,onFinish:_,children:[v,q,L]}),r[18]=L,r[19]=g,r[20]=_,r[21]=v,r[22]=N):N=r[22],N};function W(e){return e.user.token}function A(e){return e.stateUtils.categoryList}function T(e){return e.user.token}function R(e){return e.key>0}function z(e){return{label:e.label,value:e.key}}function M(){h.hide(j)}function U(){h.hide(j)}export{O as default};
