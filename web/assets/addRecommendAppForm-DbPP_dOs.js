import{r as e,I as o,c as r,h as a,j as l,bL as t,B as s,U as n,m as c,d7 as i,l as m,n as d,S as x,V as h,v as f,q as p,t as u,k as j,o as g}from"./requestIdleCallbackPolyfill-CVD_37F6.js";import{u as b}from"./useForm-LHSdzXb2.js";import{F as y}from"./index-G59xOF6l.js";import{I as v}from"./index-BANcGcmd.js";import{C as _}from"./ColorPicker-BN5Ue7zh.js";import{T as C}from"./index-BmB-0c7S.js";import{R as w}from"./CloudUploadOutlined-DT2q3q8c.js";import{T as S}from"./index-li3JoM_Y.js";var P={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"},k={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 144a16 16 0 0116 16v304a16 16 0 01-16 16H160a16 16 0 01-16-16V160a16 16 0 0116-16zm-52 68H212v200h200zm493.33 87.69a16 16 0 010 22.62L724.31 503.33a16 16 0 01-22.62 0L520.67 322.31a16 16 0 010-22.62l181.02-181.02a16 16 0 0122.62 0zm-84.85 11.3L713 203.53 605.52 311 713 418.48zM464 544a16 16 0 0116 16v304a16 16 0 01-16 16H160a16 16 0 01-16-16V560a16 16 0 0116-16zm-52 68H212v200h200zm452-68a16 16 0 0116 16v304a16 16 0 01-16 16H560a16 16 0 01-16-16V560a16 16 0 0116-16zm-52 68H612v200h200z"}}]},name:"product",theme:"outlined"};function I(){return I=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var r=arguments[o];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},I.apply(this,arguments)}const z=(r,a)=>e.createElement(o,I({},r,{ref:a,icon:P})),N=e.forwardRef(z);function H(){return H=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var r=arguments[o];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},H.apply(this,arguments)}const L=(r,a)=>e.createElement(o,H({},r,{ref:a,icon:k})),T=e.forwardRef(L),{TextArea:B}=v;function O(){x.hide(h)}function R(e){return e.toHexString()}function V(e){return e.toHexString()}function F(e){return e.toHexString()}function q(e){return e.toHexString()}function A(e){return e.user.token}const U=e.memo(function(o){const u=r.c(53),{editItem:j,type:S,refresh:P}=o,k=void 0===S?"add":S,[I]=b(),z=a(A);let N;u[0]===Symbol.for("react.memo_cache_sentinel")?(N=[],u[0]=N):N=u[0];const[H,L]=e.useState(N),[T,U]=e.useState(j);let E;u[1]!==j||u[2]!==P||u[3]!==z||u[4]!==k?(E=function(e){if(!z)return void c.error("请您先完成登录/注册");const o=i(e);m(1,L),d({url:"add"===k?g.submitRecommendApp:g.editRecommendApp,token:z,data:"add"===k?o:{...o,recommendAppId:j.id}}).then(e=>{200===e.code&&(x.hide(h),P&&P())}).finally(()=>{f(1,L)})},u[1]=j,u[2]=P,u[3]=z,u[4]=k,u[5]=E):E=u[5];const K=E;let W,$,D,G,J,Q,X,Y,Z;u[6]!==T?(W=l.jsx(M,{showItem:T}),u[6]=T,u[7]=W):W=u[7],u[8]===Symbol.for("react.memo_cache_sentinel")?($={flex:"82px"},u[8]=$):$=u[8],u[9]!==I?(D=()=>{U(I.getFieldsValue())},u[9]=I,u[10]=D):D=u[10],u[11]===Symbol.for("react.memo_cache_sentinel")?(G=l.jsx(y.Item,{label:"在线链接",name:"link",required:!0,rules:[{validator:(e,o)=>o&&""!==o?t(o)?o.length>200?Promise.reject("在线链接不能超过200个字符"):Promise.resolve():Promise.reject("请输入正确的在线链接"):Promise.reject("请输入在线链接")}],children:l.jsx(v,{placeholder:"在线链接",allowClear:!0,maxLength:200})}),u[11]=G):G=u[11],u[12]===Symbol.for("react.memo_cache_sentinel")?(J=[{validator:(e,o)=>o&&""!==o?o.length>50?Promise.reject("标题/名称不能超过50个字符"):Promise.resolve():Promise.reject("请输入标题/名称")}],u[12]=J):J=u[12],u[13]===Symbol.for("react.memo_cache_sentinel")?(Q=l.jsx(y.Item,{label:"标题名称",required:!0,rules:J,name:"title",children:l.jsx(v,{placeholder:"标题名称",allowClear:!0,maxLength:50,showCount:!0})}),u[13]=Q):Q=u[13],u[14]===Symbol.for("react.memo_cache_sentinel")?(X=[{validator:(e,o)=>o&&""!==o?o.length>200?Promise.reject("推荐描述不能超过200个字符"):Promise.resolve():Promise.reject("请输入推荐描述")}],u[14]=X):X=u[14],u[15]===Symbol.for("react.memo_cache_sentinel")?(Y=l.jsx(y.Item,{label:"推荐描述",required:!0,rules:X,name:"description",children:l.jsx(B,{placeholder:"推荐描述",autoSize:{minRows:2,maxRows:2},maxLength:200,showCount:!0,allowClear:!0})}),u[15]=Y):Y=u[15],u[16]===Symbol.for("react.memo_cache_sentinel")?(Z=[{validator:(e,o)=>o&&""!==o?o.length>200?Promise.reject("图标地址不能超过200个字符"):Promise.resolve():Promise.reject("请输入或上传图标地址")}],u[16]=Z):Z=u[16];const ee=!z;let oe,re,ae,le,te,se,ne,ce,ie,me,de,xe;u[17]!==I||u[18]!==T||u[19]!==z?(oe=e=>e.size>204800?(c.error("图标大小不能超过200KB！"),!1):(m(0,L),d({url:g.uploadIcon,token:z,data:p({file:e})}).then(e=>{200===e.code&&e.data&&(I.setFieldValue("icon",e.data.icon_url),I.validateFields({dirty:!0}),U({...T,icon:e.data.icon_url}))}).finally(()=>{f(0,L)}),!1),u[17]=I,u[18]=T,u[19]=z,u[20]=oe):oe=u[20],u[21]!==z?(re=()=>{z||c.error("请您先完成登录/注册")},u[21]=z,u[22]=re):re=u[22],u[23]===Symbol.for("react.memo_cache_sentinel")?(ae=l.jsx(w,{}),u[23]=ae):ae=u[23],u[24]!==H[0]||u[25]!==re?(le=l.jsx(s,{onClick:re,loading:H[0],type:"text",className:"rounded-none",children:"上传",icon:ae}),u[24]=H[0],u[25]=re,u[26]=le):le=u[26],u[27]!==ee||u[28]!==oe||u[29]!==le?(te=l.jsx(y.Item,{label:"图标地址",name:"icon",required:!0,rules:Z,children:l.jsx(v,{placeholder:"图标地址",allowClear:!0,maxLength:200,addonAfter:l.jsx(n,{disabled:ee,accept:".png, .jpg, .jpeg, .svg, .webp, .ico",showUploadList:!1,beforeUpload:oe,children:le})})}),u[27]=ee,u[28]=oe,u[29]=le,u[30]=te):te=u[30],u[31]===Symbol.for("react.memo_cache_sentinel")?(se=l.jsx(y.Item,{label:"标签名称",name:"tagText",rules:[{validator:(e,o)=>o&&o.length>200?Promise.reject("标签名称不能超过5个字符"):Promise.resolve()}],children:l.jsx(v,{placeholder:"标签名称",allowClear:!0,maxLength:5})}),u[31]=se):se=u[31],u[32]===Symbol.for("react.memo_cache_sentinel")?(ne=l.jsxs("div",{className:"flex *:flex-1",children:[se,l.jsx(y.Item,{label:"标签颜色",name:"tagColor",normalize:q,children:l.jsx(_,{allowClear:!0})})]}),u[32]=ne):ne=u[32],u[33]===Symbol.for("react.memo_cache_sentinel")?(ce=l.jsx(y.Item,{label:"字体颜色",name:"fontColor",normalize:F,children:l.jsx(_,{allowClear:!0})}),u[33]=ce):ce=u[33],u[34]===Symbol.for("react.memo_cache_sentinel")?(ie=l.jsx(y.Item,{label:"背景颜色",name:"background",normalize:V,children:l.jsx(_,{allowClear:!0})}),u[34]=ie):ie=u[34],u[35]===Symbol.for("react.memo_cache_sentinel")?(me=l.jsxs("div",{className:"flex *:flex-1",children:[ce,ie,l.jsx(y.Item,{label:"图标背景",name:"iconBackground",normalize:R,children:l.jsx(_,{allowClear:!0})})]}),u[35]=me):me=u[35],u[36]!==j?(de=j&&l.jsx(y.Item,{label:"排序",name:"sort",children:l.jsx(C,{placeholder:"排序"})}),u[36]=j,u[37]=de):de=u[37],u[38]===Symbol.for("react.memo_cache_sentinel")?(xe=l.jsx(s,{onClick:O,children:"取消"}),u[38]=xe):xe=u[38];const he="add"===k?"提交推荐":"保存编辑";let fe,pe,ue;return u[39]!==H[1]||u[40]!==he?(fe=l.jsxs("div",{className:"flex justify-end gap-3 flex-wrap",children:[xe,l.jsx(s,{type:"primary",htmlType:"submit",loading:H[1],children:he})]}),u[39]=H[1],u[40]=he,u[41]=fe):fe=u[41],u[42]!==j||u[43]!==I||u[44]!==K||u[45]!==te||u[46]!==de||u[47]!==fe||u[48]!==D?(pe=l.jsxs(y,{form:I,autoComplete:"off",variant:"filled",initialValues:j,labelCol:$,onFinish:K,className:"mt-1",onValuesChange:D,children:[G,Q,Y,te,ne,me,de,fe]}),u[42]=j,u[43]=I,u[44]=K,u[45]=te,u[46]=de,u[47]=fe,u[48]=D,u[49]=pe):pe=u[49],u[50]!==pe||u[51]!==W?(ue=l.jsxs(l.Fragment,{children:[W,pe]}),u[50]=pe,u[51]=W,u[52]=ue):ue=u[52],ue}),M=e.memo(e=>{const o=r.c(32),{showItem:a}=e,{token:t}=u.useToken(),n=a?.background;let c,i,m;o[0]!==n||o[1]!==t.colorBorderSecondary?(c={background:n,borderColor:t.colorBorderSecondary},o[0]=n,o[1]=t.colorBorderSecondary,o[2]=c):c=o[2],o[3]!==a||o[4]!==t.colorPrimary?(i=a?.icon?l.jsx("div",{style:{height:"42px",width:"42px",backgroundColor:a.iconBackground},className:"flex-center rounded-[10px]",children:l.jsx("img",{src:j(a.icon),alt:"",style:{maxWidth:"42px",maxHeight:"42px"}})}):l.jsx(T,{className:"flex-center",style:{height:"42px",width:"42px",fontSize:"20px",color:t.colorPrimary}}),o[3]=a,o[4]=t.colorPrimary,o[5]=i):i=o[5],o[6]!==a?.tagColor||o[7]!==a?.tagText?(m=a?.tagText&&l.jsx(S,{color:a?.tagColor,className:"m-0 origin-left mr-2",style:{zoom:.75},children:a?.tagText}),o[6]=a?.tagColor,o[7]=a?.tagText,o[8]=m):m=o[8];const d=a?.fontColor;let x;o[9]!==d?(x={color:d},o[9]=d,o[10]=x):x=o[10];const h=a?.title||"标题名称";let f,p;o[11]!==x||o[12]!==h?(f=l.jsx("h1",{style:x,className:"line-clamp-1 text-left whitespace-break-spaces",children:h}),o[11]=x,o[12]=h,o[13]=f):f=o[13],o[14]!==m||o[15]!==f?(p=l.jsxs("div",{className:"text-sm mb-[4px] flex items-center",children:[m,f]}),o[14]=m,o[15]=f,o[16]=p):p=o[16];const g=a?.fontColor;let b;o[17]!==g?(b={color:g},o[17]=g,o[18]=b):b=o[18];const y=a?.description||"推荐描述";let v,_;o[19]!==b||o[20]!==y?(v=l.jsx("div",{className:"line-clamp-2 text-xs m-0 opacity-50 whitespace-break-spaces text-left",style:b,children:y}),o[19]=b,o[20]=y,o[21]=v):v=o[21],o[22]!==v||o[23]!==p?(_=l.jsxs("div",{className:"flex-1 font-medium flex flex-col items-start",children:[p,v]}),o[22]=v,o[23]=p,o[24]=_):_=o[24];const C=a?.fontColor;let w,P;return o[25]!==C?(w=l.jsx(N,{className:"opacity-50",style:{color:C}}),o[25]=C,o[26]=w):w=o[26],o[27]!==c||o[28]!==_||o[29]!==w||o[30]!==i?(P=l.jsx("div",{className:"h-[88px] pb-3 w-full flex flex-col mb-2",children:l.jsxs(s,{onClick:E,target:"_blank",style:c,type:"text",className:"border h-[76px] rounded-md p-3 flex items-center gap-3 cursor-pointer",icon:i,children:[_,w]})}),o[27]=c,o[28]=_,o[29]=w,o[30]=i,o[31]=P):P=o[31],P});function E(){c.info("此为预览效果")}export{U as A,P as C,k as P,N as R,T as a};
