import{r as e,I as t,fq as a,c as n,fr as l,k as r,j as s,B as o,C as i,D as c,E as m,_ as d,H as u,ac as f,ao as h,u as p,F as x,fs as j,ar as y,as as b,w as g,z as _,G as S,ft as w,U as v,ae as C,i as k,d as P,L as N,fu as E,aC as I,q as z,fv as T,fw as O,fx as D,bJ as A,fy as F,fz as L,N as q,a0 as Z,f8 as $,aH as R,az as U,fA as V,ce as Y,fB as B,bK as H,fC as K,e as M,bX as G,fD as J,fE as W,da as Q,cm as X,cn as ee,fF as te,ab as ae,a4 as ne,fG as le,fH as re,fI as se,fJ as oe,fK as ie,fL as ce,fM as me,fN as de,ek as ue,fO as fe,fP as he,fQ as pe,fR as xe,fS as je,bb as ye,fT as be}from"./main-G8jDWm9f.js";import{C as ge,S as _e,W as Se}from"./WarningOutlined-85JOXhKh.js";function we(){return we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},we.apply(this,arguments)}const ve=(a,n)=>e.createElement(t,we({},a,{ref:n,icon:ge})),Ce=e.forwardRef(ve);function ke(){return ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},ke.apply(this,arguments)}const Pe=(n,l)=>e.createElement(t,ke({},n,{ref:l,icon:a})),Ne=e.forwardRef(Pe);function Ee(){return Ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ee.apply(this,arguments)}const Ie=(a,n)=>e.createElement(t,Ee({},a,{ref:n,icon:_e})),ze=e.forwardRef(Ie);function Te(){return Te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Te.apply(this,arguments)}const Oe=(a,n)=>e.createElement(t,Te({},a,{ref:n,icon:Se})),De=e.forwardRef(Oe);function Ae(e){return e.user.token}const Fe=e.memo(function(){const t=n.c(21),{getDefaultData:a}=l();let p;t[0]===Symbol.for("react.memo_cache_sentinel")?(p=[],t[0]=p):p=t[0];const[x,j]=e.useState(p),y=r(Ae);let b;t[1]!==y?(b=function(){i(0,j),c({url:m.setDefaultData,token:y,data:{data:d()}}).finally(()=>{u(0,j)})},t[1]=y,t[2]=b):b=t[2];const g=b;let _,S,w,v,C,k,P,N,E;return t[3]===Symbol.for("react.memo_cache_sentinel")?(_=s.jsx(f,{message:"当前正处于编辑默认主页状态，保存的内容将替换用户首次进入网站时页面初始化的数据",banner:!0}),t[3]=_):_=t[3],t[4]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsx(ze,{}),t[4]=S):S=t[4],t[5]!==x[0]?(w=s.jsx(o,{type:"primary",icon:S,loading:x[0],children:"保存默认配置"}),t[5]=x[0],t[6]=w):w=t[6],t[7]!==g||t[8]!==w?(v=s.jsx(h,{title:"是否确认保存？",onConfirm:g,children:w}),t[7]=g,t[8]=w,t[9]=v):v=t[9],t[10]!==a?(C=()=>{a(1,j)},t[10]=a,t[11]=C):C=t[11],t[12]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsx(Ne,{}),t[12]=k):k=t[12],t[13]!==x[1]?(P=s.jsx(o,{loading:x[1],icon:k,children:"获取默认配置"}),t[13]=x[1],t[14]=P):P=t[14],t[15]!==C||t[16]!==P?(N=s.jsx(h,{title:"是否确认获取？",onConfirm:C,children:P}),t[15]=C,t[16]=P,t[17]=N):N=t[17],t[18]!==v||t[19]!==N?(E=s.jsxs("main",{className:"flex flex-col gap-3 *:border *:p-3",children:[_,v,N]}),t[18]=v,t[19]=N,t[20]=E):E=t[20],E});function Le(){y.hide(b)}function qe(e){return e.user.userInfo}function Ze(e){return e.user.token}const $e=e.memo(function(){const t=n.c(17),a=p(),[l,i]=e.useState(!1),d=r(Ze),u=r(qe);let h;t[0]!==a||t[1]!==d?(h=function(e){i(!0),c({url:m.submitAppellation,token:d,data:e}).then(e=>{200===e?.code&&e.data&&(a(j(e.data)),y.hide(b))}).finally(()=>{i(!1)})},t[0]=a,t[1]=d,t[2]=h):h=t[2];const _=h;let S,w,v,C,k,P,N;return t[3]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsx(f,{message:s.jsx("p",{children:"称号是用户的一个额外信息，申请通过即可开启 VIP 标识！"}),className:"mb-3 py-1 px-3 text-xs font-medium",type:"warning"}),t[3]=S):S=t[3],t[4]!==u?(w=[{validator:(e,t)=>t&&""!==t?t.length>8?Promise.reject("称号名称不能超过8个字符"):t===u.appellation?Promise.reject("称号名称不能与当前称号相同"):Promise.resolve():Promise.reject("请输入称号名称")}],t[4]=u,t[5]=w):w=t[5],t[6]===Symbol.for("react.memo_cache_sentinel")?(v=s.jsx(g,{placeholder:"称号名称",maxLength:8,allowClear:!0,showCount:!0}),t[6]=v):v=t[6],t[7]!==w?(C=s.jsx(x.Item,{label:"称号名称",required:!0,rules:w,name:"appellation",children:v}),t[7]=w,t[8]=C):C=t[8],t[9]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsx(o,{onClick:Le,children:"取消"}),t[9]=k):k=t[9],t[10]!==l?(P=s.jsxs("div",{className:"flex justify-end gap-3 flex-wrap items-center",children:[k,s.jsx(o,{type:"primary",htmlType:"submit",loading:l,children:"提交申请"})]}),t[10]=l,t[11]=P):P=t[11],t[12]!==_||t[13]!==C||t[14]!==P||t[15]!==u?(N=s.jsxs(s.Fragment,{children:[S,s.jsxs(x,{initialValues:u,onFinish:_,children:[C,P]})]}),t[12]=_,t[13]=C,t[14]=P,t[15]=u,t[16]=N):N=t[16],N});function Re(){y.hide(b)}function Ue(){y.hide(b)}function Ve(){y.hide(b)}function Ye(e,t){const a=new FileReader;let n=!1;const l=()=>{n||t(a.result)};a.addEventListener("loadend",l),a.readAsDataURL(e);return()=>{n=!0,a.removeEventListener("loadend",l),a.abort()}}function Be(e){return e.user.userInfo}function He(e){return e.user.token}const Ke=e.memo(function(){const t=n.c(31),a=p(),l=r(He),d=r(Be);let f;t[0]===Symbol.for("react.memo_cache_sentinel")?(f=[],t[0]=f):f=t[0];const[h,x]=e.useState(f),[y,b]=e.useState(),[g,k]=e.useState(null),[P,N]=e.useState(null);let E,I;t[1]!==P?(E=()=>()=>{P&&P()},I=[P],t[1]=P,t[2]=E,t[3]=I):(E=t[2],I=t[3]),e.useEffect(E,I);const z=Ye;let T;t[4]!==a||t[5]!==l?(T=()=>{i(0,x),c({url:m.resetAvatar,token:l}).then(e=>{200===e?.code&&e.data&&(a(j(e.data)),setTimeout(Ve,0))}).finally(()=>{u(0,x)})},t[4]=a,t[5]=l,t[6]=T):T=t[6];const O=T;let D;t[7]!==a||t[8]!==g||t[9]!==l||t[10]!==d?(D=()=>{g?(i(1,x),c({url:m.uploadAvatar,data:S({file:g}),token:l}).then(e=>{if(200===e?.code&&e.data){const t={...d,avatar:e.data.avatar_url};a(j(t)),setTimeout(Ue,0)}}).finally(()=>{u(1,x)})):_.error("请先选择一个图片")},t[7]=a,t[8]=g,t[9]=l,t[10]=d,t[11]=D):D=t[11];const A=D;let F,L,q,Z,$,R,U,V,Y;return t[12]!==P?(F=()=>()=>{P&&P()},L=[P],t[12]=P,t[13]=F,t[14]=L):(F=t[13],L=t[14]),e.useEffect(F,L),t[15]===Symbol.for("react.memo_cache_sentinel")?(q=e=>{if(e.size>512e3)return _.error("头像大小不能超过500KB！"),!1;const t=z(e,t=>{b(t),k(e)});return N(()=>t),!1},t[15]=q):q=t[15],t[16]!==y?(Z=s.jsx(w,{quality:.1,modalTitle:"裁剪图片",modalOk:"确定",modalCancel:"取消",children:s.jsx(v,{maxCount:1,accept:".png, .jpeg, .jpg",name:"avatar",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,beforeUpload:q,children:y?s.jsx("img",{src:y,alt:"avatar",style:{width:"100%"}}):s.jsxs("button",{style:{border:0,background:"none"},type:"button",children:[s.jsx(C,{}),s.jsx("div",{style:{marginTop:8},children:"上传头像"})]})})}),t[16]=y,t[17]=Z):Z=t[17],t[18]===Symbol.for("react.memo_cache_sentinel")?($=s.jsx(o,{onClick:Re,children:"取消"}),t[18]=$):$=t[18],t[19]!==h[0]||t[20]!==O?(R=s.jsx(o,{loading:h[0],onClick:O,children:"恢复默认"}),t[19]=h[0],t[20]=O,t[21]=R):R=t[21],t[22]!==h[1]||t[23]!==A?(U=s.jsx(o,{type:"primary",onClick:A,loading:h[1],children:"保存头像"}),t[22]=h[1],t[23]=A,t[24]=U):U=t[24],t[25]!==R||t[26]!==U?(V=s.jsxs("div",{className:"flex flex-wrap gap-3 justify-end mt-3",children:[$,R,U]}),t[25]=R,t[26]=U,t[27]=V):V=t[27],t[28]!==V||t[29]!==Z?(Y=s.jsxs(s.Fragment,{children:[Z,V]}),t[28]=V,t[29]=Z,t[30]=Y):Y=t[30],Y});function Me(){y.hide(b)}function Ge(e,t){if(!t)return Promise.reject(new Error("请输入密码"));return/^[a-zA-Z0-9_\-!@#$%^&*()+={}[\]:;"'<>.,?/~`|]+$/.test(t)?t.length<6||t.length>32?Promise.reject(new Error("密码长度必须在6到32位之间")):Promise.resolve():Promise.reject(new Error("密码只能包含字母、数字、下划线、短横线以及其他常用特殊字符"))}function Je(e){200===e?.code&&y.hide(b)}function We(e){return e.user.token}const Qe=e.memo(function(){const t=n.c(19),[a]=k();let l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l=[],t[0]=l):l=t[0];const[d,f]=e.useState(l),h=r(We);let p;t[1]!==h?(p=function(e){i(0,f),c({url:m.changePassword,data:e,token:h}).then(Je).finally(()=>{u(0,f)})},t[1]=h,t[2]=p):p=t[2];const j=p,y=Ge;let b,_,S,w,v,C,P,N,E;return t[3]===Symbol.for("react.memo_cache_sentinel")?(b={flex:"82px"},t[3]=b):b=t[3],t[4]===Symbol.for("react.memo_cache_sentinel")?(_=s.jsx(x.Item,{label:"原密码",required:!0,name:"oldPassword",rules:[{validator:y}],children:s.jsx(g.Password,{autoComplete:"new-password",placeholder:"原密码",maxLength:32,allowClear:!0})}),t[4]=_):_=t[4],t[5]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsx(x.Item,{label:"新密码",required:!0,name:"newPassword",rules:[{validator:y}],children:s.jsx(g.Password,{autoComplete:"new-password",placeholder:"新密码",maxLength:32,allowClear:!0})}),t[5]=S):S=t[5],t[6]!==a?(w=[{validator(e,t){if(""===t||!t)return Promise.reject(new Error("请再次输入密码"));return t!==a.getFieldValue("newPassword")?Promise.reject(new Error("两次输入的密码不一致")):Promise.resolve()}}],t[6]=a,t[7]=w):w=t[7],t[8]===Symbol.for("react.memo_cache_sentinel")?(v=s.jsx(g.Password,{autoComplete:"new-password",placeholder:"重新输入新密码",maxLength:32,allowClear:!0}),t[8]=v):v=t[8],t[9]!==w?(C=s.jsx(x.Item,{label:"确认密码",required:!0,name:"confirmPassword",rules:w,children:v}),t[9]=w,t[10]=C):C=t[10],t[11]===Symbol.for("react.memo_cache_sentinel")?(P=s.jsx(o,{onClick:Me,children:"取消"}),t[11]=P):P=t[11],t[12]!==d[0]?(N=s.jsxs("div",{className:"flex flex-wrap justify-end gap-3",children:[P,s.jsx(o,{type:"primary",htmlType:"submit",loading:d[0],children:"确定"})]}),t[12]=d[0],t[13]=N):N=t[13],t[14]!==j||t[15]!==a||t[16]!==C||t[17]!==N?(E=s.jsx(s.Fragment,{children:s.jsxs(x,{form:a,autoComplete:"off",name:"edit-user-form",onFinish:j,labelCol:b,children:[_,S,C,N]})}),t[14]=j,t[15]=a,t[16]=C,t[17]=N,t[18]=E):E=t[18],E});function Xe(){y.hide(b)}function et(e,t){return t&&t.length>20&&t.length>20?Promise.reject(new Error("昵称长度不能超过20个字符")):Promise.resolve()}function tt(e){return e.user.userInfo}function at(e){return e.user.token}const nt=e.memo(function(t){const a=n.c(23),{initialValues:l}=t,d=p();let f;a[0]===Symbol.for("react.memo_cache_sentinel")?(f=[],a[0]=f):f=a[0];const[h,_]=e.useState(f),S=r(at),w=r(tt);let v;a[1]!==d||a[2]!==S||a[3]!==w?(v=function(e){i(0,_),""!==e.birthday&&e.birthday||delete e.birthday,c({url:m.editUserInfo,data:e,token:S}).then(e=>{200===e?.code&&e.data&&(I(e.data,w)||d(j(e.data)),y.hide(b))}).finally(()=>{u(0,_)})},a[1]=d,a[2]=S,a[3]=w,a[4]=v):v=a[4];const C=v;let k,z,T,O,D,A,F,L,q,Z,$;return a[5]!==l.birthday?(k=l.birthday&&P(l.birthday,"YYYY-MM-DD"),a[5]=l.birthday,a[6]=k):k=a[6],a[7]!==l||a[8]!==k?(z={...l,birthday:k},a[7]=l,a[8]=k,a[9]=z):z=a[9],a[10]===Symbol.for("react.memo_cache_sentinel")?(T={flex:"72px"},a[10]=T):T=a[10],a[11]===Symbol.for("react.memo_cache_sentinel")?(O=s.jsx(x.Item,{name:"username",label:"用户名",required:!0,rules:[{validator:(e,t)=>""!==t&&t?/^[a-zA-Z]/.test(t)?/^[a-zA-Z][a-zA-Z0-9_-]*$/.test(t)?t.length<3||t.length>20?Promise.reject(new Error("用户名长度必须在3到20位之间")):Promise.resolve():Promise.reject(new Error("用户名只能包含字母、数字、下划线或短横线")):Promise.reject(new Error("用户名必须以字母开头")):Promise.reject(new Error("请输入用户名"))}],children:s.jsx(g,{placeholder:"用户名",allowClear:!0,maxLength:20})}),a[11]=O):O=a[11],a[12]===Symbol.for("react.memo_cache_sentinel")?(D=s.jsx(x.Item,{name:"nickname",label:"昵称",rules:[{validator:et}],children:s.jsx(g,{placeholder:"昵称",maxLength:20,showCount:!0,allowClear:!0})}),a[12]=D):D=a[12],a[13]===Symbol.for("react.memo_cache_sentinel")?(A=s.jsx(x.Item,{name:"sex",label:"性别",required:!0,children:s.jsx(N,{placeholder:"性别",options:[{label:"男",value:0},{label:"女",value:1}]})}),a[13]=A):A=a[13],a[14]===Symbol.for("react.memo_cache_sentinel")?(F=s.jsx(x.Item,{name:"phone",label:"手机号",rules:[{validator(e,t){if(""===t||!t)return Promise.resolve();return/^1[3-9]\d{9}$/.test(t)?Promise.resolve():Promise.reject(new Error("请输入正确的手机号码"))}}],children:s.jsx(g,{placeholder:"手机号",maxLength:11,allowClear:!0})}),a[14]=F):F=a[14],a[15]===Symbol.for("react.memo_cache_sentinel")?(L=s.jsx(x.Item,{name:"birthday",label:"生日",children:s.jsx(E,{placeholder:"生日",allowClear:!0})}),a[15]=L):L=a[15],a[16]===Symbol.for("react.memo_cache_sentinel")?(q=s.jsx(o,{onClick:Xe,children:"取消"}),a[16]=q):q=a[16],a[17]!==h[0]?(Z=s.jsxs("div",{className:"flex flex-wrap justify-end gap-3",children:[q,s.jsx(o,{type:"primary",htmlType:"submit",loading:h[0],children:"确定"})]}),a[17]=h[0],a[18]=Z):Z=a[18],a[19]!==C||a[20]!==Z||a[21]!==z?($=s.jsx(s.Fragment,{children:s.jsxs(x,{autoComplete:"off",initialValues:z,name:"edit-user-form",onFinish:C,labelCol:T,children:[O,D,A,F,L,Z]})}),a[19]=C,a[20]=Z,a[21]=z,a[22]=$):$=a[22],$});function lt(){y.hide(b)}function rt(e,t){return t?/^\d{1,6}$/.test(t)?Promise.resolve():Promise.reject(new Error("验证码只能包含数字")):Promise.reject(new Error("请输入验证码"))}function st(e){return e?.replace(/\D/g,"")}function ot(e){return e.user.userInfo}function it(e){return e.user.token}const ct=e.memo(function(){const t=n.c(22),a=p(),[l]=k();let d;t[0]===Symbol.for("react.memo_cache_sentinel")?(d=[],t[0]=d):d=t[0];const[f,h]=e.useState(d),S=r(it),w=r(ot);let v;t[1]!==l?(v=function(){const e=l.getFieldValue("email");e&&""!==e?/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e)?(i(0,h),c({url:m.emailCode,data:{email:e}}).finally(()=>{u(0,h)})):_.error("请输入有效的邮箱地址"):_.error("请输入邮箱")},t[1]=l,t[2]=v):v=t[2];const C=v;let P;t[3]!==a||t[4]!==S||t[5]!==w?(P=function(e){i(1,h),c({url:m.bindEmail,data:e,token:S}).then(e=>{200===e?.code&&e.data&&(I(e.data,w)||a(j(e.data)),y.hide(b))}).finally(()=>{u(1,h)})},t[3]=a,t[4]=S,t[5]=w,t[6]=P):P=t[6];const N=P;let E,z,T,O,D,A,F,L;return t[7]===Symbol.for("react.memo_cache_sentinel")?(E={flex:"72px"},t[7]=E):E=t[7],t[8]===Symbol.for("react.memo_cache_sentinel")?(z=s.jsx(x.Item,{name:"email",required:!0,className:"flex-auto",label:"新邮箱",rules:[{validator:(e,t)=>t?/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t)?Promise.resolve():Promise.reject(new Error("请输入有效的邮箱地址")):Promise.reject(new Error("请输入邮箱"))}],children:s.jsx(g,{placeholder:"邮箱",allowClear:!0,maxLength:255})}),t[8]=z):z=t[8],t[9]!==C||t[10]!==f[0]?(T=s.jsxs("div",{className:"flex gap-3 items-end",children:[z,s.jsx(o,{onClick:C,loading:f[0],className:"mb-6",children:"获取验证码"})]}),t[9]=C,t[10]=f[0],t[11]=T):T=t[11],t[12]===Symbol.for("react.memo_cache_sentinel")?(O=[{validator:rt}],t[12]=O):O=t[12],t[13]===Symbol.for("react.memo_cache_sentinel")?(D=s.jsx(x.Item,{name:"emailCode",required:!0,label:"验证码",normalize:st,rules:O,children:s.jsx(g,{autoComplete:"new-password",style:{width:"100%"},placeholder:"验证码",allowClear:!0,maxLength:6})}),t[13]=D):D=t[13],t[14]===Symbol.for("react.memo_cache_sentinel")?(A=s.jsx(o,{onClick:lt,children:"取消"}),t[14]=A):A=t[14],t[15]!==f[1]?(F=s.jsxs("div",{className:"flex flex-wrap justify-end gap-3",children:[A,s.jsx(o,{type:"primary",htmlType:"submit",loading:f[1],children:"确定"})]}),t[15]=f[1],t[16]=F):F=t[16],t[17]!==N||t[18]!==l||t[19]!==T||t[20]!==F?(L=s.jsx(s.Fragment,{children:s.jsxs(x,{form:l,onFinish:N,name:"user-email-form",labelCol:E,autoComplete:"off",children:[T,D,F]})}),t[17]=N,t[18]=l,t[19]=T,t[20]=F,t[21]=L):L=t[21],L});function mt(){y.show(b,{title:"注销账户",children:s.jsx(yt,{})})}function dt(){y.show(b,{title:"退出登录",children:s.jsx(jt,{})})}function ut(){y.show(b,{title:"修改密码",children:s.jsx(Qe,{})})}function ft(){_.success("数据合并完成")}function ht(){y.show(b,{title:"头像设置",children:s.jsx(Ke,{})})}function pt(e){return e.user.userInfo}const xt=e.memo(function(){const t=n.c(97),{pullData:a,pushData:i,getDefaultDataClear:c}=l(),m=r(pt);let d;t[0]===Symbol.for("react.memo_cache_sentinel")?(d=[],t[0]=d):d=t[0];const[u,f]=e.useState(d);let p;t[1]!==m.email?(p=function(){y.show(b,{title:`绑定邮箱（原邮箱：${m.email||"无"}）`,children:s.jsx(ct,{})})},t[1]=m.email,t[2]=p):p=t[2];const x=p;let j,g,S,w,v,C,k,P;t[3]!==m.avatar||t[4]!==m.sex?(j=m?.avatar?z(m.avatar):1===m?.sex?T:O,t[3]=m.avatar,t[4]=m.sex,t[5]=j):j=t[5],t[6]!==j?(g=s.jsx("div",{className:"p-[2px] border-dashed border rounded-full hover:border-blue-400 cursor-pointer transition-main",onClick:ht,children:s.jsx(L,{size:72,src:j})}),t[6]=j,t[7]=g):g=t[7],t[8]!==m.appellation||t[9]!==m.appellationStatus?(S=m.appellation&&1===m.appellationStatus?s.jsx(D,{}):s.jsx(A,{}),t[8]=m.appellation,t[9]=m.appellationStatus,t[10]=S):S=t[10],t[11]!==m.appellation||t[12]!==m.appellationStatus||t[13]!==m.userType?(w=m.appellation&&1===m.appellationStatus?"volcano":F.find(e=>e.userType===m.userType)?.color,t[11]=m.appellation,t[12]=m.appellationStatus,t[13]=m.userType,t[14]=w):w=t[14],t[15]!==m.appellation||t[16]!==m.appellationStatus||t[17]!==m.userType?(v=m.appellation&&1===m.appellationStatus?m.appellation:F.find(e=>e.userType===m.userType)?.text,t[15]=m.appellation,t[16]=m.appellationStatus,t[17]=m.userType,t[18]=v):v=t[18],t[19]!==S||t[20]!==w||t[21]!==v?(C=s.jsx(q,{icon:S,className:"m-0 flex items-center gap-1",color:w,children:v}),t[19]=S,t[20]=w,t[21]=v,t[22]=C):C=t[22],t[23]!==g||t[24]!==C?(k=s.jsxs("div",{className:"flex flex-col items-center m-3 gap-3",children:[g,C]}),t[23]=g,t[24]=C,t[25]=k):k=t[25],t[26]===Symbol.for("react.memo_cache_sentinel")?(P={label:{padding:"8px 16px"},content:{padding:"8px 16px",textAlign:"end"}},t[26]=P):P=t[26];const N=m.username||"-";let E;t[27]!==N?(E={label:"用户名",children:N},t[27]=N,t[28]=E):E=t[28];const I=m.nickname||"-";let M;t[29]!==I?(M={label:"昵称",children:I},t[29]=I,t[30]=M):M=t[30];const G=1===m.sex?"女":"男";let J,W,Q;t[31]!==G?(J={label:"性别",children:G},t[31]=G,t[32]=J):J=t[32],t[33]!==x||t[34]!==m.email?(W=m.email||s.jsx(o,{type:"link",size:"small",className:"p-0",onClick:x,children:"绑定"}),t[33]=x,t[34]=m.email,t[35]=W):W=t[35],t[36]!==W?(Q={label:"邮箱",children:W},t[36]=W,t[37]=Q):Q=t[37];const X=m.phone||"-";let ee;t[38]!==X?(ee={label:"手机号",children:X},t[38]=X,t[39]=ee):ee=t[39];const te=m.birthday||"-";let ae;t[40]!==te?(ae={label:"生日",children:te},t[40]=te,t[41]=ae):ae=t[41];const ne=m.registerTime||"-";let le,re,se,oe,ie,ce,me,de,ue,fe,he,pe,xe;t[42]!==ne?(le={label:"注册时间",children:ne},t[42]=ne,t[43]=le):le=t[43],t[44]!==i?(re=()=>{"1"===localStorage.getItem("focusPulling")?_.warning("数据自动同步中，请稍后再试"):i(0,f)},t[44]=i,t[45]=re):re=t[45],t[46]!==u[0]||t[47]!==re?(se=s.jsx(o,{type:"link",size:"small",onClick:re,loading:u[0],children:"上传"}),t[46]=u[0],t[47]=re,t[48]=se):se=t[48],t[49]===Symbol.for("react.memo_cache_sentinel")?(oe=s.jsx(Z,{type:"vertical"}),t[49]=oe):oe=t[49],t[50]!==a?(ie=()=>{"1"===localStorage.getItem("focusPulling")?_.warning("数据自动同步中，请稍后再试"):a(1,f,void 0,!0)},t[50]=a,t[51]=ie):ie=t[51],t[52]!==u[1]||t[53]!==ie?(ce=s.jsx(o,{type:"link",size:"small",onClick:ie,loading:u[1],children:"拉取"}),t[52]=u[1],t[53]=ie,t[54]=ce):ce=t[54],t[55]!==se||t[56]!==ce?(me={label:"数据管理",children:s.jsxs("div",{className:"flex justify-end flex-wrap *:p-0 items-center",children:[se,oe,ce]})},t[55]=se,t[56]=ce,t[57]=me):me=t[57],t[58]!==c?(de=()=>{c(void 0,void 0,ft,!0)},t[58]=c,t[59]=de):de=t[59],t[60]===Symbol.for("react.memo_cache_sentinel")?(ue=s.jsx(o,{type:"link",size:"small",className:"p-0",children:"合并数据"}),t[60]=ue):ue=t[60],t[61]!==de?(fe={label:"初始数据",children:s.jsx(s.Fragment,{children:s.jsx(h,{title:"将与本地数据差异化合并",onConfirm:de,children:ue})})},t[61]=de,t[62]=fe):fe=t[62],t[63]!==E||t[64]!==M||t[65]!==J||t[66]!==Q||t[67]!==ee||t[68]!==ae||t[69]!==le||t[70]!==me||t[71]!==fe?(he=s.jsx($,{bordered:!0,column:1,className:"w-full mt-6",styles:P,items:[E,M,J,Q,ee,ae,le,me,fe]}),t[63]=E,t[64]=M,t[65]=J,t[66]=Q,t[67]=ee,t[68]=ae,t[69]=le,t[70]=me,t[71]=fe,t[72]=he):he=t[72],t[73]===Symbol.for("react.memo_cache_sentinel")?(pe=s.jsx(R,{}),t[73]=pe):pe=t[73],t[74]!==m.appellation||t[75]!==m.appellationStatus?(xe=()=>{y.show(b,{title:s.jsxs("div",{className:"flex items-center gap-2",children:[m.appellation&&1===m.appellationStatus?"变更称号":"申请称号",s.jsxs(q,{color:0===m.appellationStatus?"":1===m.appellationStatus?"green":"red",icon:0===m.appellationStatus?s.jsx(U,{}):1===m.appellationStatus?s.jsx(V,{}):s.jsx(Ce,{}),children:["称号状态：",0===m.appellationStatus?m.appellation?"申请中":"待申请":1===m.appellationStatus?"已荣获":"被拒绝"]})]}),children:s.jsx($e,{})})},t[74]=m.appellation,t[75]=m.appellationStatus,t[76]=xe):xe=t[76];const je=0===m.appellationStatus?m.appellation?"称号管理":"申请称号":1===m.appellationStatus?"变更称号":"重新申请";let ye,be,ge,_e,Se,we,ve,ke,Pe,Ne;return t[77]!==xe||t[78]!==je?(ye=s.jsx(o,{icon:pe,onClick:xe,children:je}),t[77]=xe,t[78]=je,t[79]=ye):ye=t[79],t[80]===Symbol.for("react.memo_cache_sentinel")?(be=s.jsx(Y,{}),t[80]=be):be=t[80],t[81]!==m?(ge=s.jsx(o,{icon:be,onClick:()=>{y.show(b,{title:"更新资料",children:s.jsx(nt,{initialValues:m})})},children:"更新资料"}),t[81]=m,t[82]=ge):ge=t[82],t[83]===Symbol.for("react.memo_cache_sentinel")?(_e=s.jsx(o,{icon:s.jsx(B,{}),onClick:ut,children:"修改密码"}),t[83]=_e):_e=t[83],t[84]===Symbol.for("react.memo_cache_sentinel")?(Se=s.jsx(H,{}),t[84]=Se):Se=t[84],t[85]!==x?(we=s.jsx(o,{icon:Se,onClick:x,children:"绑定邮箱"}),t[85]=x,t[86]=we):we=t[86],t[87]===Symbol.for("react.memo_cache_sentinel")?(ve=s.jsx(o,{icon:s.jsx(K,{}),danger:!0,onClick:dt,children:"退出登录"}),t[87]=ve):ve=t[87],t[88]===Symbol.for("react.memo_cache_sentinel")?(ke=s.jsx(o,{icon:s.jsx(De,{}),type:"text",danger:!0,size:"small",className:"text-xs",onClick:mt,children:"注销账户？请慎重操作！"}),t[88]=ke):ke=t[88],t[89]!==ye||t[90]!==ge||t[91]!==we?(Pe=s.jsxs("div",{className:"flex flex-col mt-6 gap-3",children:[ye,ge,_e,we,ve,ke]}),t[89]=ye,t[90]=ge,t[91]=we,t[92]=Pe):Pe=t[92],t[93]!==he||t[94]!==Pe||t[95]!==k?(Ne=s.jsxs(s.Fragment,{children:[k,he,Pe]}),t[93]=he,t[94]=Pe,t[95]=k,t[96]=Ne):Ne=t[96],Ne}),jt=()=>{const t=n.c(17),a=p(),{getDefaultDataClear:i}=l(),c=r(bt),[d,u]=e.useState(!1);let h;t[0]!==a?(h=function(){a(J("")),a(j({})),a(W(!1)),y.hide(b),Q||(y.hide(X),y.hide(ee))},t[0]=a,t[1]=h):h=t[1];const x=h;let g;t[2]!==d||t[3]!==x||t[4]!==a||t[5]!==i||t[6]!==c?(g=function(){if(x(),ae({url:m.logout,token:c}),_.success("退出成功"),d||!Q){i(10,void 0,e=>{ne(e)&&(a(le()),a(re()),a(se()),a(oe()),a(ie()),a(ce()),a(me()),a(de()),a(ue()),a(fe()),a(he()),a(pe()),a(xe()),a(je()))});const e=M.getState().stateUtils.mySwiper;if(e){M.getState().swiper.loop?e?.slideToLoop(0):e?.slideTo(0)}}},t[2]=d,t[3]=x,t[4]=a,t[5]=i,t[6]=c,t[7]=g):g=t[7];const S=g;let w,v,C,k,P;return t[8]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsx(f,{message:"退出后将停止在不同设备或浏览器间同步数据。",type:"error",showIcon:!0,banner:!0,icon:s.jsx(te,{}),className:"rounded-md"}),t[8]=w):w=t[8],t[9]!==d?(v=Q&&s.jsxs("div",{className:"flex gap-2 items-center pointer-events-auto cursor-pointer w-fit",onClick:()=>{u(!d)},children:[s.jsx(ye,{checked:d,className:"pointer-events-none"}),s.jsx("p",{children:"退出清空本地数据"})]}),t[9]=d,t[10]=v):v=t[10],t[11]===Symbol.for("react.memo_cache_sentinel")?(C=s.jsx(o,{onClick:gt,children:"取消"}),t[11]=C):C=t[11],t[12]!==S?(k=s.jsxs("div",{className:"flex gap-3 justify-end",children:[C,s.jsx(o,{danger:!0,type:"primary",onClick:S,children:"确定"})]}),t[12]=S,t[13]=k):k=t[13],t[14]!==v||t[15]!==k?(P=s.jsxs("div",{className:"flex flex-col gap-4",children:[w,v,k]}),t[14]=v,t[15]=k,t[16]=P):P=t[16],P},yt=()=>{const t=n.c(7),a=p(),[l,r]=e.useState(!1);let i;t[0]!==a?(i=function(){r(!0);const e=M.getState().user.token;G({url:m.logOff,token:e}).then(e=>{200===e?.code&&(a(J("")),a(j({})),a(W(!1)),y.hide(b),Q||(y.hide(X),y.hide(ee)))}).finally(()=>{r(!1)})},t[0]=a,t[1]=i):i=t[1];const c=i;let d,u,h;return t[2]===Symbol.for("react.memo_cache_sentinel")?(d=s.jsx(f,{message:"是否确认注销账户？注销后账户数据将被完全清理，请您慎重操作，如有问题，欢迎联系管理员！",type:"error",showIcon:!0,banner:!0,icon:s.jsx(te,{}),className:"rounded-md"}),t[2]=d):d=t[2],t[3]===Symbol.for("react.memo_cache_sentinel")?(u=s.jsx(o,{onClick:_t,children:"取消"}),t[3]=u):u=t[3],t[4]!==l||t[5]!==c?(h=s.jsxs("div",{className:"flex flex-col gap-4",children:[d,s.jsxs("div",{className:"flex gap-3 justify-end",children:[u,s.jsx(o,{danger:!0,type:"primary",onClick:c,loading:l,children:"确定"})]})]}),t[4]=l,t[5]=c,t[6]=h):h=t[6],h};function bt(e){return e.user.token}function gt(){y.hide(b)}function _t(){y.hide(b)}function St(){const t=n.c(11),a=p(),l=r(Ct),o=r(vt),i=r(wt);let c;t[0]!==a||t[1]!==l||t[2]!==o?(c=function(){ae({url:m.getUserInfo,token:l}).then(e=>{200===e?.code&&e.data&&(I(e.data,o)||a(j(e.data)))})},t[0]=a,t[1]=l,t[2]=o,t[3]=c):c=t[3];const d=c;let u,f,h;return t[4]!==d||t[5]!==l?(u=()=>{l&&d()},t[4]=d,t[5]=l,t[6]=u):u=t[6],t[7]===Symbol.for("react.memo_cache_sentinel")?(f=[],t[7]=f):f=t[7],e.useEffect(u,f),t[8]!==i||t[9]!==l?(h=s.jsx("div",{className:"py-6 mx-auto w-full max-w-[390px]",children:l?i?s.jsx(Fe,{}):s.jsx(xt,{}):s.jsx(be,{})}),t[8]=i,t[9]=l,t[10]=h):h=t[10],h}function wt(e){return e.user.isSettingDefaultData}function vt(e){return e.user.userInfo}function Ct(e){return e.user.token}export{St as default};
