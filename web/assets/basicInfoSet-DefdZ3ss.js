import{c as e,r,j as s,B as l,k as t,a,W as o,n,F as i,a0 as m,q as c,a1 as u,m as d,l as f,X as p,E as j}from"./requestIdleCallbackPolyfill-CEimuL3I.js";import{T as h}from"./TextArea-D12ZTmOp.js";import{C as x}from"./contentLayout-FLn7UwnK.js";import{F as _}from"./index-CLs8asrc.js";import{I as b}from"./index-B6Nw0KJ3.js";import{S as y}from"./index-BCD7T3lV.js";import{R as w}from"./QuestionCircleOutlined-Iab4W4Td.js";import"./getAllowClear-Cn6nd0XC.js";import"./useForm-BmxkZ3hM.js";import"./row-eYrfNDsp.js";import"./useBreakpoint-BCsgDtUx.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./QuestionCircleOutlined-DSm95oJP.js";import"./Input-BBAEOKR8.js";function g(){const g=e.c(22),[S]=_.useForm();let C;g[0]===Symbol.for("react.memo_cache_sentinel")?(C=[],g[0]=C):C=g[0];const[v,q]=r.useState(C);let F;g[1]!==S?(F=function(){t(0,q);const e=a.getState().user.token;o({url:n.getInfoConfig,token:e}).then(e=>{if(S.setFieldsValue(e.data),!e.data.server_url&&!i()){const e=m();S.setFieldValue("server_url",e)}}).finally(()=>{c(0,q)})},g[1]=S,g[2]=F):F=g[2];const I=F;let k,N,Q;g[3]!==I?(k=()=>{I()},g[3]=I,g[4]=k):k=g[4],g[5]===Symbol.for("react.memo_cache_sentinel")?(N=[],g[5]=N):N=g[5],r.useEffect(k,N),g[6]===Symbol.for("react.memo_cache_sentinel")?(Q=function(e){if(e.server_url&&!u(e.server_url))return void d.error("后台服务地址必须以http或https开头");t(1,q);const r=a.getState().user.token;f({url:n.updateInfoConfig,token:r,data:e}).finally(()=>{c(1,q)})},g[6]=Q):Q=g[6];const R=Q;let T,A,B,E,O,V,z,L,P,U;return g[7]===Symbol.for("react.memo_cache_sentinel")?(T=s.jsx(p,{type:"warning",description:s.jsxs(s.Fragment,{children:[s.jsx(w,{className:"mr-1"}),"更新网页的标题、描述等项目基础信息，服务地址主要用于插件版打包使用，别的信息可以自行更改项目文件，达到更改目的！或联系作者：dengxiwang@aliyun.com"]}),className:"mb-4 p-1 px-3 text-xs font-normal w-full"}),g[7]=T):T=g[7],g[8]===Symbol.for("react.memo_cache_sentinel")?(A={flex:"120px"},g[8]=A):A=g[8],g[9]===Symbol.for("react.memo_cache_sentinel")?(B=s.jsx(_.Item,{label:"网站标题",required:!0,name:"web_title",rules:[{required:!0}],children:s.jsx(b,{placeholder:"网站标题",allowClear:!0})}),g[9]=B):B=g[9],g[10]===Symbol.for("react.memo_cache_sentinel")?(E=[{required:!0}],g[10]=E):E=g[10],g[11]===Symbol.for("react.memo_cache_sentinel")?(V=s.jsx(_.Item,{label:"网站描述",required:!0,name:"web_description",rules:E,children:s.jsx(h,{autoSize:{minRows:3,maxRows:3},allowClear:!0,placeholder:"网站描述，head头部中的description信息"})}),O=s.jsx(j,{}),g[11]=O,g[12]=V):(O=g[11],V=g[12]),g[13]===Symbol.for("react.memo_cache_sentinel")?(z=s.jsx(_.Item,{label:"后台服务地址",required:!0,name:"server_url",rules:[{required:!0}],children:s.jsx(b,{allowClear:!0,placeholder:"后台服务地址，如：https://web.gotab.cn"})}),g[13]=z):z=g[13],g[14]!==v[1]?(L=s.jsx("div",{className:"w-full flex justify-center",children:s.jsx(l,{htmlType:"submit",type:"primary",className:"w-full max-w-64",loading:v[1],children:"保存配置"})}),g[14]=v[1],g[15]=L):L=g[15],g[16]!==S||g[17]!==L?(P=s.jsxs(_,{form:S,className:"w-full",labelCol:A,onFinish:R,children:[B,V,O,z,L]}),g[16]=S,g[17]=L,g[18]=P):P=g[18],g[19]!==v[0]||g[20]!==P?(U=s.jsxs(x,{children:[T,s.jsx("div",{className:"w-full",children:s.jsx(y,{spinning:v[0],children:P})})]}),g[19]=v[0],g[20]=P,g[21]=U):U=g[21],U}export{g as default};
