import{c as e,r,j as l,B as s,l as t,a as o,W as a,o as n,v as m,n as i,X as c}from"./requestIdleCallbackPolyfill-DoU9FIwA.js";import{r as u}from"./transformData-DkdK_VBK.js";import{C as d}from"./contentLayout-DB4pAw8J.js";import{F as p}from"./index-Cr4L1iDP.js";import{I as f}from"./index-DWLaguo5.js";import{S as j}from"./index-OP_kbtb2.js";import{T as x}from"./index-Nh4HMtRK.js";import{S as h}from"./index-YyYs-mXR.js";import{R as S}from"./QuestionCircleOutlined-CVhhmpfu.js";import"./useForm-CW3rwJm8.js";import"./row-D5QnkDzE.js";import"./useBreakpoint-xRBdhL2a.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./QuestionCircleOutlined-DSm95oJP.js";import"./getAllowClear-VAszIRBx.js";import"./Input-CqajMQ6D.js";import"./TextArea-C3zYesjv.js";import"./Overflow-B-O7IF8-.js";function b(){const b=e.c(23),[y]=p.useForm();let _;b[0]===Symbol.for("react.memo_cache_sentinel")?(_=[],b[0]=_):_=b[0];const[w,g]=r.useState(_);let q;b[1]!==y?(q=function(){t(0,g);const e=o.getState().user.token;a({url:n.getSmtpConfig,token:e}).then(e=>{y.setFieldsValue(u(e.data))}).finally(()=>{m(0,g)})},b[1]=y,b[2]=q):q=b[2];const T=q;let C,I,v;b[3]!==T?(C=()=>{T()},b[3]=T,b[4]=C):C=b[4],b[5]===Symbol.for("react.memo_cache_sentinel")?(I=[],b[5]=I):I=b[5],r.useEffect(C,I),b[6]===Symbol.for("react.memo_cache_sentinel")?(v=function(e){t(1,g);const r=o.getState().user.token;i({url:n.updateSmtpConfig,token:r,data:e}).finally(()=>{m(1,g)})},b[6]=v):v=b[6];const L=v;let N,k,F,A,O,Q,R,B,P,D,E;return b[7]===Symbol.for("react.memo_cache_sentinel")?(N=l.jsx(c,{type:"warning",description:l.jsxs(l.Fragment,{children:[l.jsx(S,{className:"mr-1"}),"更新用于用户注册的邮箱验证码发送验证的邮件服务器配置，推荐使用：阿里企业邮箱或者微信企业邮箱"]}),className:"mb-4 p-1 px-3 text-xs font-normal w-full"}),b[7]=N):N=b[7],b[8]===Symbol.for("react.memo_cache_sentinel")?(k={flex:"120px"},b[8]=k):k=b[8],b[9]===Symbol.for("react.memo_cache_sentinel")?(F=l.jsx(p.Item,{label:"服务器地址",required:!0,name:"host",rules:[{required:!0}],children:l.jsx(f,{placeholder:"服务器地址"})}),b[9]=F):F=b[9],b[10]===Symbol.for("react.memo_cache_sentinel")?(A=[{required:!0}],b[10]=A):A=b[10],b[11]===Symbol.for("react.memo_cache_sentinel")?(O=l.jsx(p.Item,{label:"加密方式",required:!0,name:"encryption",rules:A,children:l.jsx(j,{placeholder:"加密方式",options:[{value:"None",label:"不加密"},{value:"SSL/TLS",label:"SSL/TLS"},{value:"STARTTLS",label:"STARTTLS"}]})}),b[11]=O):O=b[11],b[12]===Symbol.for("react.memo_cache_sentinel")?(Q=l.jsx(p.Item,{label:"端口",required:!0,name:"port",rules:[{required:!0}],children:l.jsx(x,{placeholder:"端口"})}),b[12]=Q):Q=b[12],b[13]===Symbol.for("react.memo_cache_sentinel")?(R=l.jsx(p.Item,{label:"用户名",required:!0,name:"username",rules:[{required:!0}],children:l.jsx(f,{placeholder:"用户名"})}),b[13]=R):R=b[13],b[14]===Symbol.for("react.memo_cache_sentinel")?(B=l.jsx(p.Item,{label:"密码",required:!0,name:"password",rules:[{required:!0}],children:l.jsx(f.Password,{autoComplete:"new-password",placeholder:"密码"})}),b[14]=B):B=b[14],b[15]!==w[1]?(P=l.jsx("div",{className:"w-full flex justify-center",children:l.jsx(s,{htmlType:"submit",type:"primary",className:"w-full max-w-64",loading:w[1],children:"保存配置"})}),b[15]=w[1],b[16]=P):P=b[16],b[17]!==y||b[18]!==P?(D=l.jsxs(p,{autoComplete:"off",form:y,className:"w-full",labelCol:k,onFinish:L,children:[F,O,Q,R,B,P]}),b[17]=y,b[18]=P,b[19]=D):D=b[19],b[20]!==w[0]||b[21]!==D?(E=l.jsxs(d,{children:[N,l.jsx("div",{className:"w-full",children:l.jsx(h,{spinning:w[0],children:D})})]}),b[20]=w[0],b[21]=D,b[22]=E):E=b[22],E}export{b as default};
