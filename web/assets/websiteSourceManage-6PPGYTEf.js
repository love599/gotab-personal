import{c as e,an as t,u as s,k as r,F as l,r as n,j as i,w as a,L as o,a9 as c,aA as m,aB as d,av as h,B as u,aw as f,a0 as x,ap as p,aq as y,aC as j,E as b,N as g,q as k,ao as w,C as _,D as S,H as C,am as N}from"./main-C5oyJuBL.js";import{r as v}from"./transformData-B561WgkU.js";import{M as A,R as I}from"./myTable-DGct33i0.js";import{C as L}from"./contentLayout-DU6eewpA.js";import{R as O}from"./SortAscendingOutlined-tsPRmM0r.js";import"./MoneyCollectOutlined-r517ZjJd.js";import"./MoneyCollectOutlined-4QlEwa2l.js";import"./index-C0y_yQ21.js";import"./AlipayOutlined-CaUQZesE.js";import"./AlipayOutlined-tZM3mGx9.js";import"./SortAscendingOutlined-8bEGxkuH.js";function F(){const g=e.c(60),{key:k,refresh:w}=t(),_=s(),S=r(K);let C;g[0]!==S?(C=S.filter(D).map(B),g[0]=S,g[1]=C):C=g[1];const N=C,[I]=l.useForm();let O;g[2]===Symbol.for("react.memo_cache_sentinel")?(O={},g[2]=O):O=g[2];const[F,E]=n.useState(O);let H;g[3]!==S||g[4]!==_?(H=function(){c({url:b.getCategoryListWithAll}).then(e=>{if(200===e.code&&e.data){const t=e.data.map(q);m(t,S)||_(d(t))}})},g[3]=S,g[4]=_,g[5]=H):H=g[5];const P=H;let V,X,Z,G,J,Q,Y,$,ee,te,se,re;g[6]!==S.length||g[7]!==P?(V=()=>{0===S.length&&P()},g[6]=S.length,g[7]=P,g[8]=V):V=g[8],g[9]===Symbol.for("react.memo_cache_sentinel")?(X=[],g[9]=X):X=g[9],n.useEffect(V,X),g[10]===Symbol.for("react.memo_cache_sentinel")?(Y={title:"网站名称",key:"title",width:200,fixed:"left"},$={title:"状态",key:"status",width:80,render:W},ee={title:"排序",key:"sort",width:80,render:R},te={title:"网站描述",key:"description",width:450},se={title:"图标",key:"icon",width:140,render:z},Z={title:"链接",key:"url",width:120,render:T},G={title:"所属分类",key:"categoryName",width:120},J={title:"提交人",key:"username",width:160,render:M},Q={type:"time",title:"更新时间",key:"createdTime",width:200},g[10]=Z,g[11]=G,g[12]=J,g[13]=Q,g[14]=Y,g[15]=$,g[16]=ee,g[17]=te,g[18]=se):(Z=g[10],G=g[11],J=g[12],Q=g[13],Y=g[14],$=g[15],ee=g[16],te=g[17],se=g[18]),g[19]!==w?(re=[Y,$,ee,te,se,Z,G,J,Q,{title:"操作",fixed:"right",width:120,render:(e,t)=>i.jsx(U,{record:t,refresh:w})}],g[19]=w,g[20]=re):re=g[20];const le=re;let ne,ie,ae,oe,ce,me,de,he,ue,fe,xe,pe,ye,je,be,ge,ke,we,_e;return g[21]!==I?(ne=()=>{const e=I.getFieldsValue();e[Math.random()]=!0,E(v(e))},g[21]=I,g[22]=ne):ne=g[22],g[23]===Symbol.for("react.memo_cache_sentinel")?(ie={gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gridAutoRows:"32px"},g[23]=ie):ie=g[23],g[24]===Symbol.for("react.memo_cache_sentinel")?(ae=i.jsx(l.Item,{name:"title",children:i.jsx(a,{placeholder:"标题"})}),g[24]=ae):ae=g[24],g[25]===Symbol.for("react.memo_cache_sentinel")?(oe=i.jsx(l.Item,{name:"link",children:i.jsx(a,{placeholder:"链接"})}),g[25]=oe):oe=g[25],g[26]===Symbol.for("react.memo_cache_sentinel")?(ce=i.jsx(l.Item,{name:"username",children:i.jsx(a,{placeholder:"用户名"})}),g[26]=ce):ce=g[26],g[27]!==N?(me=i.jsxs("div",{className:"gap-3 flex-wrap grid w-full mb-3",style:ie,children:[ae,oe,ce,i.jsx(l.Item,{name:"categoryId",children:i.jsx(o,{placeholder:"分类",options:N,allowClear:!0})})]}),g[27]=N,g[28]=me):me=g[28],g[29]!==I?(de=()=>{I.submit()},g[29]=I,g[30]=de):de=g[30],g[31]===Symbol.for("react.memo_cache_sentinel")?(he=i.jsx(h,{}),g[31]=he):he=g[31],g[32]!==de?(ue=i.jsx(u,{type:"primary",onClick:de,icon:he,children:"查询"}),g[32]=de,g[33]=ue):ue=g[33],g[34]!==I?(fe=()=>{I.resetFields();const e={};e[Math.random()]=!0,E(e)},g[34]=I,g[35]=fe):fe=g[35],g[36]===Symbol.for("react.memo_cache_sentinel")?(xe=i.jsx(f,{}),g[36]=xe):xe=g[36],g[37]!==fe?(pe=i.jsx(u,{onClick:fe,icon:xe,children:"重置"}),g[37]=fe,g[38]=pe):pe=g[38],g[39]!==ue||g[40]!==pe?(ye=i.jsxs("div",{className:"flex flex-wrap gap-3",children:[ue,pe]}),g[39]=ue,g[40]=pe,g[41]=ye):ye=g[41],g[42]!==I||g[43]!==ne||g[44]!==me||g[45]!==ye?(je=i.jsxs(l,{className:"w-full",form:I,onFinish:ne,children:[me,ye]}),g[42]=I,g[43]=ne,g[44]=me,g[45]=ye,g[46]=je):je=g[46],g[47]===Symbol.for("react.memo_cache_sentinel")?(be=i.jsx(x,{className:"my-3"}),g[47]=be):be=g[47],g[48]!==w?(ge=i.jsx("div",{className:"mb-3",children:i.jsx(u,{type:"primary",onClick:()=>{p.show(y,{title:"新增收录",children:i.jsx(j,{refresh:w})})},children:"新增收录"})}),g[48]=w,g[49]=ge):ge=g[49],g[50]!==F?(ke={searchParams:F},g[50]=F,g[51]=ke):ke=g[51],g[52]!==le||g[53]!==k||g[54]!==ke?(we=i.jsx(A,{columns:le,getListUrl:b.getAwaitingApprovalWebsiteSourceList,dataKey:"data.list",tableKey:k,params:ke}),g[52]=le,g[53]=k,g[54]=ke,g[55]=we):we=g[55],g[56]!==je||g[57]!==ge||g[58]!==we?(_e=i.jsxs(L,{children:[je,be,ge,we]}),g[56]=je,g[57]=ge,g[58]=we,g[59]=_e):_e=g[59],_e}function M(e){return i.jsx(g,{color:e?"geekblue":"red",bordered:!1,icon:i.jsx(w,{}),children:e||"已注销"})}function T(e){return i.jsx(u,{type:"link",size:"small",onClick:()=>{e&&window.open(e,"_blank")},children:e||"-"})}function z(e,t){return e?i.jsxs("div",{className:"p-1 rounded-sm flex items-center gap-2 w-[110px]",style:{backgroundColor:t.backgroundColor,color:t.fontColor},children:[i.jsx("img",{src:k(e),className:"rounded-sm",style:{width:"32px",height:"32px"},onError:E}),i.jsx("p",{className:"text-xs font-semibold p-ellipsis w-12",children:t.title})]}):"-"}function E(e){e.currentTarget.src="/icons/default_image.svg"}function R(e){return i.jsx(g,{color:"gold",icon:i.jsx(O,{}),children:e||"-"})}function W(e){return i.jsx(g,{color:0===e?"blue":1===e?"green":2===e?"default":"red",children:0===e?"待审核":1===e?"正常":2===e?"隐藏":"被驳回"})}function q(e){return{label:e.label,key:e.id}}function B(e){return{label:e.label,value:String(e.key)}}function D(e){return e&&0!==e.key}function K(e){return e.stateUtils.categoryList}const U=n.memo(t=>{const s=e.c(24),{record:l,refresh:a}=t;let o;s[0]===Symbol.for("react.memo_cache_sentinel")?(o=[],s[0]=o):o=s[0];const[c,m]=n.useState(o),d=r(H);let h;s[1]!==l||s[2]!==a||s[3]!==d?(h=function(){_(1,m),setTimeout(()=>{S({url:b.deleteWebsiteInfo,token:d,data:{id:l.id}}).then(e=>{200===e.code&&a()}).finally(()=>{C(1,m)})},500)},s[1]=l,s[2]=a,s[3]=d,s[4]=h):h=s[4];const f=h;let x,g,k,w,v,A,L,O;return s[5]===Symbol.for("react.memo_cache_sentinel")?(x={width:"44px"},s[5]=x):x=s[5],s[6]!==l||s[7]!==a?(g=()=>{p.show(y,{title:"编辑收录信息",children:i.jsx(j,{editItem:l,refresh:a,type:"edit"})})},s[6]=l,s[7]=a,s[8]=g):g=s[8],s[9]!==c[0]||s[10]!==g?(k=i.jsx(u,{type:"link",size:"small",disabled:c[0],style:x,onClick:g,children:"编辑"}),s[9]=c[0],s[10]=g,s[11]=k):k=s[11],s[12]===Symbol.for("react.memo_cache_sentinel")?(w={width:"44px"},s[12]=w):w=s[12],s[13]!==c[1]?(v=c[1]?i.jsx(I,{}):"删除",s[13]=c[1],s[14]=v):v=s[14],s[15]!==c[1]||s[16]!==v?(A=i.jsx(u,{danger:!0,type:"link",size:"small",disabled:c[1],style:w,children:v}),s[15]=c[1],s[16]=v,s[17]=A):A=s[17],s[18]!==f||s[19]!==A?(L=i.jsx(N,{title:"是否确认删除该收录？",onConfirm:f,children:A}),s[18]=f,s[19]=A,s[20]=L):L=s[20],s[21]!==k||s[22]!==L?(O=i.jsxs("div",{className:"flex flex-wrap",children:[k,L]}),s[21]=k,s[22]=L,s[23]=O):O=s[23],O});function H(e){return e.user.token}export{F as default};
