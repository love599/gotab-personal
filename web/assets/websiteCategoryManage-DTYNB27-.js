import{c as e,r as t,j as s,B as r,X as i,E as o,S as l,V as n,n as a,a as m,l as c,k as d,q as p,a2 as j}from"./requestIdleCallbackPolyfill-CEimuL3I.js";import{u as f,R as h}from"./useFresh-CXjlCB9G.js";import{r as x}from"./transformData-B04ZS_a1.js";import{M as u,R as y}from"./myTable-DifYlg4v.js";import{C as b}from"./contentLayout-FLn7UwnK.js";import{F as _}from"./index-CLs8asrc.js";import{I as g}from"./index-B6Nw0KJ3.js";import{R as w}from"./SearchOutlined-C3PMWV9D.js";import{R as C}from"./RedoOutlined-BRwewl8_.js";import{R as S}from"./QuestionCircleOutlined-Iab4W4Td.js";import{T as k}from"./index-DG56vLGF.js";import{R as O}from"./SortAscendingOutlined-C-ATcvwB.js";import{T as F}from"./index-BXpSMQ4p.js";import"./index-CVsAKlSW.js";import"./useForm-BmxkZ3hM.js";import"./index-Cu_iOCo3.js";import"./LeftOutlined-D9Sp279J.js";import"./FolderOpenOutlined-DHBkEw2_.js";import"./LinkOutlined-Bi0iQjOQ.js";import"./MailOutlined-OCY9FzYP.js";import"./Overflow-CysMCa0X.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./index-we7dqPR7.js";import"./getAllowClear-Cn6nd0XC.js";import"./Input-BBAEOKR8.js";import"./assets-B8Bi78Vh.js";import"./MoneyCollectOutlined-CF6G1lbx.js";import"./MoneyCollectOutlined-4QlEwa2l.js";import"./index-ZPw8Urkh.js";import"./CaretDownOutlined-DcidQ0ah.js";import"./styleChecker-o73Q9rTs.js";import"./AlipayOutlined-DooH4oh8.js";import"./AlipayOutlined-tZM3mGx9.js";import"./useEffectOnce-BdmSZdB2.js";import"./useBreakpoint-BCsgDtUx.js";import"./index-BCD7T3lV.js";import"./row-eYrfNDsp.js";import"./QuestionCircleOutlined-DSm95oJP.js";import"./TextArea-D12ZTmOp.js";import"./SortAscendingOutlined-8bEGxkuH.js";function v(){const m=e.c(41),{key:c,refresh:d}=f(),[p]=_.useForm();let j;m[0]===Symbol.for("react.memo_cache_sentinel")?(j={},m[0]=j):j=m[0];const[h,y]=t.useState(j);let k,O,F,v;m[1]===Symbol.for("react.memo_cache_sentinel")?(k={title:"分类名称",key:"name",width:160,fixed:"left"},O={title:"排序",key:"sort",width:80,render:T},F={title:"更新时间",key:"updatedTime",width:200,render:N},m[1]=k,m[2]=O,m[3]=F):(k=m[1],O=m[2],F=m[3]),m[4]!==d?(v=[k,O,F,{title:"操作",fixed:"right",width:120,render:(e,t)=>s.jsx(R,{record:t,refresh:d})}],m[4]=d,m[5]=v):v=m[5];const A=v;let M,q,L,W,Q,V,z,B,D,E,K,P,U,X,$,G,H;return m[6]!==p?(M=()=>{const e=p.getFieldsValue();e[Math.random()]=!0,y(x(e))},m[6]=p,m[7]=M):M=m[7],m[8]===Symbol.for("react.memo_cache_sentinel")?(q={gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gridAutoRows:"32px"},m[8]=q):q=m[8],m[9]===Symbol.for("react.memo_cache_sentinel")?(L=s.jsx("div",{className:"gap-3 flex-wrap grid w-full mb-3",style:q,children:s.jsx(_.Item,{name:"name",children:s.jsx(g,{placeholder:"分类名称"})})}),m[9]=L):L=m[9],m[10]!==p?(W=()=>{p.submit()},m[10]=p,m[11]=W):W=m[11],m[12]===Symbol.for("react.memo_cache_sentinel")?(Q=s.jsx(w,{}),m[12]=Q):Q=m[12],m[13]!==W?(V=s.jsx(r,{type:"primary",onClick:W,icon:Q,children:"查询"}),m[13]=W,m[14]=V):V=m[14],m[15]!==p?(z=()=>{p.resetFields();const e={};e[Math.random()]=!0,y(e)},m[15]=p,m[16]=z):z=m[16],m[17]===Symbol.for("react.memo_cache_sentinel")?(B=s.jsx(C,{}),m[17]=B):B=m[17],m[18]!==z?(D=s.jsx(r,{onClick:z,icon:B,children:"重置"}),m[18]=z,m[19]=D):D=m[19],m[20]!==V||m[21]!==D?(E=s.jsxs("div",{className:"flex flex-wrap gap-3",children:[V,D]}),m[20]=V,m[21]=D,m[22]=E):E=m[22],m[23]!==p||m[24]!==E||m[25]!==M?(K=s.jsxs(_,{className:"w-full",form:p,onFinish:M,children:[L,E]}),m[23]=p,m[24]=E,m[25]=M,m[26]=K):K=m[26],m[27]===Symbol.for("react.memo_cache_sentinel")?(P=s.jsx(i,{type:"warning",description:s.jsxs(s.Fragment,{children:[s.jsx(S,{className:"mr-1"}),"收录分类在前端获取列表时做了 10 分钟的缓存效果，可能存在数据不及时更新情况，请重启或等待缓存失效"]}),className:"mt-3 p-1 px-3 text-xs font-normal w-full"}),U=s.jsx(o,{className:"my-3"}),m[27]=P,m[28]=U):(P=m[27],U=m[28]),m[29]!==d?(X=s.jsx("div",{className:"mb-3",children:s.jsx(r,{type:"primary",onClick:()=>{l.show(n,{title:"新增分类",children:s.jsx(I,{refresh:d,type:"add"})})},children:"新增分类"})}),m[29]=d,m[30]=X):X=m[30],m[31]!==h?($={searchParams:h},m[31]=h,m[32]=$):$=m[32],m[33]!==A||m[34]!==c||m[35]!==$?(G=s.jsx(u,{columns:A,getListUrl:a.getWebsiteCategoryList,dataKey:"data.list",tableKey:c,params:$}),m[33]=A,m[34]=c,m[35]=$,m[36]=G):G=m[36],m[37]!==K||m[38]!==X||m[39]!==G?(H=s.jsxs(b,{children:[K,P,U,X,G]}),m[37]=K,m[38]=X,m[39]=G,m[40]=H):H=m[40],H}function N(e,t){return s.jsx(k,{icon:s.jsx(h,{}),children:e||t.createdTime})}function T(e){return s.jsx(k,{color:"gold",icon:s.jsx(O,{}),children:e||"-"})}const I=i=>{const o=e.c(16),{editItem:d,refresh:p,type:j}=i,f=void 0===j?"add":j,[h]=_.useForm(),[x,u]=t.useState(!1);let y;o[0]!==d||o[1]!==p||o[2]!==f?(y=function(e){u(!0);const t=m.getState().user.token;c({url:"add"===f?a.addWebsiteCategory:a.editWebsiteCategory,token:t,data:"add"===f?e:{...e,id:d.id}}).then(e=>{200===e.code&&(l.hide(n),p&&p())}).finally(()=>{u(!1)})},o[0]=d,o[1]=p,o[2]=f,o[3]=y):y=o[3];const b=y;let w,C,S,k;o[4]===Symbol.for("react.memo_cache_sentinel")?(w={flex:"82px"},o[4]=w):w=o[4],o[5]===Symbol.for("react.memo_cache_sentinel")?(C=s.jsx(_.Item,{name:"name",label:"分类名称",required:!0,rules:[{required:!0}],children:s.jsx(g,{placeholder:"分类名称",allowClear:!0})}),o[5]=C):C=o[5],o[6]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsx(_.Item,{name:"sort",label:"排序",children:s.jsx(F,{placeholder:"排序"})}),o[6]=S):S=o[6],o[7]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsx(r,{onClick:A,children:"取消"}),o[7]=k):k=o[7];const O="add"===f?"新增分类":"保存编辑";let v,N;return o[8]!==x||o[9]!==O?(v=s.jsxs("div",{className:"flex justify-end gap-3 flex-wrap",children:[k,s.jsx(r,{type:"primary",htmlType:"submit",loading:x,children:O})]}),o[8]=x,o[9]=O,o[10]=v):v=o[10],o[11]!==d||o[12]!==h||o[13]!==b||o[14]!==v?(N=s.jsx(s.Fragment,{children:s.jsxs(_,{form:h,autoComplete:"off",variant:"filled",initialValues:d,labelCol:w,onFinish:b,children:[C,S,v]})}),o[11]=d,o[12]=h,o[13]=b,o[14]=v,o[15]=N):N=o[15],N},R=t.memo(i=>{const o=e.c(20),{record:f,refresh:h}=i;let x;o[0]===Symbol.for("react.memo_cache_sentinel")?(x=[],o[0]=x):x=o[0];const[u,b]=t.useState(x);let _;o[1]!==f||o[2]!==h?(_=function(){d(1,b);const e=m.getState().user.token;setTimeout(()=>{c({url:a.deleteWebsiteCategory,token:e,data:{id:f.id}}).then(e=>{200===e.code&&h()}).finally(()=>{p(1,b)})},500)},o[1]=f,o[2]=h,o[3]=_):_=o[3];const g=_;let w,C,S,k,O,F,v;return o[4]===Symbol.for("react.memo_cache_sentinel")?(w={width:"44px"},o[4]=w):w=o[4],o[5]!==f||o[6]!==h?(C=s.jsx(r,{type:"link",size:"small",style:w,onClick:()=>{l.show(n,{title:"编辑分类",children:s.jsx(I,{editItem:f,refresh:h,type:"edit"})})},children:"编辑"}),o[5]=f,o[6]=h,o[7]=C):C=o[7],o[8]===Symbol.for("react.memo_cache_sentinel")?(S={width:"44px"},o[8]=S):S=o[8],o[9]!==u[1]?(k=u[1]?s.jsx(y,{}):"删除",o[9]=u[1],o[10]=k):k=o[10],o[11]!==u[1]||o[12]!==k?(O=s.jsx(r,{danger:!0,type:"link",size:"small",disabled:u[1],style:S,children:k}),o[11]=u[1],o[12]=k,o[13]=O):O=o[13],o[14]!==g||o[15]!==O?(F=s.jsx(j,{title:"是否确认删除？",onConfirm:g,children:O}),o[14]=g,o[15]=O,o[16]=F):F=o[16],o[17]!==C||o[18]!==F?(v=s.jsxs("div",{className:"flex flex-wrap",children:[C,F]}),o[17]=C,o[18]=F,o[19]=v):v=o[19],v});function A(){l.hide(n)}export{v as default};
