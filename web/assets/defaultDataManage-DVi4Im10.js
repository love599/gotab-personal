import{r as e,I as t,c as r,j as i,a as s,n as o,B as l,a2 as n,X as a,F as d,o as c,l as m,v as u}from"./requestIdleCallbackPolyfill-CVD_37F6.js";import{u as f}from"./useFresh-Cc-yG2bB.js";import{M as j,R as p}from"./myTable-D037XonQ.js";import{C as x}from"./contentLayout-BITNm175.js";import{R as h}from"./ReloadOutlined-nvodtszL.js";import{C as y}from"./ClearOutlined-CT7898ko.js";import{R as b}from"./QuestionCircleOutlined-BSFc9XKj.js";import{T as O}from"./index-li3JoM_Y.js";import{R as _}from"./UserOutlined-DPKknh1V.js";import"./index-D-PrQJP-.js";import"./useForm-LHSdzXb2.js";import"./index-CHK4hTbV.js";import"./LeftOutlined-D9Sp279J.js";import"./MailOutlined-CaUvQpRQ.js";import"./Overflow-D57B_Btp.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./index-DcfMndBI.js";import"./getAllowClear-CG1WH6yx.js";import"./Input-DNytczHm.js";import"./transformData-B4JHyB6R.js";import"./assets-B8Bi78Vh.js";import"./MoneyCollectOutlined-BRXH_FUZ.js";import"./MoneyCollectOutlined-4QlEwa2l.js";import"./index-DfF1xqkc.js";import"./CaretDownOutlined-DcidQ0ah.js";import"./FolderOpenOutlined-BNhgQTIu.js";import"./FolderOutlined-k9jtXdfw.js";import"./styleChecker-BJxqisLG.js";import"./AlipayOutlined-CYiD0G4b.js";import"./AlipayOutlined-tZM3mGx9.js";import"./useEffectOnce-CLWJY0ZK.js";import"./useBreakpoint-B9NKbWRZ.js";import"./index-Ds8dCkvV.js";import"./ReloadOutlined-B00s2TmV.js";import"./QuestionCircleOutlined-DSm95oJP.js";function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},g.apply(this,arguments)}const k=(r,i)=>e.createElement(t,g({},r,{ref:i,icon:y})),w=e.forwardRef(k);function C(){const t=r.c(27),{key:m,refresh:u}=f(),[p,y]=e.useState(!1);let O,_,g,k;t[0]===Symbol.for("react.memo_cache_sentinel")?(O={title:"用户名",key:"username",width:160,fixed:"left",render:D},_={title:"状态",key:"deleted_at",width:80,render:S},g={type:"time",title:"更新时间",key:"updated_at",width:200},t[0]=O,t[1]=_,t[2]=g):(O=t[0],_=t[1],g=t[2]),t[3]!==u?(k=[O,_,g,{title:"操作",fixed:"right",width:120,render:(e,t)=>i.jsx(v,{record:t,refresh:u})}],t[3]=u,t[4]=k):k=t[4];const C=k;let R;t[5]!==u?(R=function(){y(!0);const e=s.getState().user.token;o({url:c.clearDefaultData,token:e}).then(e=>{200===e.code&&u()}).finally(()=>{y(!1)})},t[5]=u,t[6]=R):R=t[6];const F=R;let N,T,L,M,q,A,I,Q,U,z;return t[7]===Symbol.for("react.memo_cache_sentinel")?(N=i.jsx(h,{}),t[7]=N):N=t[7],t[8]!==u?(T=i.jsx(l,{type:"primary",icon:N,onClick:()=>{u()},children:"刷新列表"}),t[8]=u,t[9]=T):T=t[9],t[10]===Symbol.for("react.memo_cache_sentinel")?(L=i.jsx(w,{}),t[10]=L):L=t[10],t[11]!==p?(M=i.jsx(l,{variant:"filled",color:"danger",icon:L,loading:p,children:"清理数据（只保留 10 条）"}),t[11]=p,t[12]=M):M=t[12],t[13]!==F||t[14]!==M?(q=i.jsx(n,{title:"是否确认清理？",onConfirm:F,children:M}),t[13]=F,t[14]=M,t[15]=q):q=t[15],t[16]!==T||t[17]!==q?(A=i.jsxs("div",{className:"flex gap-3 flex-wrap",children:[T,q]}),t[16]=T,t[17]=q,t[18]=A):A=t[18],t[19]===Symbol.for("react.memo_cache_sentinel")?(I=i.jsx(a,{type:"warning",description:i.jsxs(i.Fragment,{children:[i.jsx(b,{className:"mr-1"}),"默认数据为最新的启用数据，且数据会随着管理员在主页设置默认主页数据而更新！管理员保存新的默认数据后，所有先前启用数据均会禁用！"]}),className:"mt-3 p-1 px-3 text-xs font-normal w-full"}),Q=i.jsx(d,{className:"my-3"}),t[19]=I,t[20]=Q):(I=t[19],Q=t[20]),t[21]!==C||t[22]!==m?(U=i.jsx(j,{columns:C,getListUrl:c.getDefaultDataList,dataKey:"data.list",tableKey:m}),t[21]=C,t[22]=m,t[23]=U):U=t[23],t[24]!==A||t[25]!==U?(z=i.jsxs(x,{children:[A,I,Q,U]}),t[24]=A,t[25]=U,t[26]=z):z=t[26],z}function S(e){return i.jsx(O,{color:e?"red":"green",children:e?"禁用":"启用"})}function D(e){return i.jsx(O,{color:e?"geekblue":"red",bordered:!1,icon:i.jsx(_,{}),children:e||"已注销"})}const v=e.memo(t=>{const a=r.c(33),{record:d,refresh:f}=t;let j;a[0]===Symbol.for("react.memo_cache_sentinel")?(j=[],a[0]=j):j=a[0];const[x,h]=e.useState(j);let y;a[1]!==d.id||a[2]!==f?(y=function(){m(0,h);const e=s.getState().user.token;setTimeout(()=>{o({url:c.enableDefaultData,token:e,data:{id:d.id}}).then(e=>{200===e.code&&f()}).finally(()=>{u(0,h)})},500)},a[1]=d.id,a[2]=f,a[3]=y):y=a[3];const b=y;let O;a[4]!==d.id||a[5]!==f?(O=function(){m(0,h);const e=s.getState().user.token;setTimeout(()=>{o({url:c.disableDefaultData,token:e,data:{id:d.id}}).then(e=>{200===e.code&&f()}).finally(()=>{u(0,h)})},500)},a[4]=d.id,a[5]=f,a[6]=O):O=a[6];const _=O;let g;a[7]!==d.id||a[8]!==f?(g=function(){m(1,h);const e=s.getState().user.token;setTimeout(()=>{o({url:c.deleteDefaultData,token:e,data:{id:d.id}}).then(e=>{200===e.code&&f()}).finally(()=>{u(1,h)})},500)},a[7]=d.id,a[8]=f,a[9]=g):g=a[9];const k=g,w=d.deleted_at?"是否确认恢复？":"是否确认禁用？",C=d.deleted_at?b:_;let S,D,v,R,F,N,T,L,M;return a[10]===Symbol.for("react.memo_cache_sentinel")?(S={width:"44px"},a[10]=S):S=a[10],a[11]!==x[0]||a[12]!==d.deleted_at?(D=x[0]?i.jsx(p,{}):d.deleted_at?"恢复":"禁用",a[11]=x[0],a[12]=d.deleted_at,a[13]=D):D=a[13],a[14]!==x[0]||a[15]!==D?(v=i.jsx(l,{type:"link",size:"small",disabled:x[0],style:S,children:D}),a[14]=x[0],a[15]=D,a[16]=v):v=a[16],a[17]!==w||a[18]!==C||a[19]!==v?(R=i.jsx(n,{title:w,onConfirm:C,children:v}),a[17]=w,a[18]=C,a[19]=v,a[20]=R):R=a[20],a[21]===Symbol.for("react.memo_cache_sentinel")?(F={width:"44px"},a[21]=F):F=a[21],a[22]!==x[1]?(N=x[1]?i.jsx(p,{}):"删除",a[22]=x[1],a[23]=N):N=a[23],a[24]!==x[1]||a[25]!==N?(T=i.jsx(l,{danger:!0,type:"link",size:"small",disabled:x[1],style:F,children:N}),a[24]=x[1],a[25]=N,a[26]=T):T=a[26],a[27]!==k||a[28]!==T?(L=i.jsx(n,{title:"是否确认删除？",onConfirm:k,children:T}),a[27]=k,a[28]=T,a[29]=L):L=a[29],a[30]!==L||a[31]!==R?(M=i.jsxs("div",{className:"flex flex-wrap",children:[R,L]}),a[30]=L,a[31]=R,a[32]=M):M=a[32],M});export{C as default};
