import{c as e,F as a,r as s,j as l,w as r,x as t,B as n,n as o,C as c,e as i,a8 as m,a1 as u,aj as d,H as f,ak as h,z as x,D as _,a9 as j,O as p,a0 as b,E as y}from"./main-DoQmQ3rA.js";import{C as w}from"./contentLayout-DmA4VjSS.js";function S(){const S=e.c(22),[g]=a.useForm();let v;S[0]===Symbol.for("react.memo_cache_sentinel")?(v=[],S[0]=v):v=S[0];const[C,q]=s.useState(v);let F;S[1]!==g?(F=function(){c(0,q);const e=i.getState().user.token;m({url:y.getInfoConfig,token:e}).then(e=>{if(g.setFieldsValue(e.data),!e.data.server_url&&!u()){const e=d();g.setFieldValue("server_url",e)}}).finally(()=>{f(0,q)})},S[1]=g,S[2]=F):F=S[2];const N=F;let k,I,z;S[3]!==N?(k=()=>{N()},S[3]=N,S[4]=k):k=S[4],S[5]===Symbol.for("react.memo_cache_sentinel")?(I=[],S[5]=I):I=S[5],s.useEffect(k,I),S[6]===Symbol.for("react.memo_cache_sentinel")?(z=function(e){if(e.server_url&&!h(e.server_url))return void x.error("后台服务地址必须以http或https开头");c(1,q);const a=i.getState().user.token;_({url:y.updateInfoConfig,token:a,data:e}).finally(()=>{f(1,q)})},S[6]=z):z=S[6];const E=z;let R,V,B,D,H,L,O,T,X,A;return S[7]===Symbol.for("react.memo_cache_sentinel")?(R=l.jsx(j,{type:"warning",description:l.jsxs(l.Fragment,{children:[l.jsx(p,{className:"mr-1"}),"更新网页的标题、描述等项目基础信息，服务地址主要用于插件版打包使用，别的信息可以自行更改项目文件，达到更改目的！或联系作者：dengxiwang@aliyun.com"]}),className:"mb-4 p-1 px-3 text-xs font-normal w-full"}),S[7]=R):R=S[7],S[8]===Symbol.for("react.memo_cache_sentinel")?(V={flex:"120px"},S[8]=V):V=S[8],S[9]===Symbol.for("react.memo_cache_sentinel")?(B=l.jsx(a.Item,{label:"网站标题",required:!0,name:"web_title",rules:[{required:!0}],children:l.jsx(r,{placeholder:"网站标题",allowClear:!0})}),S[9]=B):B=S[9],S[10]===Symbol.for("react.memo_cache_sentinel")?(D=[{required:!0}],S[10]=D):D=S[10],S[11]===Symbol.for("react.memo_cache_sentinel")?(L=l.jsx(a.Item,{label:"网站描述",required:!0,name:"web_description",rules:D,children:l.jsx(t,{autoSize:{minRows:3,maxRows:3},allowClear:!0,placeholder:"网站描述，head头部中的description信息"})}),H=l.jsx(b,{}),S[11]=H,S[12]=L):(H=S[11],L=S[12]),S[13]===Symbol.for("react.memo_cache_sentinel")?(O=l.jsx(a.Item,{label:"后台服务地址",required:!0,name:"server_url",rules:[{required:!0}],children:l.jsx(r,{allowClear:!0,placeholder:"后台服务地址，如：https://web.gotab.cn"})}),S[13]=O):O=S[13],S[14]!==C[1]?(T=l.jsx("div",{className:"w-full flex justify-center",children:l.jsx(n,{htmlType:"submit",type:"primary",className:"w-full max-w-64",loading:C[1],children:"保存配置"})}),S[14]=C[1],S[15]=T):T=S[15],S[16]!==g||S[17]!==T?(X=l.jsxs(a,{form:g,className:"w-full",labelCol:V,onFinish:E,children:[B,L,H,O,T]}),S[16]=g,S[17]=T,S[18]=X):X=S[18],S[19]!==C[0]||S[20]!==X?(A=l.jsxs(w,{children:[R,l.jsx("div",{className:"w-full",children:l.jsx(o,{spinning:C[0],children:X})})]}),S[19]=C[0],S[20]=X,S[21]=A):A=S[21],A}export{S as default};
